{"version":3,"sources":["webpack://Autodesk.Extensions.[name]/webpack/bootstrap","webpack://Autodesk.Extensions.[name]/(webpack)/buildin/global.js","webpack://Autodesk.Extensions.[name]/(webpack)/buildin/amd-options.js","webpack://Autodesk.Extensions.[name]/./extensions/Section/Section.css?22a4","webpack://Autodesk.Extensions.[name]/./extensions/Section/Section.css","webpack://Autodesk.Extensions.[name]/./thirdparty/lodash/debounce.js","webpack://Autodesk.Extensions.[name]/./node_modules/css-loader/lib/css-base.js","webpack://Autodesk.Extensions.[name]/./node_modules/style-loader/lib/addStyles.js","webpack://Autodesk.Extensions.[name]/./thirdparty/three.js/TransformControls.js","webpack://Autodesk.Extensions.[name]/./extensions/Section/SectionTool.js","webpack://Autodesk.Extensions.[name]/./extensions/Section/Section.js","webpack://Autodesk.Extensions.[name]/./node_modules/style-loader/lib/urls.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","g","this","Function","e","window","__webpack_amd_options__","content","options","transform","undefined","locals","push","j","y","f","valueOf","replace","u","a","test","b","slice","NaN","parseInt","self","global","toString","v","Math","max","min","Date","now","debounce","O","apply","T","setTimeout","S","arguments","h","TypeError","leading","maxWait","trailing","cancel","clearTimeout","flush","isObject","isObjectLike","isSymbol","toNumber","VERSION","define","useSourceMap","list","map","item","cssMapping","btoa","sourceMapping","sourceMap","unescape","encodeURIComponent","JSON","stringify","sourceURLs","sources","source","sourceRoot","concat","join","cssWithMappingToString","mediaQuery","alreadyImportedModules","length","id","fn","memo","stylesInDom","isOldIE","document","all","atob","getTarget","target","parent","querySelector","getElement","styleTarget","HTMLIFrameElement","contentDocument","head","singleton","singletonCounter","stylesInsertedAtTop","fixUrls","addStylesToDom","styles","domStyle","refs","parts","addStyle","listToStyles","newStyles","base","part","css","media","insertStyleElement","style","insertInto","Error","lastStyleElementInsertedAtTop","insertAt","nextSibling","insertBefore","appendChild","firstChild","before","removeStyleElement","parentNode","removeChild","idx","indexOf","splice","createStyleElement","createElement","attrs","type","nonce","getNonce","addAttrs","el","keys","forEach","setAttribute","obj","update","remove","result","default","styleIndex","applyToSingletonTag","URL","createObjectURL","revokeObjectURL","Blob","link","rel","createLinkElement","updateLink","href","applyToTag","newObj","DEBUG","newList","mayRemove","textStore","replaceText","index","replacement","filter","Boolean","styleSheet","cssText","cssNode","createTextNode","childNodes","autoFixUrls","convertToAbsoluteUrls","blob","oldSrc","init_TransformGizmos","GizmoMaterial","parameters","THREE","MeshBasicMaterial","depthTest","depthWrite","side","FrontSide","transparent","setValues","oldColor","color","clone","oldOpacity","opacity","highlight","highlighted","setRGB","copy","GizmoLineMaterial","LineBasicMaterial","linewidth","PolyhedronGeometry","vertices","indices","radius","detail","Geometry","that","prepare","Vector3","faces","v1","v2","v3","Face3","centroid","subdivide","faceVertexUvs","uvs","x0","x","x1","x2","multiplyScalar","vector","vertex","normalize","azimuth","PI","atan2","sqrt","z","inclination","uv","Vector2","make","face","add","divideScalar","azi","correctUV","cols","pow","aj","lerp","bj","rows","k","floor","mergeVertices","computeFaceNormals","boundingSphere","Sphere","OctahedronGeometry","TorusGeometry","tube","radialSegments","tubularSegments","arc","center","normals","cos","sin","sub","pointerVector","pointerDir","ray","createCircleGeometry","facing","geometry","createArrowGeometry","radiusTop","radiusBottom","height","heightSegments","openEnded","arrowGeometry","mesh","Mesh","CylinderGeometry","position","updateMatrix","merge","matrix","createLineGeometry","axis","lineGeometry","TransformGizmo","scope","init","Object3D","handles","pickers","planes","highlights","hemiPicker","subPickers","planeGeometry","PlaneBufferGeometry","planeMaterial","wireframe","DoubleSide","activePlane","rotation","set","visible","setupGizmos","activeMode","traverse","child","tempGeometry","BufferGeometry","fromBufferGeometry","scale","hide","show","material","addGizmos","gizmoMap","visble","setHandlePickerGizmos","handleGizmos","pickerGizmos","highlightGizmos","hemiPickerGizmos","subPickerGizmos","eye","vec1","vec2","lookAtMatrix","Matrix4","search","quaternion","setFromRotationMatrix","lookAt","setFromEuler","TransformGizmoTranslate","lineXGeometry","lineYGeometry","lineZGeometry","X","Line","Y","Z","XYZ","XY","YZ","XZ","BoxGeometry","setActivePlane","tempMatrix","applyMatrix4","getInverse","extractRotation","matrixWorld","abs","TransformGizmoRotate","RX","RY","RZ","RE","RXYZE","eye2","worldRotation","Euler","tempQuaternion","Quaternion","unitX","unitY","unitZ","quaternionX","quaternionY","quaternionZ","makeRotationFromQuaternion","setFromAxisAngle","multiplyQuaternions","TransformGizmoTranslateRotate","theta","SphereGeometry","useAllPickers","TransformGizmoScale","TransformControls","camera","domElement","gizmo","snap","snapDelta","space","size","normal","startLine","endLine","LineDashedMaterial","centerLine","ImageUtils","loadTexture","Autodesk","Viewing","Private","getResourceUrl","magFilter","minFilter","NearestFilter","CircleGeometry","centerMark","ticks","_dragging","_mode","changeEvent","mouseDownEvent","mouseUpEvent","objectChangeEvent","point","Raycaster","offset","offsetRotation","clientScale","tempVector","projX","projY","projZ","quaternionXYZ","quaternionE","oldPosition","oldScale","oldRotationMatrix","parentRotationMatrix","parentScale","worldPosition","worldRotationMatrix","camPosition","intersectObjects","pointer","objects","canvasX","canvasY","attach","updateUnitVectors","detach","setMode","dispatchEvent","getPicker","children","setPosition","setNormal","setFromUnitVectors","applyQuaternion","multiply","setSnap","delta","setSize","setSpace","updateMatrixWorld","setFromMatrixPosition","applyEuler","isPerspective","dist","distanceTo","tan","fov","top","bottom","rect","getBoundingClientRect","gizmoOffset","setGizmoOffset","vec","showRotationGizmos","onPointerHover","event","intersect","onPointerDown","pointerType","button","planeIntersect","setFromMatrixScale","verticesNeedUpdate","pos","getAttribute","pt1","fromAttribute","pt2","pt3","pt4","dashSize","gapSize","computeLineDistances","onPointerMove","dot","rotz","rotsnap","round","tempAxis","cross","rot","angleTo","projx","projy","projz","tempx","tempy","tempz","rotx","roty","matrixAutoUpdate","onPointerUp","clientX","clientY","recursive","clientWidth","clientHeight","unproject","transformDirection","intersections","SectionMeshClass","avp","SectionTool","viewer","_transRotControl","_transControl","_trcOffset","_viewer","impl","_names","_active","_isDragging","_boxChanged","_isPlaneOn","_tintColor","tintColor","_tintIntensity","tintIntensity","_gizmoOffsetRight","isNaN","gizmoOffsetRight","_gizmoOffsetLeft","gizmoOffsetLeft","_gizmoOffsetTop","gizmoOffsetTop","_gizmoOffsetBottom","gizmoOffsetBottom","_gizmoNewClientPos","_sectionGroups","_sectionPlanes","_sectionPicker","_activeMode","_touchType","_initialized","_visibleAtFirst","_outlineIndices","sendAnalyticsDebounced","from","action","analytics","track","updateViewer","invalidate","updateControls","client","worldToClient","getCanvasBoundingClientRect","width","plane","intersection","adjustGizmoToBounds","updateSections","updatePlaneMeshes","updateCapMeshes","Plane","setComponents","w","planeVec","Vector4","constant","connectivity","outlines","constructor","getWorldPosition","init_SectionMesh","_fragIterator","_timeSlice","_sliceDelay","_callback","_models","_curModel","_instanceTree","_m","_d","_f","_capTimer","_dbIds","_fragIds","reset","models","doIteration","endTime","performance","next","nextModel","getInstanceTree","enumNodeChildren","getRootId","dbId","nextDbId","isNodeHidden","isNodeOff","enumNodeFragments","fragId","start","delay","callback","cg","Extensions","CompGeom","sceneAfter","skipDepthTarget","_removeSections","section3D","scene","section2D","toPlaneCoords","makePlaneBasis","fromPaneCoords","mat2dname","matman","create2DMaterial","skipCircles","skipEllipticals","isScreenSpace","mat2d","findMaterial","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","cutplanes","_otherCutPlanes","box","Box3","modelQueue","getModels","intersects","model","lastFrag","frags","getFragmentList","getWorldBounds","xBoxPlane","getVizmesh","is2d","isLines","xMeshPlane","bbox","convertToPlaneCoords","vbb","VertexBufferBuilder","Color","getDiffuseColor","eset","EdgeSet","snapEdges","sanitizeEdges","stitchContours","cset","triangulate","contours","cntr","pts","addSegment","mdata","toMesh","BufferGeometryUtils","meshToGeometry","bg2d","streamingDraw","streamingIndex","mesh2d","frustumCulled","modelId","triangulationFailed","bg","toPolygonMesh","packedNormals","mat","cloneMaterial","bumpMap","normalMap","alphaMap","specularMap","hatchPattern","needsUpdate","angle","hatchParams","hatchTintColor","hatchTintIntensity","prismType","defines","toUpperCase","capmesh","_ownCutPlaneSet","setCutPlaneSetFor2DRendering","createPlaneMesh","quat","ptMax","projectPoint","ptMin","invQuat","inverse","subVectors","getVisibleBounds","getBoundingSphere","pt","presetIndex","currentLightPreset","bgColor","LightPresets","bgColorGradient","lineMaterial","fromArray","array","itemSize","line","rebuild","traverseSections","minv","connect","intersectPlanes","setXYZ","computeBoundingBox","computeBoundingSphere","setSectionPlanes","fireEvent","setCutPlaneSet","showPlane","showSection","attachControl","control","checkNormal","api","navigation","getEyeVector","negate","setPlane","distance","obbox","group","Group","addOverlay","centerPlaneArrow","centerOffset","middle","boundingBox","localToWorld","getCenterPoint","n23","n31","n12","Matrix3","plane1","plane2","plane3","optionalTarget","det","determinant","crossVectors","oldsection3D","getObjectByName","oldsection2D","isActive","getSectionDistance","eyeVec","hit","rayIntersect","Ray","intersectPoint","setViewerSection","clearSection","planeSet","getCutPlaneSet","v4","setSection","connectivities","loadingBox","meshes","orthoPoint","nc","ct","cornerOffset","setBox","recomputePivot","setSectionFromPlane","cutplane","setActiveMode","pop","removeOverlay","isPlaneOn","resetSection","getNames","getName","register","deregister","removeEventListener","removeOverlayScene","CAMERA_CHANGE_EVENT","ISOLATE_EVENT","HIDE_EVENT","SHOW_EVENT","MODEL_TRANSFORM_CHANGED_EVENT","getPriority","activate","canvas","addEventListener","overlayScenes","createOverlayScene","deactivate","handleSingleClick","handleDoubleClick","handleSingleTap","handleDoubleTap","handleKeyDown","handleKeyUp","handleWheelInput","handleButtonDown","handleButtonUp","handleMouseMove","oldTransControlPos","boxOffset","includes","handleGesture","handleBlur","handleResize","handlePressHold","values","getSectionBoxValues","aabb","sectionBox","setPivotPoint","ignoreGlobalOffset","right","front","left","bttm","back","off","getData","globalOffset","sectionBoxTransform","identity","toArray","getSectionPlaneValues","sectionPlane","getSectionPlaneSet","getSectionPlanes","viewSet","notifyCutplanesChanged","numCutPlanesBefore","cpSets","getCutPlaneSets","cpName","cp","section","updateCapMaterials","setSectionBox","SceneMath","box2CutPlanes","setSectionPlane","enableRotationGizmo","planeVecs","SectionExtension","Extension","modes","onViewerSetView","_onCutPlanesChanged","_onShowAll","proto","load","tool","toolController","registerTool","sectionStyle","supportedStyles","SET_VIEW_EVENT","CUTPLANES_CHANGE_EVENT","SHOW_ALL_EVENT","HOTKEYS_ID","hotkeys","keycodes","KeyCode","ESCAPE","onRelease","getAggregateSelection","getHotkeyManager","pushHotkeys","registerContextMenuCallback","menu","status","hasSelected","selector","getSelectionBounds","menuEntry","title","From","Type","Action","aggregateSelection","selected","selectionObject","selection","flat","modelIds","hitTest","getRenderProxy","normalMatrix","getNormalMatrix","applyMatrix3","onContextMenu","loadExtension","unload","unregisterContextMenuCallback","popHotkeys","destroyUI","deregisterTool","toggle","enableSectionTool","setSectionStyle","getSectionStyle","preserveSection","bActive","bNewStyle","prevLock","setIsLocked","enable","activateTool","sectionToolButton","setState","UI","Button","State","ACTIVE","deactivateTool","INACTIVE","getViewValues","boxValues","planeValues","getState","viewerState","restoreState","immediate","activeStatus","clearSelection","onToolbarCreated","toolbar","AVU","ComboButton","setToolTip","setIcon","createSubmenu","modelTools","getControl","TOOLBAR","MODELTOOLSID","resetTool","addControl","getId","parentButton","createNavToggler","state","sectionType","toLowerCase","isMobileDevice","updateSectionButtons","areVectorsEqual","sqtol","lengthSq","unitx","unity","unitz","autocam","getWorldRightVector","up","getWorldUpVector","getWorldFrontVector","tol","sectionYButton","sectionXButton","sectionZButton","onClick","sectionBoxButton","MODEL_ADDED_EVENT","once","removeFromParent","theExtensionManager","registerExtension","location","baseUrl","protocol","host","currentDir","pathname","fullMatch","origUrl","newUrl","unquotedOrigUrl","trim","$1"],"mappings":"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","file":"Section/Section.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 585);\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","/* globals __webpack_amd_options__ */\nmodule.exports = __webpack_amd_options__;\n","\nvar content = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/dist/cjs.js!./Section.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/dist/cjs.js!./Section.css\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/dist/cjs.js!./Section.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".sectionPanel{line-height:14px;text-align:left;z-index:10}.section-horizontal-divider{height:1px;border-top:1px solid rgba(200,200,200,0.8)}.section-submenu-select{display:block;position:relative;width:calc(100% - 40px);padding:10px 20px 0px 20px;opacity:0.3}.section-panel:hover .section-submenu-select{opacity:0.8}.section-submenu-selectlabel{position:relative;display:inline-block;padding-right:20px;padding-bottom:4px}.section-restart{margin:10px 20px 15px 20px;padding:6px 10px 6px 10px;width:calc(100% - 55px);cursor:pointer}.docking-panel:hover .section-restart{background-color:rgba(255,255,255,0.12)}.docking-panel .section-restart:hover{background-color:rgba(166,194,255,0.7);-webkit-transition:all 0.2s ease;-moz-transition:all 0.2s ease;-ms-transition:all 0.2s ease;-o-transition:all 0.2s ease;transition:all 0.2s ease}\\n\", \"\"]);\n\n// exports\n","/**\n * @license\n * Lodash (Custom Build) lodash.com/license | Underscore.js 1.8.3 underscorejs.org/LICENSE\n * Build: `lodash include=\"debounce\" exports=\"amd\"`\n */\n;(function(){function t(){}function e(t){var e=typeof t;return null!=t&&(\"object\"==e||\"function\"==e)}function n(t){return null!=t&&typeof t==\"object\"}function r(t){var e;if(!(e=typeof t==\"symbol\")&&(e=n(t))){if(null==t)t=t===o?\"[object Undefined]\":\"[object Null]\";else if(j&&j in Object(t)){e=y.call(t,j);var r=t[j];try{t[j]=o;var i=true}catch(t){}var f=m.call(t);i&&(e?t[j]=r:delete t[j]),t=f}else t=m.call(t);e=\"[object Symbol]\"==t}return e}function i(t){if(typeof t==\"number\")return t;if(r(t))return f;\nif(e(t)&&(t=typeof t.valueOf==\"function\"?t.valueOf():t,t=e(t)?t+\"\":t),typeof t!=\"string\")return 0===t?t:+t;t=t.replace(u,\"\");var n=a.test(t);return n||l.test(t)?b(t.slice(2),n?2:8):c.test(t)?f:+t}var o,f=NaN,u=/^\\s+|\\s+$/g,c=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,l=/^0o[0-7]+$/i,b=parseInt,s=typeof self==\"object\"&&self&&self.Object===Object&&self,p=typeof global==\"object\"&&global&&global.Object===Object&&global||s||Function(\"return this\")(),s=Object.prototype,y=s.hasOwnProperty,m=s.toString,j=(s=p.Symbol)?s.toStringTag:o,v=Math.max,d=Math.min,g=function(){\nreturn p.Date.now()};t.debounce=function(t,n,r){function f(e){var n=b,r=s;return b=s=o,O=e,y=t.apply(r,n)}function u(t){var e=t-j;return t-=O,j===o||e>=n||0>e||T&&t>=p}function c(){var t=g();if(u(t))return a(t);var e,r=setTimeout;e=t-O,t=n-(t-j),e=T?d(t,p-e):t,m=r(c,e)}function a(t){return m=o,S&&b?f(t):(b=s=o,y)}function l(){var t=g(),e=u(t);if(b=arguments,s=this,j=t,e){if(m===o)return O=t=j,m=setTimeout(c,n),h?f(t):y;if(T)return m=setTimeout(c,n),f(j)}return m===o&&(m=setTimeout(c,n)),y}var b,s,p,y,m,j,O=0,h=false,T=false,S=true;\nif(typeof t!=\"function\")throw new TypeError(\"Expected a function\");return n=i(n)||0,e(r)&&(h=!!r.leading,p=(T=\"maxWait\"in r)?v(i(r.maxWait)||0,n):p,S=\"trailing\"in r?!!r.trailing:S),l.cancel=function(){m!==o&&clearTimeout(m),O=0,b=j=s=m=o},l.flush=function(){return m===o?y:a(g())},l},t.isObject=e,t.isObjectLike=n,t.isSymbol=r,t.now=g,t.toNumber=i,t.VERSION=\"4.17.5\",typeof define==\"function\"&&typeof define.amd==\"object\"&&define.amd&& define(function(){return t})}).call(this);","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target, parent) {\n  if (parent){\n    return parent.querySelector(target);\n  }\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target, parent) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target, parent);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertAt.before, target);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\n\tif(options.attrs.nonce === undefined) {\n\t\tvar nonce = getNonce();\n\t\tif (nonce) {\n\t\t\toptions.attrs.nonce = nonce;\n\t\t}\n\t}\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction getNonce() {\n\tif (typeof __webpack_nonce__ === 'undefined') {\n\t\treturn null;\n\t}\n\n\treturn __webpack_nonce__;\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = typeof options.transform === 'function'\n\t\t ? options.transform(obj.css) \n\t\t : options.transform.default(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","/**\n * @author arodic / https://github.com/arodic\n *\n * @author chiena -- Modified for Autodesk LMV web viewer\n */\n /*jshint sub:true*/\n\nexport function init_TransformGizmos() {\n\n    'use strict';\n\n    var GizmoMaterial = function ( parameters ) {\n\n        THREE.MeshBasicMaterial.call( this );\n\n        this.depthTest = false;\n        this.depthWrite = false;\n        this.side = THREE.FrontSide;\n        this.transparent = true;\n\n        this.setValues( parameters );\n\n        this.oldColor = this.color.clone();\n        this.oldOpacity = this.opacity;\n\n        this.highlight = function( highlighted ) {\n\n            if ( highlighted ) {\n\n                this.color.setRGB( 1, 230/255, 3/255 );\n                this.opacity = 1;\n\n            } else {\n\n                this.color.copy( this.oldColor );\n                this.opacity = this.oldOpacity;\n\n            }\n\n        };\n\n    };\n\n    GizmoMaterial.prototype = Object.create( THREE.MeshBasicMaterial.prototype );\n\n    var GizmoLineMaterial = function ( parameters ) {\n\n        THREE.LineBasicMaterial.call( this );\n\n        this.depthTest = false;\n        this.depthWrite = false;\n        this.transparent = true;\n        this.linewidth = 1;\n\n        this.setValues( parameters );\n\n        this.oldColor = this.color.clone();\n        this.oldOpacity = this.opacity;\n\n        this.highlight = function( highlighted ) {\n\n            if ( highlighted ) {\n\n                this.color.setRGB( 1, 230/255, 3/255 );\n                this.opacity = 1;\n\n            } else {\n\n                this.color.copy( this.oldColor );\n                this.opacity = this.oldOpacity;\n\n            }\n\n        };\n\n    };\n\n    GizmoLineMaterial.prototype = Object.create( THREE.LineBasicMaterial.prototype );\n\n    // polyfill\n    if (THREE.PolyhedronGeometry === undefined) {\n        THREE.PolyhedronGeometry = function ( vertices, indices, radius, detail ) {\n\n            THREE.Geometry.call( this );\n\n            this.type = 'PolyhedronGeometry';\n\n            this.parameters = {\n                vertices: vertices,\n                indices: indices,\n                radius: radius,\n                detail: detail\n            };\n\n            radius = radius || 1;\n            detail = detail || 0;\n\n            var that = this;\n\n            for ( var i = 0, l = vertices.length; i < l; i += 3 ) {\n\n                prepare( new THREE.Vector3( vertices[ i ], vertices[ i + 1 ], vertices[ i + 2 ] ) );\n\n            }\n\n            var midpoints = [], p = this.vertices;\n\n            var faces = [];\n\n            for ( var i = 0, j = 0, l = indices.length; i < l; i += 3, j ++ ) {\n\n                var v1 = p[ indices[ i     ] ];\n                var v2 = p[ indices[ i + 1 ] ];\n                var v3 = p[ indices[ i + 2 ] ];\n\n                faces[ j ] = new THREE.Face3( v1.index, v2.index, v3.index, [ v1.clone(), v2.clone(), v3.clone() ] );\n\n            }\n\n            var centroid = new THREE.Vector3();\n\n            for ( var i = 0, l = faces.length; i < l; i ++ ) {\n\n                subdivide( faces[ i ], detail );\n\n            }\n\n\n            // Handle case when face straddles the seam\n\n            for ( var i = 0, l = this.faceVertexUvs[ 0 ].length; i < l; i ++ ) {\n\n                var uvs = this.faceVertexUvs[ 0 ][ i ];\n\n                var x0 = uvs[ 0 ].x;\n                var x1 = uvs[ 1 ].x;\n                var x2 = uvs[ 2 ].x;\n\n                var max = Math.max( x0, Math.max( x1, x2 ) );\n                var min = Math.min( x0, Math.min( x1, x2 ) );\n\n                if ( max > 0.9 && min < 0.1 ) { // 0.9 is somewhat arbitrary\n\n                    if ( x0 < 0.2 ) uvs[ 0 ].x += 1;\n                    if ( x1 < 0.2 ) uvs[ 1 ].x += 1;\n                    if ( x2 < 0.2 ) uvs[ 2 ].x += 1;\n\n                }\n\n            }\n\n\n            // Apply radius\n\n            for ( var i = 0, l = this.vertices.length; i < l; i ++ ) {\n\n                this.vertices[ i ].multiplyScalar( radius );\n\n            }\n\n\n            // Merge vertices\n\n            this.mergeVertices();\n\n            this.computeFaceNormals();\n\n            this.boundingSphere = new THREE.Sphere( new THREE.Vector3(), radius );\n\n\n            // Project vector onto sphere's surface\n\n            function prepare( vector ) {\n\n                var vertex = vector.normalize().clone();\n                vertex.index = that.vertices.push( vertex ) - 1;\n\n                // Texture coords are equivalent to map coords, calculate angle and convert to fraction of a circle.\n\n                var u = azimuth( vector ) / 2 / Math.PI + 0.5;\n                var v = inclination( vector ) / Math.PI + 0.5;\n                vertex.uv = new THREE.Vector2( u, 1 - v );\n\n                return vertex;\n\n            }\n\n\n            // Approximate a curved face with recursively sub-divided triangles.\n\n            function make( v1, v2, v3 ) {\n\n                var face = new THREE.Face3( v1.index, v2.index, v3.index, [ v1.clone(), v2.clone(), v3.clone() ] );\n                that.faces.push( face );\n\n                centroid.copy( v1 ).add( v2 ).add( v3 ).divideScalar( 3 );\n\n                var azi = azimuth( centroid );\n\n                that.faceVertexUvs[ 0 ].push( [\n                    correctUV( v1.uv, v1, azi ),\n                    correctUV( v2.uv, v2, azi ),\n                    correctUV( v3.uv, v3, azi )\n                ] );\n\n            }\n\n\n            // Analytically subdivide a face to the required detail level.\n\n            function subdivide( face, detail ) {\n\n                var cols = Math.pow(2, detail);\n                var cells = Math.pow(4, detail);\n                var a = prepare( that.vertices[ face.a ] );\n                var b = prepare( that.vertices[ face.b ] );\n                var c = prepare( that.vertices[ face.c ] );\n                var v = [];\n\n                // Construct all of the vertices for this subdivision.\n\n                for ( var i = 0 ; i <= cols; i ++ ) {\n\n                    v[ i ] = [];\n\n                    var aj = prepare( a.clone().lerp( c, i / cols ) );\n                    var bj = prepare( b.clone().lerp( c, i / cols ) );\n                    var rows = cols - i;\n\n                    for ( var j = 0; j <= rows; j ++) {\n\n                        if ( j == 0 && i == cols ) {\n\n                            v[ i ][ j ] = aj;\n\n                        } else {\n\n                            v[ i ][ j ] = prepare( aj.clone().lerp( bj, j / rows ) );\n\n                        }\n\n                    }\n\n                }\n\n                // Construct all of the faces.\n\n                for ( var i = 0; i < cols ; i ++ ) {\n\n                    for ( var j = 0; j < 2 * (cols - i) - 1; j ++ ) {\n\n                        var k = Math.floor( j / 2 );\n\n                        if ( j % 2 == 0 ) {\n\n                            make(\n                                v[ i ][ k + 1],\n                                v[ i + 1 ][ k ],\n                                v[ i ][ k ]\n                            );\n\n                        } else {\n\n                            make(\n                                v[ i ][ k + 1 ],\n                                v[ i + 1][ k + 1],\n                                v[ i + 1 ][ k ]\n                            );\n\n                        }\n\n                    }\n\n                }\n\n            }\n\n\n            // Angle around the Y axis, counter-clockwise when looking from above.\n\n            function azimuth( vector ) {\n\n                return Math.atan2( vector.z, - vector.x );\n\n            }\n\n\n            // Angle above the XZ plane.\n\n            function inclination( vector ) {\n\n                return Math.atan2( - vector.y, Math.sqrt( ( vector.x * vector.x ) + ( vector.z * vector.z ) ) );\n\n            }\n\n\n            // Texture fixing helper. Spheres have some odd behaviours.\n\n            function correctUV( uv, vector, azimuth ) {\n\n                if ( ( azimuth < 0 ) && ( uv.x === 1 ) ) uv = new THREE.Vector2( uv.x - 1, uv.y );\n                if ( ( vector.x === 0 ) && ( vector.z === 0 ) ) uv = new THREE.Vector2( azimuth / 2 / Math.PI + 0.5, uv.y );\n                return uv.clone();\n\n            }\n\n        };\n\n        THREE.PolyhedronGeometry.prototype = Object.create( THREE.Geometry.prototype );\n    }\n\n    // polyfill\n    if (THREE.OctahedronGeometry === undefined) {\n        THREE.OctahedronGeometry = function ( radius, detail ) {\n\n            this.parameters = {\n                radius: radius,\n                detail: detail\n            };\n\n            var vertices = [\n                1, 0, 0,   - 1, 0, 0,    0, 1, 0,    0,- 1, 0,    0, 0, 1,    0, 0,- 1\n            ];\n\n            var indices = [\n                0, 2, 4,    0, 4, 3,    0, 3, 5,    0, 5, 2,    1, 2, 5,    1, 5, 3,    1, 3, 4,    1, 4, 2\n            ];\n\n            THREE.PolyhedronGeometry.call( this, vertices, indices, radius, detail );\n\n            this.type = 'OctahedronGeometry';\n\n            this.parameters = {\n                radius: radius,\n                detail: detail\n            };\n        };\n\n        THREE.OctahedronGeometry.prototype = Object.create( THREE.Geometry.prototype );\n    }\n\n    // polyfill\n    if (THREE.TorusGeometry === undefined) {\n        THREE.TorusGeometry = function ( radius, tube, radialSegments, tubularSegments, arc ) {\n\n            THREE.Geometry.call( this );\n\n            this.type = 'TorusGeometry';\n\n            this.parameters = {\n                radius: radius,\n                tube: tube,\n                radialSegments: radialSegments,\n                tubularSegments: tubularSegments,\n                arc: arc\n            };\n\n            radius = radius || 100;\n            tube = tube || 40;\n            radialSegments = radialSegments || 8;\n            tubularSegments = tubularSegments || 6;\n            arc = arc || Math.PI * 2;\n\n            var center = new THREE.Vector3(), uvs = [], normals = [];\n\n            for ( var j = 0; j <= radialSegments; j ++ ) {\n\n                for ( var i = 0; i <= tubularSegments; i ++ ) {\n\n                    var u = i / tubularSegments * arc;\n                    var v = j / radialSegments * Math.PI * 2;\n\n                    center.x = radius * Math.cos( u );\n                    center.y = radius * Math.sin( u );\n\n                    var vertex = new THREE.Vector3();\n                    vertex.x = ( radius + tube * Math.cos( v ) ) * Math.cos( u );\n                    vertex.y = ( radius + tube * Math.cos( v ) ) * Math.sin( u );\n                    vertex.z = tube * Math.sin( v );\n\n                    this.vertices.push( vertex );\n\n                    uvs.push( new THREE.Vector2( i / tubularSegments, j / radialSegments ) );\n                    normals.push( vertex.clone().sub( center ).normalize() );\n\n                }\n\n            }\n\n            for ( var j = 1; j <= radialSegments; j ++ ) {\n\n                for ( var i = 1; i <= tubularSegments; i ++ ) {\n\n                    var a = ( tubularSegments + 1 ) * j + i - 1;\n                    var b = ( tubularSegments + 1 ) * ( j - 1 ) + i - 1;\n                    var c = ( tubularSegments + 1 ) * ( j - 1 ) + i;\n                    var d = ( tubularSegments + 1 ) * j + i;\n\n                    var face = new THREE.Face3( a, b, d, [ normals[ a ].clone(), normals[ b ].clone(), normals[ d ].clone() ] );\n                    this.faces.push( face );\n                    this.faceVertexUvs[ 0 ].push( [ uvs[ a ].clone(), uvs[ b ].clone(), uvs[ d ].clone() ] );\n\n                    face = new THREE.Face3( b, c, d, [ normals[ b ].clone(), normals[ c ].clone(), normals[ d ].clone() ] );\n                    this.faces.push( face );\n                    this.faceVertexUvs[ 0 ].push( [ uvs[ b ].clone(), uvs[ c ].clone(), uvs[ d ].clone() ] );\n\n                }\n\n            }\n\n            this.computeFaceNormals();\n\n        };\n\n        THREE.TorusGeometry.prototype = Object.create( THREE.Geometry.prototype );\n    }\n\n    var createCircleGeometry = function ( radius, facing, arc ) {\n\n        var geometry = new THREE.Geometry();\n        arc = arc ? arc : 1;\n        for ( var i = 0; i <= 64 * arc; ++i ) {\n            if ( facing == 'x' ) geometry.vertices.push( new THREE.Vector3( 0, Math.cos( i / 32 * Math.PI ), Math.sin( i / 32 * Math.PI ) ).multiplyScalar(radius) );\n            if ( facing == 'y' ) geometry.vertices.push( new THREE.Vector3( Math.cos( i / 32 * Math.PI ), 0, Math.sin( i / 32 * Math.PI ) ).multiplyScalar(radius) );\n            if ( facing == 'z' ) geometry.vertices.push( new THREE.Vector3( Math.sin( i / 32 * Math.PI ), Math.cos( i / 32 * Math.PI ), 0 ).multiplyScalar(radius) );\n        }\n\n        return geometry;\n    };\n\n    var createArrowGeometry = function ( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded ) {\n\n        var arrowGeometry = new THREE.Geometry();\n        var mesh = new THREE.Mesh( new THREE.CylinderGeometry( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded ) );\n        mesh.position.y = 0.5;\n        mesh.updateMatrix();\n\n        arrowGeometry.merge( mesh.geometry, mesh.matrix );\n\n        return arrowGeometry;\n    };\n\n    var createLineGeometry = function ( axis ) {\n\n        var lineGeometry = new THREE.Geometry();\n        if ( axis === 'X') \n            lineGeometry.vertices.push( new THREE.Vector3( 0, 0, 0 ), new THREE.Vector3( 1, 0, 0 ) );\n        else if ( axis === 'Y' ) \n            lineGeometry.vertices.push( new THREE.Vector3( 0, 0, 0 ), new THREE.Vector3( 0, 1, 0 ) );\n        else if ( axis === 'Z' )\n            lineGeometry.vertices.push( new THREE.Vector3( 0, 0, 0 ), new THREE.Vector3( 0, 0, 1 ) );\n\n        return lineGeometry;\n    };\n\n    THREE.TransformGizmo = function () {\n\n        var scope = this;\n        var showPickers = false; //debug\n        var showActivePlane = false; //debug\n\n        this.init = function () {\n\n            THREE.Object3D.call( this );\n\n            this.handles = new THREE.Object3D();\n            this.pickers = new THREE.Object3D();\n            this.planes = new THREE.Object3D();\n            this.highlights = new THREE.Object3D();\n            this.hemiPicker = new THREE.Object3D();\n            this.subPickers = new THREE.Object3D();\n\n            this.add(this.handles);\n            this.add(this.pickers);\n            this.add(this.planes);\n            this.add(this.highlights);\n            this.add(this.hemiPicker);\n            this.add(this.subPickers);\n\n            //// PLANES\n\n            var planeGeometry = new THREE.PlaneBufferGeometry( 50, 50, 2, 2 );\n            var planeMaterial = new THREE.MeshBasicMaterial( { wireframe: true } );\n            planeMaterial.side = THREE.DoubleSide;\n\n            var planes = {\n                \"XY\":   new THREE.Mesh( planeGeometry, planeMaterial ),\n                \"YZ\":   new THREE.Mesh( planeGeometry, planeMaterial ),\n                \"XZ\":   new THREE.Mesh( planeGeometry, planeMaterial ),\n                \"XYZE\": new THREE.Mesh( planeGeometry, planeMaterial )\n            };\n\n            this.activePlane = planes[\"XYZE\"];\n\n            planes[\"YZ\"].rotation.set( 0, Math.PI/2, 0 );\n            planes[\"XZ\"].rotation.set( -Math.PI/2, 0, 0 );\n\n            for (var i in planes) {\n                planes[i].name = i;\n                this.planes.add(planes[i]);\n                this.planes[i] = planes[i];\n                planes[i].visible = false;\n            }\n\n            this.setupGizmos();\n            this.activeMode = \"\";\n\n            // reset Transformations\n\n            this.traverse(function ( child ) {\n                if (child instanceof THREE.Mesh) {\n                    child.updateMatrix();\n\n                    var tempGeometry = new THREE.Geometry();\n                    if (child.geometry instanceof THREE.BufferGeometry) {\n                        child.geometry = new THREE.Geometry().fromBufferGeometry( child.geometry );\n                    }\n                    tempGeometry.merge( child.geometry, child.matrix );\n\n                    child.geometry = tempGeometry;\n                    child.position.set( 0, 0, 0 );\n                    child.rotation.set( 0, 0, 0 );\n                    child.scale.set( 1, 1, 1 );\n                }\n            });\n\n        };\n\n        this.hide = function () {\n            this.traverse(function( child ) {\n                child.visible = false;\n            });\n        };\n\n        this.show = function () {\n            this.traverse(function( child ) {\n                child.visible = true;\n                if (child.parent == scope.pickers || child.parent == scope.hemiPicker ) child.visible = showPickers;\n                if (child.parent == scope.planes ) child.visible = false;\n            });\n            this.activePlane.visible = showActivePlane;\n        };\n\n        this.highlight = function ( axis ) {\n            this.traverse(function( child ) {\n                if ( child.material && child.material.highlight ) {\n                    if ( child.name == axis ) {\n                        child.material.highlight( true );\n                    } else {\n                        child.material.highlight( false );\n                    }\n                }\n            });\n        };\n\n        this.setupGizmos = function () {\n\n            var addGizmos = function( gizmoMap, parent ) {\n\n                for ( var name in gizmoMap ) {\n\n                    for ( var i = gizmoMap[name].length; i--;) {\n\n                        var object = gizmoMap[name][i][0];\n                        var position = gizmoMap[name][i][1];\n                        var rotation = gizmoMap[name][i][2];\n                        var visble = gizmoMap[name][i][3];\n\n                        object.name = name;\n\n                        if ( position ) object.position.set( position[0], position[1], position[2] );\n                        if ( rotation ) object.rotation.set( rotation[0], rotation[1], rotation[2] );\n                        if ( visble ) object.visble = visble;\n\n                        parent.add( object );\n\n                    }\n\n                }\n\n            };\n\n            this.setHandlePickerGizmos();\n\n            addGizmos(this.handleGizmos, this.handles);\n            addGizmos(this.pickerGizmos, this.pickers);\n            addGizmos(this.highlightGizmos, this.highlights);\n            addGizmos(this.hemiPickerGizmos, this.hemiPicker);\n            addGizmos(this.subPickerGizmos, this.subPickers);\n\n            this.hide();\n            this.show();\n\n        };\n\n    };\n\n    THREE.TransformGizmo.prototype = Object.create( THREE.Object3D.prototype );\n\n    THREE.TransformGizmo.prototype.update = function ( rotation, eye ) {\n\n        var vec1 = new THREE.Vector3( 0, 0, 0 );\n        var vec2 = new THREE.Vector3( 0, 1, 0 );\n        var lookAtMatrix = new THREE.Matrix4();\n\n        this.traverse(function(child) {\n            if ( child.name ) {\n                if ( child.name.search(\"E\") != -1 ) {\n                    child.quaternion.setFromRotationMatrix( lookAtMatrix.lookAt( eye, vec1, vec2 ) );\n                } else if ( child.name.search(\"X\") != -1 || child.name.search(\"Y\") != -1 || child.name.search(\"Z\") != -1 ) {\n                    child.quaternion.setFromEuler( rotation );\n                }\n            }\n        });\n\n    };\n\n    THREE.TransformGizmoTranslate = function () {\n\n        THREE.TransformGizmo.call( this );\n\n        this.setHandlePickerGizmos = function () {\n\n            var arrowGeometry = createArrowGeometry( 0, 0.05, 0.2, 12, 1, false );\n            var lineXGeometry = createLineGeometry( 'X' );\n            var lineYGeometry = createLineGeometry( 'Y' );\n            var lineZGeometry = createLineGeometry( 'Z' );\n\n            this.handleGizmos = {\n                X: [\n                    [ new THREE.Mesh( arrowGeometry, new GizmoMaterial( { color: 0xf12c2c } ) ), [ 0.5, 0, 0 ], [ 0, 0, -Math.PI/2 ] ],\n                    [ new THREE.Line( lineXGeometry, new GizmoLineMaterial( { color: 0xf12c2c } ) ) ]\n                ],\n                Y: [\n                    [ new THREE.Mesh( arrowGeometry, new GizmoMaterial( { color: 0x0bb80b } ) ), [ 0, 0.5, 0 ] ],\n                    [   new THREE.Line( lineYGeometry, new GizmoLineMaterial( { color: 0x0bb80b } ) ) ]\n                ],\n                Z: [\n                    [ new THREE.Mesh( arrowGeometry, new GizmoMaterial( { color: 0x2c2cf1 } ) ), [ 0, 0, 0.5 ], [ Math.PI/2, 0, 0 ] ],\n                    [ new THREE.Line( lineZGeometry, new GizmoLineMaterial( { color: 0x2c2cf1 } ) ) ]\n                ],\n                XYZ: [\n                    [ new THREE.Mesh( new THREE.OctahedronGeometry( 0.1, 0 ), new GizmoMaterial( { color: 0xffffff, opacity: 0.25 } ) ), [ 0, 0, 0 ], [ 0, 0, 0 ] ]\n                ],\n                XY: [\n                    [ new THREE.Mesh( new THREE.PlaneBufferGeometry( 0.29, 0.29 ), new GizmoMaterial( { color: 0xffff00, opacity: 0.25 } ) ), [ 0.15, 0.15, 0 ] ]\n                ],\n                YZ: [\n                    [ new THREE.Mesh( new THREE.PlaneBufferGeometry( 0.29, 0.29 ), new GizmoMaterial( { color: 0x00ffff, opacity: 0.25 } ) ), [ 0, 0.15, 0.15 ], [ 0, Math.PI/2, 0 ] ]\n                ],\n                XZ: [\n                    [ new THREE.Mesh( new THREE.PlaneBufferGeometry( 0.29, 0.29 ), new GizmoMaterial( { color: 0xff00ff, opacity: 0.25 } ) ), [ 0.15, 0, 0.15 ], [ -Math.PI/2, 0, 0 ] ]\n                ]\n            };\n\n            this.pickerGizmos = {\n                X: [\n                    [ new THREE.Mesh( new THREE.CylinderGeometry( 0.2, 0, 1, 4, 1, false ), new GizmoMaterial( { color: 0xff0000, opacity: 0.25 } ) ), [ 0.6, 0, 0 ], [ 0, 0, -Math.PI/2 ] ]\n                ],\n                Y: [\n                    [ new THREE.Mesh( new THREE.CylinderGeometry( 0.2, 0, 1, 4, 1, false ), new GizmoMaterial( { color: 0x00ff00, opacity: 0.25 } ) ), [ 0, 0.6, 0 ] ]\n                ],\n                Z: [\n                    [ new THREE.Mesh( new THREE.CylinderGeometry( 0.2, 0, 1, 4, 1, false ), new GizmoMaterial( { color: 0x0000ff, opacity: 0.25 } ) ), [ 0, 0, 0.6 ], [ Math.PI/2, 0, 0 ] ]\n                ],\n                XYZ: [\n                    [ new THREE.Mesh( new THREE.OctahedronGeometry( 0.2, 0 ), new GizmoMaterial( { color: 0xffffff, opacity: 0.25 } ) ) ]\n                ],\n                XY: [\n                    [ new THREE.Mesh( new THREE.PlaneBufferGeometry( 0.4, 0.4 ), new GizmoMaterial( { color: 0xffff00, opacity: 0.25 } ) ), [ 0.2, 0.2, 0 ] ]\n                ],\n                YZ: [\n                    [ new THREE.Mesh( new THREE.PlaneBufferGeometry( 0.4, 0.4 ), new GizmoMaterial( { color: 0x00ffff, opacity: 0.25 } ) ), [ 0, 0.2, 0.2 ], [ 0, Math.PI/2, 0 ] ]\n                ],\n                XZ: [\n                    [ new THREE.Mesh( new THREE.PlaneBufferGeometry( 0.4, 0.4 ), new GizmoMaterial( { color: 0xff00ff, opacity: 0.25 } ) ), [ 0.2, 0, 0.2 ], [ -Math.PI/2, 0, 0 ] ]\n                ]\n            };\n\n            this.hemiPickerGizmos = {\n                XYZ: [\n                    [ new THREE.Mesh( new THREE.BoxGeometry( 1.2, 1.2, 1.2 ), new GizmoMaterial( { color: 0x0000ff } ) ), [ 0.5, 0.5, 0.5 ], null, false ]\n                ]\n            };\n\n        };\n\n        this.setActivePlane = function ( axis, eye ) {\n\n            var tempMatrix = new THREE.Matrix4();\n            eye.applyMatrix4( tempMatrix.getInverse( tempMatrix.extractRotation( this.planes[ \"XY\" ].matrixWorld ) ) );\n\n            if ( axis == \"X\" ) {\n                this.activePlane = this.planes[ \"XY\" ];\n                if ( Math.abs(eye.y) > Math.abs(eye.z) ) this.activePlane = this.planes[ \"XZ\" ];\n            }\n\n            if ( axis == \"Y\" ){\n                this.activePlane = this.planes[ \"XY\" ];\n                if ( Math.abs(eye.x) > Math.abs(eye.z) ) this.activePlane = this.planes[ \"YZ\" ];\n            }\n\n            if ( axis == \"Z\" ){\n                this.activePlane = this.planes[ \"XZ\" ];\n                if ( Math.abs(eye.x) > Math.abs(eye.y) ) this.activePlane = this.planes[ \"YZ\" ];\n            }\n\n            if ( axis == \"XYZ\" ) this.activePlane = this.planes[ \"XYZE\" ];\n\n            if ( axis == \"XY\" ) this.activePlane = this.planes[ \"XY\" ];\n\n            if ( axis == \"YZ\" ) this.activePlane = this.planes[ \"YZ\" ];\n\n            if ( axis == \"XZ\" ) this.activePlane = this.planes[ \"XZ\" ];\n\n            this.hide();\n            this.show();\n\n        };\n\n        this.init();\n\n    };\n\n    THREE.TransformGizmoTranslate.prototype = Object.create( THREE.TransformGizmo.prototype );\n\n    THREE.TransformGizmoRotate = function () {\n\n        THREE.TransformGizmo.call( this );\n\n        this.setHandlePickerGizmos = function () {\n\n            this.handleGizmos = {\n                RX: [\n                    [ new THREE.Line( createCircleGeometry(1,'x',0.5), new GizmoLineMaterial( { color: 0xff0000 } ) ) ]\n                ],\n                RY: [\n                    [ new THREE.Line( createCircleGeometry(1,'y',0.5), new GizmoLineMaterial( { color: 0x00ff00 } ) ) ]\n                ],\n                RZ: [\n                    [ new THREE.Line( createCircleGeometry(1,'z',0.5), new GizmoLineMaterial( { color: 0x0000ff } ) ) ]\n                ],\n                RE: [\n                    [ new THREE.Line( createCircleGeometry(1.25,'z',1), new GizmoLineMaterial( { color: 0x00ffff } ) ) ]\n                ],\n                RXYZE: [\n                    [ new THREE.Line( createCircleGeometry(1,'z',1), new GizmoLineMaterial( { color: 0xff00ff } ) ) ]\n                ]\n            };\n\n            this.pickerGizmos = {\n                RX: [\n                    [ new THREE.Mesh( new THREE.TorusGeometry( 1, 0.12, 4, 12, Math.PI ), new GizmoMaterial( { color: 0xff0000, opacity: 0.25 } ) ), [ 0, 0, 0 ], [ 0, -Math.PI/2, -Math.PI/2 ] ]\n                ],\n                RY: [\n                    [ new THREE.Mesh( new THREE.TorusGeometry( 1, 0.12, 4, 12, Math.PI ), new GizmoMaterial( { color: 0x00ff00, opacity: 0.25 } ) ), [ 0, 0, 0 ], [ Math.PI/2, 0, 0 ] ]\n                ],\n                RZ: [\n                    [ new THREE.Mesh( new THREE.TorusGeometry( 1, 0.12, 4, 12, Math.PI ), new GizmoMaterial( { color: 0x0000ff, opacity: 0.25 } ) ), [ 0, 0, 0 ], [ 0, 0, -Math.PI/2 ] ]\n                ],\n                RE: [\n                    [ new THREE.Mesh( new THREE.TorusGeometry( 1.25, 0.12, 2, 24 ), new GizmoMaterial( { color: 0x00ffff, opacity: 0.25 } ) ) ]\n                ],\n                RXYZE: [\n                    [ new THREE.Mesh( new THREE.TorusGeometry( 1, 0.12, 2, 24 ), new GizmoMaterial( { color: 0xff00ff, opacity: 0.25 } ) ) ]\n                ]\n            };\n\n        };\n\n        this.setActivePlane = function ( axis ) {\n\n            if ( axis == \"RE\" ) this.activePlane = this.planes[ \"XYZE\" ];\n\n            if ( axis == \"RX\" ) this.activePlane = this.planes[ \"YZ\" ];\n\n            if ( axis == \"RY\" ) this.activePlane = this.planes[ \"XZ\" ];\n\n            if ( axis == \"RZ\" ) this.activePlane = this.planes[ \"XY\" ];\n\n            this.hide();\n            this.show();\n\n        };\n\n        this.update = function ( rotation, eye2 ) {\n\n            THREE.TransformGizmo.prototype.update.apply( this, arguments );\n\n            var tempMatrix = new THREE.Matrix4();\n            var worldRotation = new THREE.Euler( 0, 0, 1 );\n            var tempQuaternion = new THREE.Quaternion();\n            var unitX = new THREE.Vector3( 1, 0, 0 );\n            var unitY = new THREE.Vector3( 0, 1, 0 );\n            var unitZ = new THREE.Vector3( 0, 0, 1 );\n            var quaternionX = new THREE.Quaternion();\n            var quaternionY = new THREE.Quaternion();\n            var quaternionZ = new THREE.Quaternion();\n            var eye = eye2.clone();\n\n            worldRotation.copy( this.planes[\"XY\"].rotation );\n            tempQuaternion.setFromEuler( worldRotation );\n\n            tempMatrix.makeRotationFromQuaternion( tempQuaternion ).getInverse( tempMatrix );\n            eye.applyMatrix4( tempMatrix );\n\n            this.traverse(function(child) {\n\n                tempQuaternion.setFromEuler( worldRotation );\n\n                if ( child.name == \"RX\" ) {\n                    quaternionX.setFromAxisAngle( unitX, Math.atan2( -eye.y, eye.z ) );\n                    tempQuaternion.multiplyQuaternions( tempQuaternion, quaternionX );\n                    child.quaternion.copy( tempQuaternion );\n                }\n\n                if ( child.name == \"RY\" ) {\n                    quaternionY.setFromAxisAngle( unitY, Math.atan2( eye.x, eye.z ) );\n                    tempQuaternion.multiplyQuaternions( tempQuaternion, quaternionY );\n                    child.quaternion.copy( tempQuaternion );\n                }\n\n                if ( child.name == \"RZ\" ) {\n                    quaternionZ.setFromAxisAngle( unitZ, Math.atan2( eye.y, eye.x ) );\n                    tempQuaternion.multiplyQuaternions( tempQuaternion, quaternionZ );\n                    child.quaternion.copy( tempQuaternion );\n                }\n\n            });\n\n        };\n\n        this.init();\n\n    };\n\n    THREE.TransformGizmoRotate.prototype = Object.create( THREE.TransformGizmo.prototype );\n\n    THREE.TransformGizmoTranslateRotate = function () {\n\n        THREE.TransformGizmo.call( this );\n\n        var scope = this;\n\n        this.setHandlePickerGizmos = function () {\n\n            var arrowGeometry = createArrowGeometry( 0, 0.05, 0.2, 12, 1, false );\n            var lineGeometry = new THREE.Geometry();\n            lineGeometry.vertices.push( new THREE.Vector3( 0, 0, -0.1 ), new THREE.Vector3( 0, 0, 0.1 ), new THREE.Vector3( -0.1, 0, 0 ), new THREE.Vector3( 0.1, 0, 0 ) );\n            var theta = 0.15;\n\n            this.handleGizmos = {\n                Z: [\n                    [ new THREE.Mesh( arrowGeometry, new GizmoMaterial( { color: 0xffffff } ) ), [ 0, 0, 0.25 ], [ Math.PI/2, 0, 0 ] ],\n                    [ new THREE.Mesh( new THREE.CylinderGeometry( 0.015, 0.015, 0.6, 4, 1, false ), new GizmoMaterial( { color: 0xffffff } ) ), [ 0, 0, 0.5 ],[ Math.PI/2, 0, 0 ] ]\n                ],\n                RX: [\n                    [ new THREE.Mesh( new THREE.TorusGeometry( 1, 0.015, 12, 60, theta * 2 * Math.PI ), new GizmoMaterial( { color: 0xff0000 } ) ), [ 0, 0, 0 ], [ theta * Math.PI, -Math.PI/2, 0 ] ],\n                    [ new THREE.Mesh( new THREE.CylinderGeometry( 0.05, 0.05, 0.015, 60, 1, false ), new GizmoMaterial( { color: 0xff0000 } ) ), [ 0, 0, 1 ], [ Math.PI/2, 0, 0 ] ]\n                ],\n                RY: [\n                    [ new THREE.Mesh( new THREE.TorusGeometry( 1, 0.015, 12, 60, theta * 2 * Math.PI ), new GizmoMaterial( { color: 0x0000ff } ) ), [ 0, 0, 0 ], [ Math.PI/2, 0, (0.5-theta)*Math.PI ] ],\n                    [ new THREE.Mesh( new THREE.CylinderGeometry( 0.05, 0.05, 0.01, 60, 1, false ), new GizmoMaterial( { color: 0x0000ff } ) ), [ 0, 0, 1 ] ]\n                ]\n            };\n\n            this.pickerGizmos = {\n                Z: [\n                    [ new THREE.Mesh( new THREE.CylinderGeometry( 0.12, 0.12, 0.65, 4, 1, false ), new GizmoMaterial( { color: 0x0000ff, opacity: 0.25 } ) ), [ 0, 0, 0.5 ], [ Math.PI/2, 0, 0 ] ]\n                ],\n                RX: [\n                    [ new THREE.Mesh( new THREE.TorusGeometry( 1, 0.12, 4, 12, theta * 2 * Math.PI ), new GizmoMaterial( { color: 0xff0000, opacity: 0.25 } ) ), [ 0, 0, 0 ], [ theta * Math.PI, -Math.PI/2, 0 ] ]\n                ],\n                RY: [\n                    [ new THREE.Mesh( new THREE.TorusGeometry( 1, 0.12, 4, 12, theta * 2 * Math.PI ), new GizmoMaterial( { color: 0x0000ff, opacity: 0.25 } ) ), [ 0, 0, 0 ], [ Math.PI/2, 0, (0.5-theta)*Math.PI ] ]\n                ]\n            };\n\n            this.subPickerGizmos = {\n                Z: [\n                    [ new THREE.Mesh( new THREE.CylinderGeometry( 0.12, 0.12, 0.65, 4, 1, false ), new GizmoMaterial( { color: 0x0000ff, opacity: 0.25 } ) ), [ 0, 0, 0.5 ], [ Math.PI/2, 0, 0 ] ]\n                ]\n            };\n\n            this.highlightGizmos = {\n                Z: [\n                ],\n                RX: [\n                    [ new THREE.Mesh( new THREE.TorusGeometry( 1, 0.02, 12, 60, 2 * Math.PI ), new GizmoMaterial( { color: 0xff0000, opacity: 1 } ) ), [ 0, 0, 0 ], [ 0, -Math.PI/2, -Math.PI/2 ], false ]\n                ],\n                RY: [\n                    [ new THREE.Mesh( new THREE.TorusGeometry( 1, 0.02, 12, 60, 2 * Math.PI ), new GizmoMaterial( { color: 0x0000ff, opacity: 1 } ) ), [ 0, 0, 0 ], [ Math.PI/2, 0, 0 ], false ]\n                ]\n            };\n\n            this.hemiPickerGizmos = {\n                XYZ: [\n                    [ new THREE.Mesh( new THREE.SphereGeometry( 1.2, 8, 8, 0, Math.PI ), new GizmoMaterial( { color: 0x0000ff } ) ), null, null, false ]\n                ]\n            };\n\n        };\n\n        this.setActivePlane = function ( axis, eye ) {\n\n            if ( this.activeMode == \"translate\" ) {\n\n                var tempMatrix = new THREE.Matrix4();\n                eye.applyMatrix4( tempMatrix.getInverse( tempMatrix.extractRotation( this.planes[ \"XY\" ].matrixWorld ) ) );\n\n                if ( axis == \"X\" ) {\n                    this.activePlane = this.planes[ \"XY\" ];\n                    if ( Math.abs(eye.y) > Math.abs(eye.z) ) this.activePlane = this.planes[ \"XZ\" ];\n                }\n\n                if ( axis == \"Y\" ){\n                    this.activePlane = this.planes[ \"XY\" ];\n                    if ( Math.abs(eye.x) > Math.abs(eye.z) ) this.activePlane = this.planes[ \"YZ\" ];\n                }\n\n                if ( axis == \"Z\" ){\n                    this.activePlane = this.planes[ \"XZ\" ];\n                    if ( Math.abs(eye.x) > Math.abs(eye.y) ) this.activePlane = this.planes[ \"YZ\" ];\n                }\n\n            } else if ( this.activeMode == \"rotate\" ){\n\n                if ( axis == \"RX\" ) this.activePlane = this.planes[ \"YZ\" ];\n\n                if ( axis == \"RY\" ) this.activePlane = this.planes[ \"XZ\" ];\n\n                if ( axis == \"RZ\" ) this.activePlane = this.planes[ \"XY\" ];\n\n            }\n\n            this.hide();\n            this.show();\n\n        };\n\n        this.update = function ( rotation, eye2 ) {\n\n            if ( this.activeMode == \"translate\" ) {\n\n                THREE.TransformGizmo.prototype.update.apply( this, arguments );\n\n            } else if ( this.activeMode == \"rotate\" ) {\n\n                THREE.TransformGizmo.prototype.update.apply( this, arguments );\n\n                var tempMatrix = new THREE.Matrix4();\n                var worldRotation = new THREE.Euler( 0, 0, 1 );\n                var tempQuaternion = new THREE.Quaternion();\n                var unitX = new THREE.Vector3( 1, 0, 0 );\n                var unitY = new THREE.Vector3( 0, 1, 0 );\n                var unitZ = new THREE.Vector3( 0, 0, 1 );\n                var quaternionX = new THREE.Quaternion();\n                var quaternionY = new THREE.Quaternion();\n                var quaternionZ = new THREE.Quaternion();\n                var eye = eye2.clone();\n\n                worldRotation.copy( this.planes[\"XY\"].rotation );\n                tempQuaternion.setFromEuler( worldRotation );\n\n                tempMatrix.makeRotationFromQuaternion( tempQuaternion ).getInverse( tempMatrix );\n                eye.applyMatrix4( tempMatrix );\n\n                this.traverse(function(child) {\n\n                    tempQuaternion.setFromEuler( worldRotation );\n\n                    if ( child.name == \"RX\" ) {\n                        quaternionX.setFromAxisAngle( unitX, Math.atan2( -eye.y, eye.z ) );\n                        tempQuaternion.multiplyQuaternions( tempQuaternion, quaternionX );\n                        child.quaternion.copy( tempQuaternion );\n                    }\n\n                    if ( child.name == \"RY\" ) {\n                        quaternionY.setFromAxisAngle( unitY, Math.atan2( eye.x, eye.z ) );\n                        tempQuaternion.multiplyQuaternions( tempQuaternion, quaternionY );\n                        child.quaternion.copy( tempQuaternion );\n                    }\n\n                    if ( child.name == \"RZ\" ) {\n                        quaternionZ.setFromAxisAngle( unitZ, Math.atan2( eye.y, eye.x ) );\n                        tempQuaternion.multiplyQuaternions( tempQuaternion, quaternionZ );\n                        child.quaternion.copy( tempQuaternion );\n                    }\n\n                });\n\n            }\n\n        };\n\n        this.show = function () {\n            this.traverse(function( child ) {\n                if ( scope.parent == null || (scope.parent.useAllPickers || child.parent != scope.handles) ) child.visible = true;\n                if ( child.material ) child.material.opacity = child.material.oldOpacity;\n                if ( child.parent == scope.pickers || child.parent == scope.hemiPicker || child.parent == scope.subPickers) child.visible = false;\n                if ( child.parent == scope.planes || child.parent == scope.highlights ) child.visible = false;\n            });\n            this.activePlane.visible = false;\n        };\n\n        this.highlight = function ( axis ) {\n            this.traverse(function( child ) {\n                if ( child.material && child.material.highlight ) {\n                    if ( child.name == axis ) {\n                        if ( child.parent == scope.highlights || child.parent == scope.handles ) child.visible = true;\n                        child.material.highlight( true );\n                    } else {\n                        child.material.highlight( false );\n                        child.material.opacity = 0.1;\n                    }\n                }\n            });\n        };\n\n        this.init();\n\n    };\n\n    THREE.TransformGizmoTranslateRotate.prototype = Object.create( THREE.TransformGizmo.prototype );\n\n    THREE.TransformGizmoScale = function () {\n\n        THREE.TransformGizmo.call( this );\n\n        this.setHandlePickerGizmos = function () {\n\n            var arrowGeometry = createArrowGeometry( 0.125, 0.125, 0.125 );\n            var lineXGeometry = createLineGeometry( 'X' );\n            var lineYGeometry = createLineGeometry( 'Y' );\n            var lineZGeometry = createLineGeometry( 'Z' );\n\n            this.handleGizmos = {\n                X: [\n                    [ new THREE.Mesh( arrowGeometry, new GizmoMaterial( { color: 0xff0000 } ) ), [ 0.5, 0, 0 ], [ 0, 0, -Math.PI/2 ] ],\n                    [ new THREE.Line( lineXGeometry, new GizmoLineMaterial( { color: 0xff0000 } ) ) ]\n                ],\n                Y: [\n                    [ new THREE.Mesh( arrowGeometry, new GizmoMaterial( { color: 0x00ff00 } ) ), [ 0, 0.5, 0 ] ],\n                    [ new THREE.Line( lineYGeometry, new GizmoLineMaterial( { color: 0x00ff00 } ) ) ]\n                ],\n                Z: [\n                    [ new THREE.Mesh( arrowGeometry, new GizmoMaterial( { color: 0x0000ff } ) ), [ 0, 0, 0.5 ], [ Math.PI/2, 0, 0 ] ],\n                    [ new THREE.Line( lineZGeometry, new GizmoLineMaterial( { color: 0x0000ff } ) ) ]\n                ],\n                XYZ: [\n                    [ new THREE.Mesh( new THREE.BoxGeometry( 0.125, 0.125, 0.125 ), new GizmoMaterial( { color: 0xffffff, opacity: 0.25 } ) ) ]\n                ]\n            };\n\n            this.pickerGizmos = {\n                X: [\n                    [ new THREE.Mesh( new THREE.CylinderGeometry( 0.2, 0, 1, 4, 1, false ), new GizmoMaterial( { color: 0xff0000, opacity: 0.25 } ) ), [ 0.6, 0, 0 ], [ 0, 0, -Math.PI/2 ] ]\n                ],\n                Y: [\n                    [ new THREE.Mesh( new THREE.CylinderGeometry( 0.2, 0, 1, 4, 1, false ), new GizmoMaterial( { color: 0x00ff00, opacity: 0.25 } ) ), [ 0, 0.6, 0 ] ]\n                ],\n                Z: [\n                    [ new THREE.Mesh( new THREE.CylinderGeometry( 0.2, 0, 1, 4, 1, false ), new GizmoMaterial( { color: 0x0000ff, opacity: 0.25 } ) ), [ 0, 0, 0.6 ], [ Math.PI/2, 0, 0 ] ]\n                ],\n                XYZ: [\n                    [ new THREE.Mesh( new THREE.BoxGeometry( 0.4, 0.4, 0.4 ), new GizmoMaterial( { color: 0xffffff, opacity: 0.25 } ) ) ]\n                ]\n            };\n\n        };\n\n        this.setActivePlane = function ( axis, eye ) {\n\n            var tempMatrix = new THREE.Matrix4();\n            eye.applyMatrix4( tempMatrix.getInverse( tempMatrix.extractRotation( this.planes[ \"XY\" ].matrixWorld ) ) );\n\n            if ( axis == \"X\" ) {\n                this.activePlane = this.planes[ \"XY\" ];\n                if ( Math.abs(eye.y) > Math.abs(eye.z) ) this.activePlane = this.planes[ \"XZ\" ];\n            }\n\n            if ( axis == \"Y\" ){\n                this.activePlane = this.planes[ \"XY\" ];\n                if ( Math.abs(eye.x) > Math.abs(eye.z) ) this.activePlane = this.planes[ \"YZ\" ];\n            }\n\n            if ( axis == \"Z\" ){\n                this.activePlane = this.planes[ \"XZ\" ];\n                if ( Math.abs(eye.x) > Math.abs(eye.y) ) this.activePlane = this.planes[ \"YZ\" ];\n            }\n\n            if ( axis == \"XYZ\" ) this.activePlane = this.planes[ \"XYZE\" ];\n\n            this.hide();\n            this.show();\n\n        };\n\n        this.init();\n\n    };\n\n    THREE.TransformGizmoScale.prototype = Object.create( THREE.TransformGizmo.prototype );\n\n    THREE.TransformControls = function ( camera, domElement, mode ) {\n\n        // TODO: Make non-uniform scale and rotate play nice in hierarchies\n        // TODO: ADD RXYZ contol\n\n        THREE.Object3D.call( this );\n\n        domElement = ( domElement !== undefined ) ? domElement : document;\n\n        this.gizmo = {};\n        switch ( mode ) {\n            case \"translate\":\n                this.gizmo[mode] = new THREE.TransformGizmoTranslate();\n                break;\n            case \"rotate\":           \n               this.gizmo[mode] = new THREE.TransformGizmoRotate();\n               break;\n            case \"transrotate\":\n                this.gizmo[mode] = new THREE.TransformGizmoTranslateRotate();\n                break;\n            case \"scale\":\n                this.gizmo[mode] = new THREE.TransformGizmoScale();\n                break;\n        }\n\n        this.add(this.gizmo[mode]);\n        this.gizmo[mode].hide();\n\n        this.object = undefined;\n        this.snap = null;\n        this.snapDelta = 0;\n        this.space = \"world\";\n        this.size = 1;\n        this.axis = null;\n        this.useAllPickers = true;\n\n        this.unitX = new THREE.Vector3( 1, 0, 0 );\n        this.unitY = new THREE.Vector3( 0, 1, 0 );\n        this.unitZ = new THREE.Vector3( 0, 0, 1 );\n        this.normal = new THREE.Vector3(0, 0, 1);\n\n        if ( mode === \"transrotate\" ) {\n            var geometry = new THREE.Geometry();\n            geometry.vertices.push( new THREE.Vector3(0, 0, 0), new THREE.Vector3(0, 0, 1) );\n            var material = new THREE.LineBasicMaterial( {color: 0x000000, linewidth:2, depthTest: false} );\n            this.startLine = new THREE.Line( geometry, material );\n            var geometry = new THREE.Geometry();\n            var material = new THREE.LineBasicMaterial( {color: 0xffe603, linewidth:2, depthTest: false} );\n            geometry.vertices.push( new THREE.Vector3(0, 0, 0), new THREE.Vector3(0, 0, 1) );\n            this.endLine = new THREE.Line( geometry, material );\n            var geometry = new THREE.Geometry();\n            var material = new THREE.LineDashedMaterial({color: 0x000000, linewidth:1, depthTest: false});\n            geometry.vertices.push( new THREE.Vector3(0, -1, 0), new THREE.Vector3(0, 1, 0) );\n            this.centerLine = new THREE.Line( geometry, material );\n\n            var map = THREE.ImageUtils.loadTexture(Autodesk.Viewing.Private.getResourceUrl(\"res/textures/centerMarker_X.png\"));\n            map.magFilter = map.minFilter = THREE.NearestFilter;\n            var geometry = new THREE.CircleGeometry( 0.1, 32 );\n            var material = new THREE.MeshBasicMaterial({opacity: 1, side: THREE.DoubleSide, transparent:true, map:map});\n            this.centerMark = new THREE.Mesh( geometry, material );\n            this.centerMark.rotation.set(Math.PI/2, 0, 0);\n\n            this.ticks = {};\n            var map = THREE.ImageUtils.loadTexture(Autodesk.Viewing.Private.getResourceUrl(\"res/textures/cardinalPoint.png\"));\n            map.magFilter = map.minFilter = THREE.NearestFilter;\n            var material = new THREE.MeshBasicMaterial({depthTest: false, opacity: 1, transparent:true, side: THREE.DoubleSide, map:map});\n            var w = 0.12, h = 0.25, d = 1.15;\n\n            this.ticks[\"RX\"] = new THREE.Object3D();\n            var geometry = new THREE.PlaneBufferGeometry(w, h);\n            var mesh = new THREE.Mesh(geometry, material);\n            mesh.position.set(0, 0, -d-h/2);\n            mesh.rotation.set(Math.PI/2, Math.PI/2, 0);\n            this.ticks[\"RX\"].add(mesh);\n\n            mesh = mesh.clone();\n            mesh.position.set(0, d+h/2, 0);\n            mesh.rotation.set(0, Math.PI/2, 0);\n            this.ticks[\"RX\"].add(mesh);\n\n            mesh = mesh.clone();\n            mesh.position.set(0, 0, d+h/2);\n            mesh.rotation.set(0, Math.PI/2, Math.PI/2);\n            this.ticks[\"RX\"].add(mesh);\n\n            mesh = mesh.clone();\n            mesh.position.set(0, -d-h/2, 0);\n            mesh.rotation.set(0, Math.PI/2, 0);\n            this.ticks[\"RX\"].add(mesh);\n\n            this.ticks[\"RY\"] = new THREE.Object3D();\n            mesh = mesh.clone();\n            mesh.position.set(0, 0, -d-h/2);\n            mesh.rotation.set(Math.PI/2, 0, 0);\n            this.ticks[\"RY\"].add(mesh);\n\n            mesh = mesh.clone();\n            mesh.position.set(-d-h/2, 0, 0);\n            mesh.rotation.set(Math.PI/2, 0, Math.PI/2);\n            this.ticks[\"RY\"].add(mesh);\n\n            mesh = mesh.clone();\n            mesh.position.set(0, 0, d+h/2);\n            mesh.rotation.set(Math.PI/2, 0, 0);\n            this.ticks[\"RY\"].add(mesh);\n\n            mesh = mesh.clone();\n            mesh.position.set(d+h/2, 0, 0);\n            mesh.rotation.set(Math.PI/2, 0, Math.PI/2);\n            this.ticks[\"RY\"].add(mesh);\n        }\n\n        var scope = this;\n\n        var _dragging = false;\n        var _mode = mode;\n        var _plane = \"XY\";\n\n        var changeEvent = { type: \"change\" };\n        var mouseDownEvent = { type: \"mouseDown\" };\n        var mouseUpEvent = { type: \"mouseUp\", mode: _mode };\n        var objectChangeEvent = { type: \"objectChange\" };\n\n        var ray = new THREE.Raycaster();\n        var pointerVector = new THREE.Vector3();\n        var pointerDir = new THREE.Vector3();\n\n        var point = new THREE.Vector3();\n        var offset = new THREE.Vector3();\n\n        var rotation = new THREE.Vector3();\n        var offsetRotation = new THREE.Vector3();\n        var scale = 1;\n        this.clientScale = 1;\n\n        var lookAtMatrix = new THREE.Matrix4();\n        var eye = new THREE.Vector3();\n\n        var tempMatrix = new THREE.Matrix4();\n        var tempVector = new THREE.Vector3();\n        var tempQuaternion = new THREE.Quaternion();\n        var projX = new THREE.Vector3();\n        var projY = new THREE.Vector3();\n        var projZ = new THREE.Vector3();\n\n        var quaternionXYZ = new THREE.Quaternion();\n        var quaternionX = new THREE.Quaternion();\n        var quaternionY = new THREE.Quaternion();\n        var quaternionZ = new THREE.Quaternion();\n        var quaternionE = new THREE.Quaternion();\n\n        var oldPosition = new THREE.Vector3();\n        var oldScale = new THREE.Vector3();\n        var oldRotationMatrix = new THREE.Matrix4();\n\n        var parentRotationMatrix  = new THREE.Matrix4();\n        var parentScale = new THREE.Vector3();\n\n        var worldPosition = new THREE.Vector3();\n        var worldRotation = new THREE.Euler();\n        var worldRotationMatrix  = new THREE.Matrix4();\n        var camPosition = new THREE.Vector3();\n        var camRotation = new THREE.Euler();\n\n        this.attach = function ( object ) {\n\n            scope.object = object;\n\n            this.gizmo[_mode].show();\n\n            scope.update();\n\n            scope.updateUnitVectors();\n\n        };\n\n        this.detach = function ( object ) {\n\n            scope.object = undefined;\n            this.axis = null;\n\n            this.gizmo[_mode].hide();\n\n        };\n\n        this.setMode = function ( mode ) {\n\n            _mode = mode ? mode : _mode;\n\n            if ( _mode == \"scale\" ) scope.space = \"local\";\n\n            this.gizmo[_mode].show();\n\n            this.update();\n            scope.dispatchEvent( changeEvent );\n\n        };\n\n        this.getPicker = function () {\n\n            return scope.gizmo[_mode].hemiPicker.children;\n\n        };\n\n        this.setPosition = function ( position ) {\n\n            this.object.position.copy ( position );\n            this.update();\n        \n        };\n\n        this.setNormal = function ( normal ) {\n\n            tempQuaternion.setFromUnitVectors( this.normal, normal );\n            this.unitX.applyQuaternion( tempQuaternion );\n            this.unitY.applyQuaternion( tempQuaternion );\n            this.unitZ.applyQuaternion( tempQuaternion );\n            this.normal.copy( normal );\n            if (this.object) {\n                this.object.quaternion.multiply ( tempQuaternion );\n            }\n            this.update();\n        };\n\n        this.setSnap = function ( snap, delta ) {\n\n            scope.snap = snap;\n            scope.snapDelta = delta;\n\n        };\n\n        this.setSize = function ( size ) {\n\n            scope.size = size;\n            this.update();\n            scope.dispatchEvent( changeEvent );\n\n        };\n\n        this.setSpace = function ( space ) {\n\n            scope.space = space;\n            this.update();\n            scope.dispatchEvent( changeEvent );\n\n        };\n\n        this.update = function (highlight) {\n\n            if ( scope.object === undefined ) return;\n\n            scope.object.updateMatrixWorld();\n            worldPosition.setFromMatrixPosition( scope.object.matrixWorld );\n            worldRotation.setFromRotationMatrix( tempMatrix.extractRotation( scope.object.matrixWorld ) );\n\n            camera.updateMatrixWorld();\n            camPosition.setFromMatrixPosition( camera.matrixWorld );\n            //camRotation.setFromRotationMatrix( tempMatrix.extractRotation( camera.matrixWorld ) );\n\n            this.position.copy( worldPosition );\n\n            this.quaternion.setFromEuler( worldRotation );\n\n            this.normal.set( 0, 0, 1 );\n            this.normal.applyEuler( worldRotation );\n\n            // keep same screen height (100px)\n            var height;\n            if ( camera.isPerspective ) {\n                var dist = worldPosition.distanceTo( camPosition );\n                height = 2 * Math.tan( camera.fov * Math.PI / 360 ) * dist;\n            } else {\n                // orthographic, so the world height is simply top minus bottom\n                height = camera.top - camera.bottom;\n            }\n            var rect = domElement.getBoundingClientRect();\n            // multiply 100 pixels by world height for the window, divide by window height in pixels,\n            // to get world height equivalent to 100 pixels.\n            scale = this.clientScale * 100 * height / rect.height;\n            this.scale.set( scale, scale, scale );\n\n            // Set the gizmo position with the specified offset.\n            if(this.gizmoOffset) {\n                this.position.add(this.gizmoOffset);\n            }\n            this.updateMatrixWorld();\n            //eye.copy( camPosition ).sub( worldPosition ).normalize();\n\n            //if ( scope.space == \"local\" )\n            //    this.gizmo[_mode].update( worldRotation, eye );\n            //else if ( scope.space == \"world\" )\n            //    this.gizmo[_mode].update( new THREE.Euler(), eye );\n\n            if (highlight)\n                this.gizmo[_mode].highlight( scope.axis );\n\n        };\n\n        this.setGizmoOffset = function(vec) {\n            // Reset the gizmo if no vector passed in.\n            this.gizmoOffset = !vec ? new THREE.Vector3(0,0,0) : vec;\n            this.update();\n        }\n\n        this.updateUnitVectors = function () {\n\n            this.unitX.set( 1, 0, 0 );\n            this.unitY.set( 0, 1, 0 );\n            this.unitZ.set( 0, 0, 1 );\n            this.unitX.applyEuler( worldRotation );\n            this.unitY.applyEuler( worldRotation );\n            this.unitZ.applyEuler( worldRotation );\n\n        };\n\n        this.showRotationGizmos = function (set) {\n\n            var handles = this.gizmo[_mode].handles.children;\n            for ( var i = 0; i < handles.length; i++ ) {\n                var child = handles[i];\n                child.visible = true;\n                if ( child.name.search(\"R\") !== -1 ) child.visible = set;\n            }\n            this.useAllPickers = set;\n            \n        };\n\n        this.highlight = function () {\n\n            this.gizmo[_mode].highlight( this.axis || \"Z\" );\n\n        };\n\n        this.onPointerHover = function( event ) {\n\n            if ( scope.object === undefined || _dragging === true ) return false;\n\n            var pointer = event;\n\n            var intersect = intersectObjects( pointer, scope.useAllPickers? scope.gizmo[_mode].pickers.children: scope.gizmo[_mode].subPickers.children );\n\n            var axis = null;\n            var mode = \"\";\n\n            if ( intersect ) {\n\n                axis = intersect.object.name;\n                mode = axis.search(\"R\") != -1 ? \"rotate\" : \"translate\";\n\n            }\n\n            if ( scope.axis !== axis ) {\n\n                scope.axis = axis;\n                scope.gizmo[_mode].activeMode = mode;\n                scope.update(true);\n                scope.dispatchEvent( changeEvent );\n\n            } \n\n            if (scope.axis === null) {\n\n                scope.gizmo[_mode].show();\n            \n            }\n\n            return intersect? true : false;\n\n        }\n\n        this.onPointerDown = function( event ) {\n\n            if ( scope.object === undefined || _dragging === true ) return false;\n            \n            var pointer = event;\n\n            if ( event.pointerType === 'touch' ) {\n\n                var intersect = intersectObjects( pointer, scope.useAllPickers? scope.gizmo[_mode].pickers.children: scope.gizmo[_mode].subPickers.children );\n\n                var axis = null;\n                var mode = \"\";\n\n                if ( intersect ) {\n\n                    axis = intersect.object.name;\n                    mode = axis.search(\"R\") != -1 ? \"rotate\" : \"translate\";\n\n                }\n\n                if ( scope.axis !== axis ) {\n\n                    scope.axis = axis;\n                    scope.gizmo[_mode].activeMode = mode;\n                }\n            }\n\n            var intersect = null;\n\n            if ( pointer.button === 0 || pointer.button === -1 || pointer.button === undefined ) {\n\n                intersect = intersectObjects( pointer, scope.useAllPickers? scope.gizmo[_mode].pickers.children: scope.gizmo[_mode].subPickers.children );\n\n                if ( intersect ) {\n\n                    scope.dispatchEvent( mouseDownEvent );\n\n                    scope.axis = intersect.object.name;\n\n                    scope.update();\n\n                    eye.copy( camera.position ).sub( worldPosition ).normalize();\n\n                    scope.gizmo[_mode].setActivePlane( scope.axis, eye );\n\n                    var planeIntersect = intersectObjects( pointer, [scope.gizmo[_mode].activePlane] );\n\n                    if ( planeIntersect )\n                        offset.copy( planeIntersect.point );\n\n                    oldPosition.copy( scope.object.position );\n                    oldScale.copy( scope.object.scale );\n\n                    oldRotationMatrix.extractRotation( scope.object.matrix );\n                    worldRotationMatrix.extractRotation( scope.object.matrixWorld );\n\n                    if ( scope.object.parent ) {\n                        parentRotationMatrix.extractRotation( scope.object.parent.matrixWorld );\n                        parentScale.setFromMatrixScale( tempMatrix.getInverse( scope.object.parent.matrixWorld ) );\n                    } else {\n                        parentRotationMatrix.extractRotation( scope.object.matrixWorld );\n                        parentScale.setFromMatrixScale( tempMatrix.getInverse( scope.object.matrixWorld ) );\n                    }\n\n                    // show rotation start line and ticks\n                    if ( _mode === \"transrotate\" && scope.gizmo[_mode].activeMode === \"rotate\" ) {\n                        scope.startLine.geometry.vertices[0].set(0, 0, 0).applyMatrix4( scope.matrixWorld );\n                        scope.startLine.geometry.vertices[1].set(0, 0, 1).applyMatrix4( scope.matrixWorld );\n                        scope.startLine.geometry.verticesNeedUpdate = true;\n                        scope.parent.add( scope.startLine );\n\n                        var pos = scope.object.geometry.getAttribute('position');\n                        var pt1 = new THREE.Vector3().fromAttribute(pos, 0).applyMatrix4( scope.object.matrixWorld );\n                        var pt2 = new THREE.Vector3().fromAttribute(pos, 1).applyMatrix4( scope.object.matrixWorld );\n                        var pt3 = new THREE.Vector3().fromAttribute(pos, 2).applyMatrix4( scope.object.matrixWorld );\n                        var pt4 = new THREE.Vector3().fromAttribute(pos, 3).applyMatrix4( scope.object.matrixWorld );\n                        if (scope.axis === \"RX\") {\n                            pt1.lerp(pt3, 0.5);\n                            pt2.lerp(pt4, 0.5);\n                            var dist = pt1.distanceTo(pt2);\n                            scope.centerLine.material.dashSize = dist / 15;\n                            scope.centerLine.material.gapSize = dist / 30;\n                            scope.centerLine.geometry.vertices[0].copy(pt1);\n                            scope.centerLine.geometry.vertices[1].copy(pt2);\n                        } else {\n                            pt1.lerp(pt2, 0.5);\n                            pt3.lerp(pt4, 0.5);\n                            var dist = pt1.distanceTo(pt3);\n                            scope.centerLine.material.dashSize = dist / 15;\n                            scope.centerLine.material.gapSize = dist / 30;\n                            scope.centerLine.geometry.vertices[0].copy(pt1);\n                            scope.centerLine.geometry.vertices[1].copy(pt3);\n                        }\n                        scope.centerLine.geometry.computeLineDistances();\n                        scope.centerLine.geometry.verticesNeedUpdate = true;\n                        scope.parent.add( scope.centerLine );\n\n                        scope.ticks[scope.axis].position.copy( scope.position );\n                        scope.ticks[scope.axis].quaternion.copy( scope.quaternion );\n                        scope.ticks[scope.axis].scale.copy( scope.scale );\n                        scope.parent.add( scope.ticks[scope.axis] );\n                    }\n\n                }\n\n            }\n\n            _dragging = true;\n\n            return intersect? true: false;\n\n        }\n\n        this.onPointerMove = function( event ) {\n\n            if ( scope.object === undefined || scope.axis === null || _dragging === false ) return false;\n\n            var pointer = event;\n\n            var planeIntersect = intersectObjects( pointer, [scope.gizmo[_mode].activePlane] );\n\n            if ( planeIntersect )\n                point.copy( planeIntersect.point );\n\n            var mode = scope.gizmo[_mode].activeMode;\n            if ( mode == \"translate\" ) {\n\n                point.sub( offset );\n                point.multiply(parentScale);\n\n                if ( scope.space == \"local\" ) {\n\n                    point.applyMatrix4( tempMatrix.getInverse( worldRotationMatrix ) );\n\n                    projX.copy( this.unitX );\n                    projY.copy( this.unitY );\n                    projZ.copy( this.unitZ );\n                    tempVector.set( 0, 0, 0 );\n                    if ( scope.axis.search(\"X\") != -1 ) {\n                        projX.multiplyScalar( point.dot( this.unitX ) );\n                        tempVector.add( projX );\n                    }\n                    if ( scope.axis.search(\"Y\") != -1 ) {\n                        projY.multiplyScalar( point.dot( this.unitY ) );\n                        tempVector.add(projY);\n                    }\n                    if ( scope.axis.search(\"Z\") != -1 ) {\n                        projZ.multiplyScalar( point.dot( this.unitZ ) );\n                        tempVector.add( projZ );\n                    }\n                    point.copy( tempVector );\n\n                    point.applyMatrix4( oldRotationMatrix );\n\n                    scope.object.position.copy( oldPosition );\n                    scope.object.position.add( point );\n\n                }\n\n                if ( scope.space == \"world\" || scope.axis.search(\"XYZ\") != -1 ) {\n\n                    projX.copy( this.unitX );\n                    projY.copy( this.unitY );\n                    projZ.copy( this.unitZ );\n                    tempVector.set( 0, 0, 0 );\n                    if ( scope.axis.search(\"X\") != -1 ) {\n                        projX.multiplyScalar( point.dot( this.unitX ) );\n                        tempVector.add( projX );\n                    }\n                    if ( scope.axis.search(\"Y\") != -1 ) {\n                        projY.multiplyScalar( point.dot( this.unitY ) );\n                        tempVector.add(projY);\n                    }\n                    if ( scope.axis.search(\"Z\") != -1 ) {\n                        projZ.multiplyScalar( point.dot( this.unitZ ) );\n                        tempVector.add( projZ );\n                    }\n                    point.copy( tempVector );\n\n                    point.applyMatrix4( tempMatrix.getInverse( parentRotationMatrix ) );\n\n                    scope.object.position.copy( oldPosition );\n                    scope.object.position.add( point );\n\n                }\n\n            } else if ( mode == \"scale\" ) {\n\n                point.sub( offset );\n                point.multiply(parentScale);\n\n                if ( scope.space == \"local\" ) {\n\n                    if ( scope.axis == \"XYZ\") {\n\n                        scale = 1 + ( ( point.y ) / 50 );\n\n                        scope.object.scale.x = oldScale.x * scale;\n                        scope.object.scale.y = oldScale.y * scale;\n                        scope.object.scale.z = oldScale.z * scale;\n\n                    } else {\n\n                        point.applyMatrix4( tempMatrix.getInverse( worldRotationMatrix ) );\n\n                        if ( scope.axis == \"X\" ) scope.object.scale.x = oldScale.x * ( 1 + point.x / 50 );\n                        if ( scope.axis == \"Y\" ) scope.object.scale.y = oldScale.y * ( 1 + point.y / 50 );\n                        if ( scope.axis == \"Z\" ) scope.object.scale.z = oldScale.z * ( 1 + point.z / 50 );\n\n                    }\n\n                }\n\n            } else if ( mode == \"rotate\") {\n\n                point.sub( worldPosition );\n                point.multiply(parentScale);\n                tempVector.copy(offset).sub( worldPosition );\n                tempVector.multiply(parentScale);\n\n                if ( scope.axis == \"RE\" ) {\n\n                    point.applyMatrix4( tempMatrix.getInverse( lookAtMatrix ) );\n                    tempVector.applyMatrix4( tempMatrix.getInverse( lookAtMatrix ) );\n\n                    rotation.set( Math.atan2( point.z, point.y ), Math.atan2( point.x, point.z ), Math.atan2( point.y, point.x ) );\n                    offsetRotation.set( Math.atan2( tempVector.z, tempVector.y ), Math.atan2( tempVector.x, tempVector.z ), Math.atan2( tempVector.y, tempVector.x ) );\n\n                    tempQuaternion.setFromRotationMatrix( tempMatrix.getInverse( parentRotationMatrix ) );\n\n                    var rotz = rotation.z - offsetRotation.z;\n                    if ( scope.snap !== null ) {\n                        var rotsnap = Math.round( rotz / scope.snap ) * scope.snap;\n                        if ( Math.abs(rotsnap-rotz) < scope.snapDelta ) {\n                            rotz = rotsnap;\n                        }\n                    }\n                    quaternionE.setFromAxisAngle( eye, rotz );\n                    quaternionXYZ.setFromRotationMatrix( worldRotationMatrix );\n\n                    tempQuaternion.multiplyQuaternions( tempQuaternion, quaternionE );\n                    tempQuaternion.multiplyQuaternions( tempQuaternion, quaternionXYZ );\n\n                    scope.object.quaternion.copy( tempQuaternion );\n\n                } else if ( scope.axis == \"RXYZE\" ) {\n\n                    var tempAxis = point.clone().cross(tempVector).normalize(); // rotation axis\n\n                    tempQuaternion.setFromRotationMatrix( tempMatrix.getInverse( parentRotationMatrix ) );\n\n                    var rot = - point.clone().angleTo(tempVector);\n                    if ( scope.snap !== null ) {\n                        var rotsnap = Math.round( rot / scope.snap ) * scope.snap;\n                        if ( Math.abs(rotsnap-rot) < scope.snapDelta ) {\n                            rot = rotsnap;\n                        }\n                    }\n                    quaternionX.setFromAxisAngle( tempAxis, rot );\n                    quaternionXYZ.setFromRotationMatrix( worldRotationMatrix );\n\n                    tempQuaternion.multiplyQuaternions( tempQuaternion, quaternionX );\n                    tempQuaternion.multiplyQuaternions( tempQuaternion, quaternionXYZ );\n\n                    scope.object.quaternion.copy( tempQuaternion );\n\n                } else if ( scope.space == \"local\" ) {\n\n                    point.applyMatrix4( tempMatrix.getInverse( worldRotationMatrix ) );\n\n                    tempVector.applyMatrix4( tempMatrix.getInverse( worldRotationMatrix ) );\n\n                    var projx = point.dot(this.unitX), projy = point.dot(this.unitY), projz = point.dot(this.unitZ);\n                    var tempx = tempVector.dot(this.unitX), tempy = tempVector.dot(this.unitY), tempz = tempVector.dot(this.unitZ);\n                    rotation.set( Math.atan2( projz, projy ), Math.atan2( projx, projz ), Math.atan2( projy, projx ) );\n                    offsetRotation.set( Math.atan2( tempz, tempy ), Math.atan2( tempx, tempz ), Math.atan2( tempy, tempx ) );\n\n                    var rotx = rotation.x - offsetRotation.x;\n                    var roty = rotation.y - offsetRotation.y;\n                    var rotz = rotation.z - offsetRotation.z;\n                    if ( scope.snap !== null ) {\n                        if ( scope.axis.search(\"X\") != -1 ) {\n                            var rotsnap = Math.round( rotx / scope.snap ) * scope.snap;\n                            if ( Math.abs(rotsnap-rotx) < scope.snapDelta ) {\n                                rotx = rotsnap;\n                            }\n                        }\n                        if ( scope.axis.search(\"Y\") != -1 ) {\n                            var rotsnap = Math.round( roty / scope.snap ) * scope.snap;\n                            if ( Math.abs(rotsnap-roty) < scope.snapDelta ) {\n                                roty = rotsnap;\n                            }\n                        }\n                        if ( scope.axis.search(\"Z\") != -1 ) {\n                            var rotsnap = Math.round( rotz / scope.snap ) * scope.snap;\n                            if ( Math.abs(rotsnap-rotz) < scope.snapDelta ) {\n                                rotz = rotsnap;\n                            }\n                        }\n                    }\n                    quaternionX.setFromAxisAngle( this.unitX, rotx );\n                    quaternionY.setFromAxisAngle( this.unitY, roty );\n                    quaternionZ.setFromAxisAngle( this.unitZ, rotz );\n                    quaternionXYZ.setFromRotationMatrix( oldRotationMatrix );\n\n                    if ( scope.axis == \"RX\" ) quaternionXYZ.multiplyQuaternions( quaternionXYZ, quaternionX );\n                    if ( scope.axis == \"RY\" ) quaternionXYZ.multiplyQuaternions( quaternionXYZ, quaternionY );\n                    if ( scope.axis == \"RZ\" ) quaternionXYZ.multiplyQuaternions( quaternionXYZ, quaternionZ );\n\n                    scope.object.quaternion.copy( quaternionXYZ );\n\n                } else if ( scope.space == \"world\" ) {\n\n                    var projx = point.dot(this.unitX), projy = point.dot(this.unitY), projz = point.dot(this.unitZ);\n                    var tempx = tempVector.dot(this.unitX), tempy = tempVector.dot(this.unitY), tempz = tempVector.dot(this.unitZ);\n                    rotation.set( Math.atan2( projz, projy ), Math.atan2( projx, projz ), Math.atan2( projy, projx ) );\n                    offsetRotation.set( Math.atan2( tempz, tempy ), Math.atan2( tempx, tempz ), Math.atan2( tempy, tempx ) );\n\n                    tempQuaternion.setFromRotationMatrix( tempMatrix.getInverse( parentRotationMatrix ) );\n\n                    var rotx = rotation.x - offsetRotation.x;\n                    var roty = rotation.y - offsetRotation.y;\n                    var rotz = rotation.z - offsetRotation.z;\n                    if ( scope.snap !== null ) {\n                        if ( scope.axis.search(\"X\") != -1 ) {\n                            var rotsnap = Math.round( rotx / scope.snap ) * scope.snap;\n                            if ( Math.abs(rotsnap-rotx) < scope.snapDelta ) {\n                                rotx = rotsnap;\n                            }\n                        }\n                        if ( scope.axis.search(\"Y\") != -1 ) {\n                            var rotsnap = Math.round( roty / scope.snap ) * scope.snap;\n                            if ( Math.abs(rotsnap-roty) < scope.snapDelta ) {\n                                roty = rotsnap;\n                            }\n                        }\n                        if ( scope.axis.search(\"Z\") != -1 ) {\n                            var rotsnap = Math.round( rotz / scope.snap ) * scope.snap;\n                            if ( Math.abs(rotsnap-rotz) < scope.snapDelta ) {\n                                rotz = rotsnap;\n                            }\n                        }\n                    }\n                    quaternionX.setFromAxisAngle( this.unitX, rotx );\n                    quaternionY.setFromAxisAngle( this.unitY, roty );\n                    quaternionZ.setFromAxisAngle( this.unitZ, rotz );\n                    quaternionXYZ.setFromRotationMatrix( worldRotationMatrix );\n\n                    if ( scope.axis == \"RX\" ) tempQuaternion.multiplyQuaternions( tempQuaternion, quaternionX );\n                    if ( scope.axis == \"RY\" ) tempQuaternion.multiplyQuaternions( tempQuaternion, quaternionY );\n                    if ( scope.axis == \"RZ\" ) tempQuaternion.multiplyQuaternions( tempQuaternion, quaternionZ );\n\n                    tempQuaternion.multiplyQuaternions( tempQuaternion, quaternionXYZ );\n\n                    scope.object.quaternion.copy( tempQuaternion );\n\n                }\n\n                // show rotation end line\n                if (_mode === \"transrotate\" ) {\n                    scope.add( scope.endLine );\n                    scope.add( scope.centerMark );\n                }\n\n            }\n\n            // update matrix\n            scope.object.matrixAutoUpdate = true;\n\n            scope.update(true);\n            scope.dispatchEvent( changeEvent );\n            scope.dispatchEvent( objectChangeEvent );\n\n            return planeIntersect? true : false;\n\n        }\n\n        this.onPointerUp = function( event ) {\n\n            if ( _dragging && ( scope.axis !== null ) ) {\n                mouseUpEvent.mode = _mode;\n                scope.dispatchEvent( mouseUpEvent )\n            }\n            _dragging = false;\n\n            this.gizmo[_mode].show();\n\n            this.updateUnitVectors();\n\n            // remove rotation start/end lines\n            if ( _mode === \"transrotate\" && this.gizmo[_mode].activeMode === \"rotate\" ) {\n                this.remove( this.endLine );\n                this.remove( this.centerMark );\n                this.parent.remove( this.centerLine );\n                this.parent.remove( this.startLine );\n                this.parent.remove( this.ticks[this.axis] );\n            }\n\n            return false;\n\n        }\n\n        function intersectObjects( pointer, objects ) {\n            return THREE.TransformControls.intersectObjects(pointer.canvasX, pointer.canvasY, objects, camera, true);\n        }\n    };\n\n    THREE.TransformControls.intersectObjects = (function () {\n\n        var pointerVector = new THREE.Vector3();\n        var pointerDir = new THREE.Vector3();\n        var ray = new THREE.Raycaster();\n\n        return function(clientX, clientY, objects, camera, recursive) {\n\n            // Convert client to viewport coords (in [-1,1]^2)\n            var x =  (clientX  / camera.clientWidth)  * 2 - 1;\n            var y = -(clientY  / camera.clientHeight) * 2 + 1; // y-direction flips between canvas and viewport coords\n\n            if (camera.isPerspective) {\n                pointerVector.set(x, y, 0.5);\n                pointerVector.unproject(camera);\n                ray.set(camera.position, pointerVector.sub(camera.position).normalize());\n            } else {\n                pointerVector.set(x, y, -1);\n                pointerVector.unproject(camera);\n                pointerDir.set(0, 0, -1);\n                ray.set(pointerVector, pointerDir.transformDirection(camera.matrixWorld));\n            }\n\n            var intersections = ray.intersectObjects(objects, recursive);\n            return intersections[0] ? intersections[0] : null;\n        };\n    })();\n\n    THREE.TransformControls.prototype = Object.create( THREE.Object3D.prototype );\n\n};\n","\nimport { init_TransformGizmos } from '../../thirdparty/three.js/TransformControls'\nimport { debounce } from \"../../thirdparty/lodash/debounce\"\n\n// Declared at the bottom, inside a function.\nvar SectionMeshClass = null;\nvar avp = Autodesk.Viewing.Private;\n\n/**\n * Tool that provides visual controls for the user to change the cutplane's position and angle.\n * It can (and should) be hooked to [ToolController's registerTool]{@Autodesk.Viewing.ToolController#registerTool}\n *\n * @param {Autodesk.Viewing.Viewer3D} viewer - Viewer3D instance\n * @param {Object} config - Configuration values\n * @param {Object} options.tintColor - Object containing attributes r, g, b in the range [0..1]\n * @param {Number} options.tintIntensity - Value range [0..1]\n * @constructor\n */\nexport var SectionTool = function(viewer, options)\n{\n    var _viewer  = viewer.impl;\n\n    var _names = [\"section\"];\n    var _active = false;\n\n    var _isDragging = false;\n    var _boxChanged = false;\n    var _isPlaneOn = true;\n    var _tintColor = options.tintColor;\n    var _tintIntensity = options.tintIntensity;\n\n    var _transRotControl;\n    var _transControl;\n    var _gizmoOffsetRight = isNaN(options.gizmoOffsetRight) ? 200 : options.gizmoOffsetRight; // 200 So the gizmo won't be covered by the View Cube.\n    var _gizmoOffsetLeft = isNaN(options.gizmoOffsetLeft) ? 80 : options.gizmoOffsetLeft;  \n    var _gizmoOffsetTop = isNaN(options.gizmoOffsetTop) ? 80 : options.gizmoOffsetTop;\n    var _gizmoOffsetBottom = isNaN(options.gizmoOffsetBottom) ? 80 : options.gizmoOffsetBottom;\n    var _gizmoNewClientPos = new THREE.Vector3();\n\n    var _trcOffset;\n    var _sectionGroups = [];\n    var _sectionPlanes = [];\n    var _sectionPicker = [];\n    var _activeMode = \"\";\n    var _overlayName = \"gizmo\";\n    var _touchType = null;\n    var _initialized = false;\n    var _visibleAtFirst = true;\n    var _outlineIndices = [[0, 1], [1, 3], [3, 2], [2, 0]];\n    var _priority = 70;\n    var _selectionOpacity = 0.25;\n    var _selectionColor = 0x287EEA;\n\n    const sendAnalyticsDebounced = debounce((from, type, action) => {\n        avp.analytics.track('viewer.section', {\n            from: from,\n            type: type,\n            action: action,\n        });\n    }, 2000);\n\n    init_TransformGizmos();\n    init_SectionMesh();\n\n    function initControl() {\n\n        if (_initialized)\n            return;\n\n        _transRotControl = new THREE.TransformControls(_viewer.camera, _viewer.canvas, \"transrotate\");\n        _transRotControl.addEventListener('change', updateViewer);\n        _transRotControl.setSnap(Math.PI/2, Math.PI/36); // snap to 90 degs within 5 degs range\n        \n        _transControl = new THREE.TransformControls(_viewer.camera, _viewer.canvas, \"translate\");\n        _transControl.addEventListener('change', updateViewer);\n\n        // add to overlay scene\n        if (_viewer.overlayScenes[_overlayName] === undefined) {\n            _viewer.createOverlayScene(_overlayName);\n        }\n        _viewer.addOverlay(_overlayName, _transRotControl);\n        _viewer.addOverlay(_overlayName, _transControl);\n\n        viewer.addEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT, updateControls);\n        viewer.addEventListener(Autodesk.Viewing.ISOLATE_EVENT, updateSections);\n        viewer.addEventListener(Autodesk.Viewing.HIDE_EVENT, updateSections);\n        viewer.addEventListener(Autodesk.Viewing.SHOW_EVENT, updateSections);\n        viewer.addEventListener(Autodesk.Viewing.MODEL_TRANSFORM_CHANGED_EVENT, updateSections);\n        \n        _initialized = true;\n    }\n\n    function deinitControl() {\n        \n        if (!_initialized)\n            return;\n    \n        _viewer.removeOverlay(_overlayName, _transRotControl);\n        _transRotControl.removeEventListener('change', updateViewer);\n        _transRotControl = null;\n        _viewer.removeOverlay(_overlayName, _transControl);\n        _transControl.removeEventListener('change', updateViewer);\n        _transControl = null;\n        _viewer.removeOverlayScene(_overlayName);\n\n        viewer.removeEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT, updateControls);\n        viewer.removeEventListener(Autodesk.Viewing.ISOLATE_EVENT, updateSections);\n        viewer.removeEventListener(Autodesk.Viewing.HIDE_EVENT, updateSections);\n        viewer.removeEventListener(Autodesk.Viewing.SHOW_EVENT, updateSections);\n        viewer.removeEventListener(Autodesk.Viewing.MODEL_TRANSFORM_CHANGED_EVENT, updateSections);\n        \n        _initialized = false;\n    }\n\n    function updateViewer() {\n        _viewer.invalidate(false, false, true);\n    }\n\n    function updateControls() {\n\n        adjustGizmoToBounds();\n\n        if (_transRotControl) {\n            _transRotControl.update();\n        }\n        if (_transControl) {\n            _transControl.update();\n        }\n    }\n\n    function adjustGizmoToBounds() {\n\n        // Adjust only for section planes (and not for section box)\n        if (!_sectionGroups.length || _sectionGroups[0]?.children.length > 1) {\n            return;\n        }\n        \n        const client = _viewer.worldToClient(_transRotControl.position);\n        const rect = _viewer.getCanvasBoundingClientRect();\n        _gizmoNewClientPos.copy(client);\n      \n        if (client.x < _gizmoOffsetLeft) {\n            _gizmoNewClientPos.x = _gizmoOffsetLeft;\n        } else if (client.x > rect.width - _gizmoOffsetRight) {\n            _gizmoNewClientPos.x = rect.width - _gizmoOffsetRight;\n        }\n\n        if (client.y < _gizmoOffsetTop) {\n            _gizmoNewClientPos.y = _gizmoOffsetTop;\n        } else if (client.y > rect.height - _gizmoOffsetBottom) {\n            _gizmoNewClientPos.y = rect.height - _gizmoOffsetBottom;\n        }\n\n        if (_gizmoNewClientPos.x !== client.x || _gizmoNewClientPos.y !== client.y) {\n            const plane = _sectionGroups[0].children[0];\n            const intersection = THREE.TransformControls.intersectObjects(_gizmoNewClientPos.x, _gizmoNewClientPos.y, [plane], _viewer.camera, false);\n            if (intersection) {\n                const pos = intersection.point.clone().sub(intersection.object.position);\n                _transRotControl.setGizmoOffset(pos);\n            }\n        }\n    }\n\n    function updateSections() {\n        if (_active && _sectionPlanes.length === 1) {\n            updatePlaneMeshes(true);\n            updateControls();\n            updateCapMeshes(new THREE.Plane().setComponents(_sectionPlanes[0].x, _sectionPlanes[0].y, _sectionPlanes[0].z, _sectionPlanes[0].w));\n        }\n    }\n\n    /*function mix(a, b, val) {\n        return a * (1.0 - val) + b * val;\n    }*/\n    \n    function getDiffuseColor(material) {\n       return (material && material.color) || new THREE.Color(0xffffff);\n    }\n\n    /*function getSpecularColor(material) {\n        return (material && material.specular) || new THREE.Color(0xffffff);\n    }\n\n    function tintColor(c) {\n        var intensity = Autodesk.Viewing.Extensions.Section.tintIntensity;\n        var tc = _tintColor;\n        c.r = mix(c.r, tc.r, intensity);\n        c.g = mix(c.g, tc.g, intensity);\n        c.b = mix(c.b, tc.b, intensity);\n    }*/\n    \n    // Object used to iterator all fragments in all dbids in all models in a scene\n    // _timeSlice is the time in milliseconds before the iterator will allow itself\n    // to be interrupted. _sliceDelay is the time in milliseconds the iterator delays\n    // before starting a new time slice. The default values are 15 and 0 respectively.\n    // I did some experiments and it seemed like these values worked pretty well.\n    // _sliceDelay doesn't seem to matter very much, but making _timeSlice much\n    // larger will cause highlights to look jerky.\n    function FragmentIterator(_timeSlice, _sliceDelay) {\n\n        var _capTimer = 0;      // Timer used to delay time slices\n        var _callback;          // Callback for each fragment\n        var _models;            // Array of models in the scene\n        var _curModel;          // Current model\n        var _dbIds = [];        // Database ids for the current model\n        var _fragIds = [];      // Fragment ids for the current database id\n        var _instanceTree;       // Instance tree for current model\n        var _m;                 // Current index in _models\n        var _d;                 // Current index in _dbIds\n        var _f;                 // Current index in _fragIds\n\n        // Default value for _timeSlize and _sliceDelay\n        _timeSlice = _timeSlice || 15;\n        _sliceDelay = _sliceDelay || 0;\n\n        // Start the iterator\n        // models is the array of models to iterate\n        // delay is a delay to start the iteration. < 0 starts without any delay\n        // callback is the callback for each fragment:\n        //   callback(fragId, dbId, model, lastFrag)\n        // lastFrag is a boolean that is true when fragId is the last fragment for dbId.\n        this.start = function(models, delay, callback) {\n            reset(models);\n\n            _callback = callback;\n            if (callback) {\n                if (delay >= 0)\n                    _capTimer = setTimeout(doIteration, delay);\n                else\n                    doIteration();\n            }\n        };\n\n        // Reset the iterator, this is so we can clear the manager at the end.\n        function reset(models) {\n            if (_capTimer)\n                clearTimeout(_capTimer);\n            _capTimer = 0;\n            _models = models;\n            _dbIds.length = 0;\n            _fragIds.length = 0;\n            _instanceTree = null;\n            _m = -1;\n            _d = 0;\n            _f = 0;\n        }\n\n        // Do a single time slice\n        function doIteration() {\n            _capTimer = 0;\n            var endTime = performance.now() + _timeSlice;\n            while (performance.now() < endTime) {\n                // If we are done, then return\n                if (!next()) {\n                    // The cap scene is in sceneAfter, so we need to redraw the model to see the caps.\n                    // LMV-2571 - clear the render, as otherwise we will draw transparent objects atop themselves.\n                    _viewer.invalidate(true, true);\n                    // Clear everything when we are done\n                    reset(null);\n                    return;\n                }\n\n                // Call the call back function\n                _callback(_fragIds[_f], _dbIds[_d], _curModel, _f + 1 >= _fragIds.length, !_models || _m >= _models.length);\n            }\n\n            // Schedule the next time slice\n            _capTimer = setTimeout(doIteration, _sliceDelay);\n        }\n\n        // Advance to the next model in _models\n        function nextModel() {\n            // Continue processing the next model in _models\n            if (_models && _m < _models.length) {\n                // Go to next model\n                while (++_m < _models.length) {\n                    _instanceTree = _models[_m].getInstanceTree();\n                    // Only process the model, if it has a fragment map\n                    if (_instanceTree) {\n                        // Get the list of dbIds.\n                        _dbIds.length = 0;\n                        _instanceTree.enumNodeChildren(_models[_m].getRootId(), function(dbId) {\n                            _dbIds.push(dbId);\n                        }, true);\n                        // Only process the model if we got some ids\n                        if (_dbIds.length > 0) {\n                            // Set the current model and newly loaded dbIds\n                            _curModel = _models[_m];\n                            return _curModel;\n                        }\n                    }\n                }\n            }\n\n            // Done clear the current model and new loaded dbIds\n            _curModel = null;\n\n            // End of the models\n            return false;\n        }\n\n        // Advance to the next database id\n        function nextDbId() {\n            // At the end, return false\n            if (_d >= _dbIds.length)\n                return false;\n\n            // Go to next database id\n            while (++_d < _dbIds.length) {\n                var dbId = _dbIds[_d];\n                // Only process dbIds that are not hidden and not off\n                if (!_instanceTree.isNodeHidden(dbId) && !_instanceTree.isNodeOff(dbId)) {\n                    //All fragments that belong to the same node make part of the\n                    //same object so we have to accumulate all their intersections into one list\n                    _fragIds.length = 0;\n                    _instanceTree.enumNodeFragments(dbId, function(fragId) {\n                        _fragIds.push(fragId);\n                    }, false);\n                    // Only process the database id if there are some fragments\n                    if (_fragIds.length > 0)\n                        return true;\n                }\n            }\n\n            // end of the database ids\n            return false;\n        }\n\n        // Advance to the next fragment\n        function next() {\n            // If we are not a the end of the fragment list, then process it\n            if (++_f < _fragIds.length)\n                return true;\n\n            // Start the fragment list at the beginning\n            _f = 0;\n            for ( ; ; ) {\n                // If we have more database ids, then process them\n                if (nextDbId())\n                    return true;\n                // If we don't have another model, then we are done\n                if (!nextModel())\n                    return false;\n                // restart the database ids for the new model\n                _d = -1;\n            }\n        }\n    }\n\n    // Use the same fragment iterator for all fragments\n    var _fragIterator = new FragmentIterator();\n\n    function updateCapMeshes(plane) {\n\n        const cg = Autodesk.Viewing.Extensions.CompGeom;\n\n        //When drawing a 2D material in 3D space we will want to skip binding the G-buffer\n        //when rendering the scene that contains that material\n        _viewer.sceneAfter.skipDepthTarget = true;\n\n        _removeSections();\n\n        var section3D = new THREE.Object3D();\n        section3D.name = \"section3D\";\n        _viewer.scene.add(section3D);\n        \n        var section2D = new THREE.Object3D();\n        section2D.name = \"section2D\";\n        _viewer.sceneAfter.add(section2D);\n        \n        var toPlaneCoords = cg.makePlaneBasis(plane);\n        var fromPaneCoords = new THREE.Matrix4().getInverse(toPlaneCoords);\n\n        var mat2dname = _viewer.matman().create2DMaterial(null, {skipCircles:true, skipEllipticals:true, isScreenSpace: true}, false, false);\n        var mat2d = _viewer.matman().findMaterial(null, mat2dname);\n        mat2d.transparent = true;\n        mat2d.depthTest = true;\n        mat2d.polygonOffset = true;\n        mat2d.polygonOffsetFactor = -1;\n        mat2d.polygonOffsetUnits = 0.1;    // 1.0 is usually way too high, see LMV-1072\n        mat2d.cutplanes = _otherCutPlanes; // make sure that cap meshes respect cutplanes from other tools\n\n        var box = new THREE.Box3();\n\n        //var worldBox = _viewer.getVisibleBounds(true);   \n        \n        //some heuristic for line width of the section outline based on model size.\n        //half a percent of the model size is what we do here.\n        //var lineWidth = 0.5 * 5e-5 * worldBox.size().length();\n\n        var models = _viewer.modelQueue().getModels();\n\n        var intersects = [];\n        var material;\n\n        function removeMesh(object, modelId, dbId, disposeMaterial) {\n            var child = object.children.find(function(mesh) {\n                return mesh.modelId == modelId && mesh.dbId == dbId;\n            });\n            if (child) {\n                object.remove(child);\n                if (child.geometry)\n                    child.geometry.dispose();\n                if (disposeMaterial && child.material)\n                    child.material.dispose();\n            }\n        }\n\n        // Start iterating the fragments\n        _fragIterator.start(models, 50, function(fragId, dbId, model, lastFrag) {\n\n            // Collect intersections for this fragment\n            var frags = model.getFragmentList();\n            frags.getWorldBounds(fragId, box);\n            if (cg.xBoxPlane(plane, box)) {\n                var m = frags.getVizmesh(fragId);\n\n                if (m.geometry && !m.geometry.is2d && !m.geometry.isLines && m.material.cutplanes) {\n                    material = m.material;\n                    cg.xMeshPlane(plane, m, intersects);\n                }\n            }\n\n            // If this is the last fragment for dbId, process the intersections\n            if (lastFrag) {\n                if (intersects.length) {\n\n                    var bbox = new THREE.Box3();\n                    cg.convertToPlaneCoords(toPlaneCoords, intersects, bbox);\n\n                    //Create the 2D line geometry\n                    var vbb = new avp.VertexBufferBuilder(false, 8 * intersects.length);\n\n                    var color = getDiffuseColor(material);\n                    var r = 0|(color.r * 0.25)*255.5;\n                    var g = 0|(color.g * 0.25)*255.5;\n                    var b = 0|(color.b * 0.25)*255.5;\n\n                    var c = 0xff000000 | (b<<16) | (g<<8) | r;\n\n\n                    var eset = new cg.EdgeSet(intersects, bbox, bbox.size().length() * 1e-6);\n                    eset.snapEdges();\n                    eset.sanitizeEdges();\n                    eset.stitchContours();\n\n                    //Create the 3D mesh\n                    var cset = eset.triangulate();\n\n//Testing code path using the fancier DCEL structure for triangulation of the section edges.\n//TODO: compare quality and performance before switching to this and retiring the EdgeSet code path\n/*\n                    var dcel = new DCEL(bbox, bbox.size().length() * 1e-6);\n                    intersects.forEach(e => {\n                        dcel.addDirectedEdge(e.v1.x, e.v1.y, e.v2.x, e.v2.y, true, dbId);\n                    });\n\n                    dcel.finalize(true);\n\n                    let cset = dcel.closedAreas[0];\n*/\n\n                    if (cset) {\n    /*\n                        if (cset.triangulationFailed)\n                            c = 0xffffff00;\n    */\n\n                        for (let j=0; j<cset.contours.length; j++) {\n\n                            var cntr = cset.contours[j];\n\n                            for (var k=1; k<cntr.length; k++) {\n                                var pt1 = cset.pts[cntr[k-1]];\n                                var pt2 = cset.pts[cntr[k]];\n                                vbb.addSegment(pt1.x, pt1.y, pt2.x, pt2.y, 0, -2.0, /*isClosed ? c : rc*/c, dbId, 0);\n                            }\n\n                        }\n\n\n                        var mdata = { mesh: vbb.toMesh() };\n\n                        avp.BufferGeometryUtils.meshToGeometry(mdata);\n\n                        var bg2d = mdata.geometry;\n                        bg2d.streamingDraw = true;\n                        bg2d.streamingIndex = true;\n\n                        var mesh2d = new THREE.Mesh(bg2d, mat2d);\n\n                        mesh2d.matrix.copy(fromPaneCoords);\n                        mesh2d.matrixAutoUpdate = false;\n                        mesh2d.frustumCulled = false;\n                        mesh2d.modelId = model.id;      // So we can look it up later\n                        mesh2d.dbId = dbId;\n                        section2D.add(mesh2d);\n\n                        //Create triangulated capping polygon\n                        {\n                            if (!cset.triangulationFailed) {\n\n                                var bg = cset.toPolygonMesh(material.packedNormals);\n\n                                var mat = _viewer.matman().cloneMaterial(material, model);\n\n                                mat.packedNormals = material.packedNormals;\n                                mat.cutplanes = _otherCutPlanes; // make sure that cap meshes respect cutplanes from other tools\n                                mat.side = THREE.FrontSide;\n                                mat.depthTest = true;\n                                mat.map = null;\n                                mat.bumpMap = null;\n                                mat.normalMap = null;\n                                mat.alphaMap = null;\n                                mat.specularMap = null;\n                                mat.transparent = false;\n                                mat.depthWrite = true;\n                                mat.hatchPattern = true;\n                                mat.needsUpdate = true;\n\n                                var angle = (material.id+2) * Math.PI * 0.125;\n                                var tan = Math.tan(angle);\n                                mat.hatchParams = new THREE.Vector2(tan, 10.0);\n                                mat.hatchTintColor = _tintColor;\n                                mat.hatchTintIntensity = _tintIntensity;\n\n                                // If the material is prism, clear all the map definitions.\n                                if (mat.prismType != null) {\n                                    mat.defines = {};\n                                    mat.defines[mat.prismType.toUpperCase()] = \"\";\n                                    if (mat.prismType == \"PrismWood\") {\n                                        mat.defines[\"NO_UVW\"] = \"\";\n                                    }\n                                }\n\n                                var capmesh = new THREE.Mesh(bg, mat);\n                                capmesh.matrix.copy(fromPaneCoords);\n                                capmesh.matrixAutoUpdate = false;\n                                capmesh.modelId = model.id;      // So we can look it up later\n                                capmesh.dbId = dbId;\n                                capmesh.fragId = intersects.fragId;\n\n                                section3D.add(capmesh);\n                            }\n\n                        }\n\n                    }\n                }\n\n                // Clear intersections for the next dbId\n                intersects.length = 0;\n            } // last Fragment for dbId\n\n        }); //_fragIterator.start\n\n    }\n\n    // We use an own cut plane set to distinguish our own cut planes from others.\n    var _ownCutPlaneSet = 'Autodesk.Viewing.Extension.Section.SectionTool';\n\n    // Make sure that the viewer always uses the SectionTool's plane to adjust 2D rendering resolution.\n    _viewer.setCutPlaneSetFor2DRendering(_ownCutPlaneSet);\n\n    // Keep track of cutplanes that are not our own, because we have to apply them to our cap meshes\n    var _otherCutPlanes = [];\n\n    // Trigger update of cap mesh materials if number of cutplanes have changed by other tools\n    function updateCapMaterials() {\n\n        function update(section) {\n            // apply cutplanes to all active cap meshes\n            if (!section) {\n                return;\n            }\n\n            section.traverse(function(obj) {\n                // we only care for THREE.Mesh with material\n                if (!obj instanceof THREE.Mesh || !obj.material) {\n                    return;\n                }\n                obj.material.needsUpdate = true;\n            });\n        }\n\n        update(_viewer.scene.getObjectByName(\"section3D\"));\n        update(_viewer.sceneAfter.getObjectByName(\"section2D\"));\n    }\n\n    function createPlaneMesh(plane, bbox) {\n        var quat = new THREE.Quaternion().setFromUnitVectors(new THREE.Vector3(0, 0, 1), plane.normal);\n        var geometry;\n        var size;\n\n        if (bbox) {\n            // project bbox to set plane size\n            var ptMax = plane.projectPoint(bbox.max);\n            var ptMin = plane.projectPoint(bbox.min);\n            var invQuat = quat.clone().inverse();\n            ptMax.applyQuaternion(invQuat);\n            ptMin.applyQuaternion(invQuat);\n            size = new THREE.Vector3().subVectors(ptMax, ptMin);\n            geometry = new THREE.PlaneBufferGeometry(size.x, size.y);\n        } else {\n            // project bounding sphere\n            bbox = _viewer.getVisibleBounds();\n            size = 2.0 * bbox.getBoundingSphere().radius;\n            geometry = new THREE.PlaneBufferGeometry(size, size);\n        }\n\n        var material = new THREE.MeshBasicMaterial({\n            opacity: 0,\n            color: _selectionColor,\n            side: THREE.DoubleSide,\n            depthTest: false,\n            depthWrite: false,\n            transparent: true\n        });\n\n        var mesh = new SectionMeshClass(geometry, material, plane);\n        var pt = plane.projectPoint(bbox.center());       \n        mesh.position.copy(pt);\n        mesh.quaternion.multiply(quat);\n\n        // add outlines with inverted background color\n        var presetIndex = _viewer.currentLightPreset();\n        presetIndex = Math.max(0, presetIndex);\n        var bgColor = Autodesk.Viewing.Private.LightPresets[presetIndex].bgColorGradient;\n        var color = \"rgb(\" + (255-bgColor[0]) + \",\" + (255-bgColor[1]) + \",\" + (255-bgColor[2]) + \")\";\n        var lineMaterial = new THREE.LineBasicMaterial({color: color, linewidth:1, depthTest: false});\n        var pos = mesh.geometry.getAttribute('position');\n        for (var i = 0; i < _outlineIndices.length; i++) {\n            geometry = new THREE.Geometry();\n            geometry.vertices.push(new THREE.Vector3().fromArray(pos.array, _outlineIndices[i][0] * pos.itemSize),\n                                   new THREE.Vector3().fromArray(pos.array, _outlineIndices[i][1] * pos.itemSize));\n            var line = new THREE.Line(geometry, lineMaterial);\n            mesh.add(line);\n            mesh.outlines.push(line);\n        }\n\n        return mesh;\n    }\n\n    function updatePlaneMeshes(rebuild) {\n    \n        traverseSections(function(child) {\n            if (child instanceof SectionMeshClass) {\n\n                var i, line, pos, pt;\n                if (child.connectivity.length > 0) {\n                    // section box\n                    var minv = new THREE.Matrix4().getInverse(child.matrixWorld);\n                    pt = new THREE.Vector3();\n                    pos = child.geometry.getAttribute('position');\n                    for (i = 0; i < pos.length / pos.itemSize; i++) {\n                        var connect = child.connectivity[i];\n                        if (intersectPlanes(child.plane, connect[0], connect[1], pt) !== null) {\n                            pt.applyMatrix4(minv);\n                            pos.setXYZ(i, pt.x, pt.y, pt.z);\n                        }\n                    }\n                    pos.needsUpdate = true;\n                    child.geometry.computeBoundingBox();\n                    child.geometry.computeBoundingSphere();\n\n                    for (i = 0; i < child.outlines.length; i++) {\n                        line = child.outlines[i];\n                        line.geometry.vertices[0].fromArray(pos.array, _outlineIndices[i][0] * pos.itemSize);\n                        line.geometry.vertices[1].fromArray(pos.array, _outlineIndices[i][1] * pos.itemSize);\n                        line.geometry.verticesNeedUpdate = true;\n                    }\n                } else {\n                    // section plane\n                    if (rebuild) {\n                        var bbox = _viewer.getVisibleBounds();\n                        var size = 2.0 * bbox.getBoundingSphere().radius;\n                        pt = child.plane.projectPoint(bbox.center());\n                        child.geometry = new THREE.PlaneBufferGeometry(size, size);\n                        child.position.copy(pt);\n                        pos = child.geometry.getAttribute('position');\n                        for (i = 0; i < child.outlines.length; i++) {\n                            line = child.outlines[i];\n                            line.geometry.vertices[0].fromArray(pos.array, _outlineIndices[i][0] * pos.itemSize);\n                            line.geometry.vertices[1].fromArray(pos.array, _outlineIndices[i][1] * pos.itemSize);\n                            line.geometry.verticesNeedUpdate = true;\n                        }\n                    }\n                }\n            }\n        });\n    }\n\n    function traverseSections(callback) {\n        for (var i = 0; i < _sectionGroups.length; i++) {           \n            _sectionGroups[i].traverse(callback);\n        }\n    }\n\n    function setSectionPlanes(fireEvent=true) {\n        traverseSections(function(child) {\n            if (child instanceof SectionMeshClass) {\n                child.update();\n            }\n        });\n        if (_sectionPlanes.length === 1) {\n            updateCapMeshes(new THREE.Plane().setComponents(_sectionPlanes[0].x, _sectionPlanes[0].y, _sectionPlanes[0].z, _sectionPlanes[0].w));\n        }\n        _viewer.setCutPlaneSet(_ownCutPlaneSet, _sectionPlanes, fireEvent);\n    }\n\n    function showPlane(set) {\n        for (var i = 0; i < _sectionGroups.length; i++) {\n            _sectionGroups[i].visible = set;\n        }\n        \n        if (_isPlaneOn !== set)\n            updateViewer();\n\n        _isPlaneOn = set;\n    }\n\n    function showSection(set) {\n        if (set && _sectionPlanes.length > 0) {\n            if (_sectionPlanes.length === 1) {\n                updateCapMeshes(new THREE.Plane().setComponents(_sectionPlanes[0].x, _sectionPlanes[0].y, _sectionPlanes[0].z, _sectionPlanes[0].w));\n            }\n            _viewer.setCutPlaneSet(_ownCutPlaneSet, _sectionPlanes);\n        }\n        showPlane(set);\n    }\n\n    function attachControl(control, mesh) {\n        control.attach(mesh);\n        control.setPosition(mesh.position);\n        control.visible = true;\n    }\n\n    function checkNormal(normal) {\n        // flip normal if facing inward as eye direction\n        var eyeVec = _viewer.api.navigation.getEyeVector();\n        if (eyeVec.dot(normal) > 0) {\n            normal.negate();\n        }\n\n        return normal;\n    }\n\n    function setPlane(normal, distance, fireEvent=true) {\n        var obbox = _viewer.getVisibleBounds();\n        var center = obbox.center();\n        var group = new THREE.Group();\n        // Calculate the plane signed distance using the dot product of the center point of the scene bounding box\n        // and the normal vector.\n        distance = (distance !== undefined) ? distance : -1 * center.dot(normal);\n        var plane = new THREE.Plane(normal, distance);\n        var mesh = createPlaneMesh(plane, null);\n        group.add(mesh);\n        _sectionPlanes.push(mesh.planeVec);\n        _sectionGroups.push(group);\n        _viewer.addOverlay(_overlayName, group);\n        if (_transRotControl) {\n            attachControl(_transRotControl, mesh);\n            mesh.material.opacity = 0;\n            centerPlaneArrow(mesh);\n            _transRotControl.showRotationGizmos(true);\n            _sectionPicker = _transRotControl.getPicker();\n            \n        }\n        setSectionPlanes(fireEvent);\n        if (_active) {\n            updateControls();\n        }\n    }\n\n    function getCenterPoint(mesh) {\n        var middle = new THREE.Vector3();\n        var geometry = mesh.geometry;\n    \n        geometry.computeBoundingBox();\n    \n        middle.x = (geometry.boundingBox.max.x + geometry.boundingBox.min.x) / 2;\n        middle.y = (geometry.boundingBox.max.y + geometry.boundingBox.min.y) / 2;\n        middle.z = (geometry.boundingBox.max.z + geometry.boundingBox.min.z) / 2;\n    \n        mesh.localToWorld( middle );\n        return middle;\n    }\n\n    /**\n     * Places the arrow at the center of the passed in mesh.\n     * @param {*} mesh \n     */\n    function centerPlaneArrow(mesh) {\n        if (!_transRotControl || !mesh) return false;\n        // Get the center of the plane and \n        // calculate the x,y,z offset between the plane position and the plane center\n        var centerOffset = getCenterPoint(mesh).sub(mesh.position);\n        centerOffset.sub(_trcOffset);\n        // Set the gizmo offset\n        _transRotControl.setGizmoOffset(centerOffset);\n        return true;\n    }\n\n    function setBox(planeSet) {\n        var normals = [\n            new THREE.Vector3(1, 0, 0), \n            new THREE.Vector3(0, 1, 0), \n            new THREE.Vector3(0, 0, 1),\n            new THREE.Vector3(-1, 0, 0),\n            new THREE.Vector3(0, -1, 0),\n            new THREE.Vector3(0, 0, -1)\n        ];\n\n        var connectivities = [\n            [[1, 2], [1, 5], [2, 4], [4, 5]], // 0\n            [[3, 5], [0, 5], [2, 3], [0, 2]], // 1\n            [[1, 3], [0, 1], [3, 4], [0, 4]], // 2\n            [[1, 5], [1, 2], [4, 5], [2, 4]], // 3\n            [[2, 3], [0, 2], [3, 5], [0, 5]], // 4\n            [[0, 1], [3, 1], [0, 4], [3, 4]]  // 5\n        ];\n\n        var group = new THREE.Group();\n        var obbox = _viewer.getVisibleBounds();\n        var center = obbox.center();\n        var bbox = new THREE.Box3(obbox.min, center);\n        \n        // Initialize from planeSet ONLY if it's an AABB.\n        var loadingBox = false;\n        if (planeSet && planeSet.length === 6 && planeSet[0].x === 1.0) {\n            // Assume that the order on planes is the same as in Array of normals defined above\n            bbox = new THREE.Box3(\n                new THREE.Vector3(planeSet[3].w, planeSet[4].w, planeSet[5].w),\n                new THREE.Vector3(planeSet[0].w, planeSet[1].w, planeSet[2].w)\n            );\n            center = bbox.max.clone();\n            loadingBox = true;\n        }\n\n        ////center = obbox.max;   // Use this to initialize the box around the model\n        ////bbox = obbox.clone(); // Use this to initialize the box around the model\n\n        var planes = [], meshes = [];\n        var i, mesh;\n        for (i = 0; i < normals.length; i++) {\n\n            if (loadingBox) {\n                var plane = new THREE.Plane(normals[i], planeSet[i].w);\n                planes.push(plane);\n            }\n            else \n            {\n                var plane = new THREE.Plane(normals[i], -1 * center.dot(normals[i]));\n                planes.push(plane);\n\n                // offset plane with negative normal to form an octant\n                if (i > 2) {\n                    var ptMax = plane.orthoPoint(bbox.max);\n                    var ptMin = plane.orthoPoint(bbox.min);\n                    var size = new THREE.Vector3().subVectors(ptMax, ptMin);\n                    plane.constant -= size.length();\n                }\n            }\n\n            mesh = createPlaneMesh(plane, bbox);\n            group.add(mesh);\n            meshes.push(mesh);\n            _sectionPlanes.push(mesh.planeVec);\n        }\n\n        // build connectivity\n        for (i = 0; i < meshes.length; i++) {\n            mesh = meshes[i];\n            var connectivity = connectivities[i];\n            for (var j = 0; j < connectivity.length; j++) {\n                var nc = [];\n                var ct = connectivity[j];\n                for (var k = 0; k < ct.length; k++) {\n                    nc.push(planes[ct[k]]);\n                }\n                mesh.connectivity.push(nc);\n            }\n        }\n        \n        _sectionGroups.push(group);\n        _viewer.addOverlay(_overlayName, group);\n\n        setSectionPlanes();\n        updatePlaneMeshes();\n\n        var plane = _sectionGroups[0].children[0];\n        attachControl(_transRotControl, plane);\n        // Set the plane opacity\n        plane.material.opacity = _selectionOpacity;\n        centerPlaneArrow(plane);\n\n        attachControl(_transControl, _sectionGroups[0]);\n        _transRotControl.showRotationGizmos(false);\n        _sectionPicker = _transRotControl.getPicker().concat(_transControl.getPicker());\n        // Calculate the offset to the max point of the bounding box.\n        var sectionBoxPosition = _sectionGroups[0].position.clone();\n        var cornerOffset = sectionBoxPosition.sub(center.clone());\n        _transControl.setGizmoOffset(cornerOffset);\n    }\n\n    var intersectPlanes = (function () {\n        var m = new THREE.Matrix3();\n        var n23 = new THREE.Vector3();\n        var n31 = new THREE.Vector3();\n        var n12 = new THREE.Vector3();\n        return function(plane1, plane2, plane3, optionalTarget) {\n            m.set(plane1.normal.x, plane1.normal.y, plane1.normal.z,\n                  plane2.normal.x, plane2.normal.y, plane2.normal.z,\n                  plane3.normal.x, plane3.normal.y, plane3.normal.z);\n            \n            var det = m.determinant();\n            if (det === 0) return null;\n\n            n23.crossVectors(plane2.normal, plane3.normal).multiplyScalar(-plane1.constant);\n            n31.crossVectors(plane3.normal, plane1.normal).multiplyScalar(-plane2.constant);\n            n12.crossVectors(plane1.normal, plane2.normal).multiplyScalar(-plane3.constant);\n\n            var result = optionalTarget || new THREE.Vector3();\n            return result.copy(n23).add(n31).add(n12).divideScalar(det);\n        };\n    })();\n\n    var intersectObjects = function(pointer, objects, recursive) {\n        return THREE.TransformControls.intersectObjects(pointer.canvasX, pointer.canvasY, objects, _viewer.camera, recursive);\n    };\n        \n    // public functions\n\n    /**\n     * When active, the geometry will be sectioned by the current set cut plane.\n     * @returns {boolean}\n     */\n    this.isActive = function() {\n        return _active;\n    };\n\n    /**\n     * Returns the signed distance of the sectioning plane from the origin\n     * @returns {Number} distance. Null distance is returned if there is no hit found from raycast\n     */\n    this.getSectionDistance = function(normal) {\n        // Find a target point in the direction of the camera \n        var eyeVec = _viewer.api.navigation.getEyeVector();\n        var hit = _viewer.rayIntersect(new THREE.Ray(_viewer.camera.position, eyeVec));\n        // DIstance\n        return hit && hit.intersectPoint && -1 * hit.intersectPoint.dot(normal);\n    };\n\n    /**\n     * Enables the cut planes that were created by the viewer.setCutPlanes() function.\n     * @param {boolean} [fireEvent] - if set to false the av.CUTPLANES_CHANGE_EVENT event will not be fired.\n     */\n    this.setViewerSection = function(fireEvent=true) {\n        this.clearSection(fireEvent);\n        var normal;\n        // Attempt to initialize the tool with a plane that is already set.\n        var planeSet = _viewer.getCutPlaneSet('__set_view');\n        if (planeSet.length !== 1) return;\n\n        _transRotControl.clientScale = 1;\n        var v4 = planeSet[0];\n        var normal = new THREE.Vector3(v4.x, v4.y, v4.z);\n        var distance = v4.w;\n        setPlane(normal, distance, fireEvent);\n        _activeMode = 'SET_VIEW_PLANE';\n        // Clear sections from Viewer3D::setView\n        _viewer.setCutPlaneSet('__set_view', undefined, fireEvent);        \n    };\n\n    \n\n    /**\n     * Facilitates the initialization of a cut plane\n     * \n     * @param {String} name - Either 'X', 'Y', 'Z' or 'BOX'\n     */\n    this.setSection = function(name) {\n        this.clearSection();\n        _trcOffset = new THREE.Vector3();\n        var normal, distance;\n        _transRotControl.clientScale = 1;\n\n        // Attempt to initialize the tool with a plane that is already set.\n        var planeSet = _viewer.getCutPlaneSet('__set_view');\n        if (planeSet.length === 1 && name !== 'BOX' && name !== 'OBJ_SET_VIEW_PLANE') {\n            name = 'SET_VIEW_PLANE';\n        }\n        \n        switch (name) {\n            case 'X':\n                normal = new THREE.Vector3(1, 0, 0);\n                distance = this.getSectionDistance(normal);\n                setPlane(checkNormal(normal), distance);\n                break;\n            case 'Y':\n                normal = new THREE.Vector3(0, 1, 0);\n                distance = this.getSectionDistance(normal);\n                setPlane(checkNormal(normal), distance);\n                break;\n            case 'Z':\n                normal = new THREE.Vector3(0, 0, 1);\n                distance = this.getSectionDistance(normal);\n                setPlane(checkNormal(normal), distance);\n                break;\n            case 'OBJ_SET_VIEW_PLANE':\n            case 'SET_VIEW_PLANE':\n                var v4 = planeSet[0];\n                normal = new THREE.Vector3(v4.x, v4.y, v4.z);\n                setPlane(normal, v4.w);\n                break;\n            case 'OBJ_BOX':\n            case 'BOX':\n                setBox(planeSet);\n                _transRotControl.clientScale = 2;\n                this.recomputePivot();\n                break;\n        }\n        _activeMode = name;\n        \n        // Clear sections from Viewer3D::setView\n        _viewer.setCutPlaneSet('__set_view', undefined);\n    };\n\n    /**\n     * Facilitates the initialization of a cut plane from a normal and distance\n     *\n     * @param {THREE.Vector4} normal (x,y,z) and distance (w)\n     * @param {Number} distance\n     */\n    this.setSectionFromPlane = function(cutplane) {\n        this.clearSection();\n        setPlane(new THREE.Vector3(cutplane.x, cutplane.y, cutplane.z), cutplane.w);\n        _activeMode = \"\";\n\n        // Clear sections from Viewer3D::setView\n        _viewer.setCutPlaneSet('__set_view', undefined);\n    };\n\n    /**\n     * Set the active mode\n     * @param {string} [name] - active mode name\n     * @private\n     */\n    this.setActiveMode = function(name) {\n        _activeMode = name || \"\";\n    }\n\n    /**\n     * Remove the section graphics\n     */\n    function _removeSections() {\n        var oldsection3D = _viewer.scene.getObjectByName(\"section3D\");\n        if (oldsection3D)\n            _viewer.scene.remove(oldsection3D);\n        var oldsection2D = _viewer.sceneAfter.getObjectByName(\"section2D\");\n        if (oldsection2D)\n            _viewer.sceneAfter.remove(oldsection2D);\n    }\n\n    /**\n     * Removes any (and all) currently set cut plane(s).\n     * @param {boolean} [fireEvent] - if set to false the av.CUTPLANES_CHANGE_EVENT event will not be fired.\n     */\n    this.clearSection = function(fireEvent=true) {\n\n        if (_transRotControl)\n            _transRotControl.detach();\n\n        if (_transControl)\n            _transControl.detach();\n\n        // remove all sections\n        while(_sectionPlanes.length > 0) {\n            _sectionPlanes.pop();\n        }\n\n        while(_sectionGroups.length > 0) {\n            var group = _sectionGroups.pop();\n            _viewer.removeOverlay(_overlayName, group);\n        }\n\n        _fragIterator.start(null);      // Shutdown iterator        \n        _removeSections();\n\n        _viewer.setCutPlaneSet(_ownCutPlaneSet, null, fireEvent);\n    };\n\n    this.isPlaneOn = function() {\n        return _isPlaneOn;\n    };\n\n    this.showPlane = function(set) {\n        showPlane(set);\n    };\n\n    /**\n     * Whether translation and rotation controls are visible or not.\n     * @param {Boolean} set\n     */\n    this.attachControl = function(set) {\n        if (!_transRotControl || !_transControl) {\n            return;\n        }\n\n        if (set) {\n            attachControl(_transRotControl, _sectionGroups[0].children[0]);\n            _transRotControl.highlight();\n            if (_activeMode === 'BOX')\n                attachControl(_transControl, _sectionGroups[0]);\n        } else {\n            _transRotControl.detach();\n            _transControl.detach();\n        }\n    };\n\n    /**\n     * Invokes setSection with the last set of parameters used.\n     */\n    this.resetSection = function() {\n        this.setSection(_activeMode);\n    };\n\n    // tool interface\n\n    this.getNames = function() {\n        return _names;\n    };\n\n    this.getName = function() {\n        return _names[0];\n    };\n\n    this.register = function() {\n    };\n\n    this.deregister = function() {\n        this.clearSection();\n        deinitControl();\n    };\n\n    this.getPriority = function() {\n        return _priority;\n    };\n\n    /**\n     * [ToolInterface] Activates the tool\n     * @param {String} name - unused\n     */\n    this.activate = function(/*name*/) {\n\n        initControl();\n\n        _active = true;\n        _isDragging = false;\n        _visibleAtFirst = true;\n\n        // keep only one section all the time per design\n        _sectionPlanes = _sectionPlanes || [];\n\n        showSection(true);\n    };\n\n    /**\n     * [ToolInterface] Deactivates the tool\n     * @param {String} name - unused\n     */\n    this.deactivate = function(/*name*/) {\n        _active = false;\n        _isDragging = false;\n\n        _fragIterator.start(null);      // Shutdown iterator        \n        _removeSections();\n\n\n        showSection(false);\n        _viewer.setCutPlaneSet(_ownCutPlaneSet);\n        _transRotControl.detach();\n        _transControl.detach();\n    };\n\n    this.update = function(/*highResTimestamp*/) {\n        return false;\n    };\n\n    this.handleSingleClick = function(event/*, button*/) {\n        var pointer = event;\n        var result = intersectObjects(pointer, _sectionGroups[0].children);\n        _sectionGroups[0].children.forEach(function(child) {\n            child.material.opacity = 0;\n        })\n        \n        if (result) {\n            attachControl(_transRotControl, result.object);\n            _transRotControl.highlight();\n            result.object.material.opacity = _sectionPlanes.length > 1 ? _selectionOpacity : 0;\n            updateViewer();\n        }\n\n        return false;\n    };\n\n    this.handleDoubleClick = function(/*event, button*/) {\n        return false;\n    };\n\n    this.handleSingleTap = function(event) {\n        return this.handleSingleClick(event, 0);\n    };\n\n    this.handleDoubleTap = function(/*event*/) {\n        return false;\n    };\n\n    this.handleKeyDown = function(/*event, keyCode*/) {\n        return false;\n    };\n\n     this.handleKeyUp = function(/*event, keyCode*/) {\n        return false;\n    };\n\n    this.handleWheelInput = function(/*delta*/) {\n        return false;\n    };\n\n    this.handleButtonDown = function(event/*, button*/) {\n        _isDragging = true;\n        if (_transControl.onPointerDown(event))\n            return true;\n        return _transRotControl.onPointerDown(event);\n    };\n\n    this.handleButtonUp = function(event/*, button*/) {\n        _isDragging = false;\n        if (_boxChanged) {\n            _boxChanged = false;\n            this.recomputePivot();\n        }\n        if (_transControl.onPointerUp(event))\n            return true;\n        return _transRotControl.onPointerUp(event);\n    };\n\n    this.handleMouseMove = function(event) {\n        var oldTransControlPos = _transControl.object ? new THREE.Vector3().copy(_transControl.object.position) : null;\n        // var oldMaxPoint = _transControl.object ? getMaxPoint(_transControl.object) : null;\n        if (_isDragging) {\n            if (_transControl.onPointerMove(event) ) {\n                _boxChanged = true;\n                setSectionPlanes();\n                _transRotControl.update();\n                // Keep track of the section box offset\n                var boxOffset = new THREE.Vector3().copy(_transControl.object.position).sub(oldTransControlPos);\n                // Add the box offset to the section plane offset\n                _trcOffset.add(boxOffset);\n\n                sendAnalyticsDebounced('Canvas', 'Box', 'translate')\n\n                return true;\n            }\n            if (_transRotControl.onPointerMove(event)) {\n                _boxChanged = true;\n                setSectionPlanes();\n                updatePlaneMeshes();\n                // TODO: Try to position the triad to the max corner of the section box when moving the plane arrow.\n                // Currently, it is positioned at the max point of the section box.\n\n                if ( _activeMode.includes('BOX') )\n                    sendAnalyticsDebounced('Canvas', 'Box', 'transform');\n                else {\n                    const mode = _transRotControl.axis.search(\"R\") != -1 ? \"rotate\" : \"translate\";\n                    sendAnalyticsDebounced('Canvas', 'Plane', mode);\n                }\n\n                return true;\n            }\n        }\n\n        _transControl.visible = _transControl.object !== undefined;\n\n        if (event.pointerType !== 'touch') {\n            var pointer = event;\n            var result = intersectObjects(pointer, _sectionGroups[0].children);\n            if (result) {\n                _visibleAtFirst = false;\n            }\n\n            // show gizmo + plane when intersecting on non-touch \n            var visible = _visibleAtFirst || (result || intersectObjects(pointer, _sectionPicker, true)) ? true : false;\n            _transRotControl.visible = visible;\n            _transControl.visible = _transControl.visible && visible;\n            showPlane(visible);\n        }\n\n        if (_transControl.onPointerHover(event))\n            return true;\n\n        return _transRotControl.onPointerHover(event);\n    };\n\n    this.handleGesture = function(event) {\n        switch (event.type) {\n            case \"dragstart\":\n                _touchType = \"drag\";\n                // Single touch, fake the mouse for now...\n                return this.handleButtonDown(event, 0);\n\n            case \"dragmove\":\n                return (_touchType === \"drag\") ? this.handleMouseMove(event) : false;\n\n            case \"dragend\":\n                if (_touchType === \"drag\") {\n                    _touchType = null;\n                    return this.handleButtonUp(event, 0);\n                }\n                return false;\n        }\n        return false;\n    };\n\n    this.handleBlur = function(/*event*/) {\n        return false;\n    };\n\n    this.handleResize = function() {\n    };\n\n    this.handlePressHold = function(/*event*/) {\n        // When this method returns true, it will not call the DefaultHandler's handlePressHold.\n        // This makes it not possible to open the context menu on mobile.\n        return false;\n    };\n\n    this.recomputePivot = function() {\n\n        var values = this.getSectionBoxValues(true);\n        if (!values) return;\n\n        var aabb = values.sectionBox;\n\n        _viewer.api.navigation.setPivotPoint(new THREE.Vector3(\n            aabb[0] + (aabb[3] - aabb[0]) * 0.5,\n            aabb[1] + (aabb[4] - aabb[1]) * 0.5,\n            aabb[2] + (aabb[5] - aabb[2]) * 0.5,\n        ));\n    };\n\n    this.getSectionBoxValues = function(ignoreGlobalOffset) {\n\n        var group = _sectionGroups[0];\n        if (!group) {\n            return null;\n        }\n\n        var planes = group.children;\n        if (planes.length < 6) {\n            return null;\n        }\n\n        var right = planes[0].position.x;\n        var top   = planes[1].position.y;\n        var front = planes[2].position.z;\n        var left  = planes[3].position.x;\n        var bttm  = planes[4].position.y;\n        var back  = planes[5].position.z;\n\n        var off = {x:0, y:0, z:0};\n        if (!ignoreGlobalOffset) {\n            off = _viewer.model.getData().globalOffset || off;\n        } \n        \n        var aabb = [\n            Math.min(left, right)   + off.x, \n            Math.min(top,bttm)      + off.y, \n            Math.min(front,back)    + off.z,\n            Math.max(left, right)   + off.x, \n            Math.max(top,bttm)      + off.y, \n            Math.max(front,back)    + off.z,\n        ];\n\n        // Box doesn't support rotation at the moment.\n        // Will have to take it into account if that becomes a feature.\n        var transform = new THREE.Matrix4().identity().toArray();\n        \n        return {\n            sectionBox: aabb,\n            sectionBoxTransform: transform,\n        }\n    };\n\n    this.getSectionPlaneValues = function(ignoreGlobalOffset) {\n\n        var group = _sectionGroups[0];\n        if (!group) {\n            return null;\n        }\n\n        var planes = group.children;\n        if (planes.length !== 1) {\n            return null;\n        }\n\n        var off = {x:0, y:0, z:0};\n        if (!ignoreGlobalOffset) {\n            off = _viewer.model.getData().globalOffset || off;\n        }\n\n        var plane = planes[0].plane;\n        var constant = plane.constant - THREE.Vector3.prototype.dot.call( off, plane.normal );\n\n        return {\n            sectionPlane: [\n                plane.normal.x,\n                plane.normal.y,\n                plane.normal.z,\n                constant\n            ]\n        }\n    };\n    \n    this.getSectionPlaneSet = function() {\n        return _viewer.getCutPlaneSet(_ownCutPlaneSet);  \n    };\n    \n    this.getSectionPlanes = function() {\n        // When restoring a viewer state it is put in __set_view, so return from that set\n        // However, the notifyCutplanesChanged function can call setViewerSection which would\n        // move the planes from __set_view into _ownCutPlaneSet\n        const viewSet = _viewer.getCutPlaneSet('__set_view');\n        if (viewSet.length > 0) {\n            return viewSet;\n        }\n\n        return _viewer.getCutPlaneSet(_ownCutPlaneSet);\n    };\n\n    // Called by viewer if any cutplanes are modified. It makes sure that cutplanes controlled by separate tools\n    // (with own cutplane sets) are considered by our cap meshes.\n    this.notifyCutplanesChanged = function() {\n\n        var numCutPlanesBefore = _otherCutPlanes.length;\n\n        // Collect all active cutplanes from other tools\n        //\n        // NOTE: It's essential that we don't create a new array, but just refill the same one.\n        //       Since the cap meshes are created async, the cutPlaneChange event may come in the middle of\n        //       the cap mesh generation. For consistency, we want all cap meshes to share the same cutplane array.\n        _otherCutPlanes.length = 0;\n        var cpSets = _viewer.getCutPlaneSets();\n        for (var i=0; i<cpSets.length; i++) {\n\n            // skip our own cut planes\n            var cpName = cpSets[i];\n            if (cpName === _ownCutPlaneSet) {\n                continue;\n            }\n\n            // add cutplanes of this set\n            var cp = _viewer.getCutPlaneSet(cpName);\n            for (var j = 0; j < cp.length; j++) {\n                _otherCutPlanes.push(cp[j]);\n            }\n        }\n\n        // Set the section tool to the viewer defined cutplane.\n        if (cpSets.includes(\"__set_view\") && _activeMode !== \"\" && _activeMode.indexOf(\"OBJ_\") === -1) {\n            this.setViewerSection(false);\n        }\n\n        // If the number of cutplanes changed, this requires a shader recompile of the cap materials\n        if (numCutPlanesBefore !== _otherCutPlanes.length) {\n            updateCapMaterials();\n        }\n    };\n\n    /**\n     * Set a section box around the passed in bounding box.\n     * @param {THREE.Box3} box\n     * @returns {boolean} - true if the section box was set\n     */\n    this.setSectionBox = function(box) {\n        if (!box) return false;\n        const name = 'OBJ_BOX';        \n        // Convert the bounding box to planes\n        const planes = Autodesk.Viewing.Private.SceneMath.box2CutPlanes(box, box.transform);\n        _activeMode = name;\n        _viewer.setCutPlaneSet('__set_view', planes);\n        this.setSection(name);\n        return true;\n    };\n\n    /**\n     * Set a section plane at the intersection position.\n     * @param {Three.Vector3} normal - plane normal.\n     * @param {Three.Vector3} position - position to place the plane.\n     * @returns {boolean} - true if the section plane was set\n     */\n    this.setSectionPlane = function(normal, position, enableRotationGizmo = true) {\n        if (!normal || !position) return false;\n        const name = 'OBJ_SET_VIEW_PLANE'\n        const distance = -1 * position.dot(normal);\n        const plane = new THREE.Plane(normal, distance);\n        _activeMode = name;\n        const planeVecs = [new THREE.Vector4(plane.normal.x, plane.normal.y, plane.normal.z, plane.constant)];\n        _viewer.setCutPlaneSet('__set_view', planeVecs);\n        this.setSection(name);\n        // RotationGizmos are turned on by default.\n        // The option to disable it, is for cases like activating the section tool from the context menu.\n        _transRotControl?.showRotationGizmos(enableRotationGizmo);\n        const pos = position.clone().sub(_sectionGroups[0].children[0].position);\n        _transRotControl.setGizmoOffset(pos);\n        \n        return true;\n    };\n};\n\nfunction init_SectionMesh() {\n\n    if (SectionMeshClass)\n        return;\n\n    SectionMeshClass = function(geometry, material, plane) {\n\n        THREE.Mesh.call(this, geometry, material, false);\n\n        this.plane = plane;\n        this.planeVec = new THREE.Vector4(plane.normal.x, plane.normal.y, plane.normal.z, plane.constant);\n        this.connectivity = [];\n        this.outlines = [];\n    };\n\n    SectionMeshClass.prototype = Object.create(THREE.Mesh.prototype);\n    SectionMeshClass.prototype.constructor = SectionMeshClass;\n\n    SectionMeshClass.prototype.update = function() {\n\n        this.plane.normal.set(0, 0, 1);\n        this.plane.normal.applyQuaternion(this.quaternion);\n\n        var normal = this.plane.normal;\n        var d = -1 * this.getWorldPosition().dot(normal);\n        this.planeVec.set(normal.x, normal.y, normal.z, d);\n        this.plane.constant = d;\n    };\n\n}\n\n","import { SectionTool } from './SectionTool'\nimport CSS from './Section.css'\n\n\nconst analytics = Autodesk.Viewing.Private.analytics;\n\n/**\n * The SectionExtension provides ways to cut the geometry using planes or a cube.\n * The extension adds a toolbar button to access the feature. \n * \n * The extension id is: `Autodesk.Section`\n * \n * @example\n *   viewer.loadExtension('Autodesk.Section')\n * \n * @memberof Autodesk.Viewing.Extensions\n * @alias Autodesk.Viewing.Extensions.SectionExtension\n * @see {@link Autodesk.Viewing.Extension} for common inherited methods.\n * @constructor\n */\nexport var SectionExtension = function(viewer, options) {\n    Autodesk.Viewing.Extension.call(this, viewer, options);\n    this.viewer = viewer;\n    this.name = 'section';\n    this.modes = ['x','y','z','box'];\n\n    this.onViewerSetView = this.onViewerSetView.bind(this);\n    this._onCutPlanesChanged = this._onCutPlanesChanged.bind(this);\n    this._onShowAll = this._onShowAll.bind(this);\n};\n\nSectionExtension.prototype = Object.create(Autodesk.Viewing.Extension.prototype);\nSectionExtension.prototype.constructor = SectionExtension;\n\nvar proto = SectionExtension.prototype;\n\n/**\n * Registers the SectionTool, hotkeys and event handlers.\n *\n * @returns {boolean}\n */\nproto.load = function() {\n    var that = this;\n    var viewer = this.viewer;\n\n    this.tool = new SectionTool(viewer, {\n        tintColor: { r: 1, g: 1, b: 0 },\n        tintIntensity: 0.2\n    });\n    viewer.toolController.registerTool(this.tool);\n    this.sectionStyle = null;\n    this.supportedStyles = [\"X\", \"Y\", \"Z\", \"BOX\"];\n\n    viewer.addEventListener(Autodesk.Viewing.SET_VIEW_EVENT, this.onViewerSetView);\n\n    // consider cutplane changes of other tools, so that cap meshes consider them too\n    viewer.addEventListener(Autodesk.Viewing.CUTPLANES_CHANGE_EVENT, this._onCutPlanesChanged);\n    viewer.addEventListener(Autodesk.Viewing.SHOW_ALL_EVENT, this._onShowAll);\n\n    this.HOTKEYS_ID = \"Autodesk.Section.Hotkeys\";\n    var hotkeys = [{\n        keycodes: [\n            Autodesk.Viewing.KeyCode.ESCAPE\n        ],\n        onRelease: function () {\n            if (that.viewer.getAggregateSelection().length === 0)\n                return that.deactivate();\n        }\n    }];\n    viewer.getHotkeyManager().pushHotkeys(this.HOTKEYS_ID, hotkeys);\n\n    // Invoked when the context menu is about to get opened.\n    this.viewer.registerContextMenuCallback('Autodesk.Section', (menu, status) => {\n        onContextMenu(this, menu, status);\n    });\n\n    //Load the required dependency (and return the pending load as the load completion Promise)\n    return this.viewer.loadExtension('Autodesk.CompGeom');\n};\n\n/**\n * Unregisters the SectionTool, hotkeys and event handlers.\n *\n * @returns {boolean}\n */\nproto.unload = function () {\n    var viewer = this.viewer;\n\n    viewer.unregisterContextMenuCallback('Autodesk.Section');\n\n    // remove hotkey\n    viewer.getHotkeyManager().popHotkeys(this.HOTKEYS_ID);\n\n    this.destroyUI();\n\n    viewer.removeEventListener(Autodesk.Viewing.SET_VIEW_EVENT, this.onViewerSetView);\n    viewer.removeEventListener(Autodesk.Viewing.CUTPLANES_CHANGE_EVENT, this._onCutPlanesChanged);\n    viewer.removeEventListener(Autodesk.Viewing.SHOW_ALL_EVENT, this._onShowAll);\n\n    viewer.toolController.deregisterTool(this.tool);\n    this.tool = null;\n\n    return true;\n};\n\n/**\n * Toggles activeness of section planes.\n * @returns {boolean} Whether the section plane is active or not.\n * @alias Autodesk.Viewing.Extensions.SectionExtension#toggle\n */\nproto.toggle = function() {\n    if (this.isActive()) {\n        this.enableSectionTool(false);\n    } else {\n        var style = this.sectionStyle || \"X\";\n        this.setSectionStyle(style, true);\n    }\n    return this.isActive(); // Need to check for isActive() again.\n};\n\n/**\n * Returns the current type of plane that will cut-though the geometry.\n *\n * @returns {null|String} Either \"X\" or \"Y\" or \"Z\" or \"BOX\" or null.\n * @alias Autodesk.Viewing.Extensions.SectionExtension#getSectionStyle\n */\nproto.getSectionStyle = function() {\n    return this.sectionStyle;\n};\n\n/**\n * Sets the Section plane style.\n *\n * @param {String} style - Accepted values are 'X', 'Y', 'Z' and 'BOX' (in Caps)\n * @param {Boolean} [preserveSection] - Whether sending the current style value resets the cut planes.\n * @alias Autodesk.Viewing.Extensions.SectionExtension#setSectionStyle\n */\nproto.setSectionStyle = function(style, preserveSection) {\n\n    if (this.supportedStyles.indexOf(style) === -1) {\n        return false;\n    }\n\n    var bActive = this.isActive();\n    var bNewStyle = (this.sectionStyle !== style) || !preserveSection;\n    this.sectionStyle = style;\n\n    if (bActive && bNewStyle) {\n        this.tool.setSection(style);\n    }\n    else if (!bActive) {\n        this.enableSectionTool(true);\n        if (bNewStyle) {\n            this.tool.setSection(style);\n        } else {\n            this.tool.attachControl(true);\n        }\n    }\n    return true;\n};\n\n/**\n * Use to set the section from an externally defined plane. For showing with line pattern\n * Tool itself will be disabled when setting the plane\n *\n * @param {THREE.Vector4} cutplane - send null to clear the section\n */\nproto.setSectionFromPlane = function(cutplane) {\n    this.deactivate();\n\n    if (cutplane) {\n        this.tool.setSectionFromPlane(cutplane);\n        this.tool.attachControl(false);\n        // LMV-5299\n        if (!this.isActive()) {\n            this.tool.showPlane(false);\n        }\n    } else {\n        this.tool.clearSection();\n        var prevLock = this.viewer.toolController.setIsLocked(false);\n        this.enableSectionTool(false);\n        this.viewer.toolController.setIsLocked(prevLock);\n    }\n};\n\n/**\n * Returns the planes belonging only to the Section tool's set*\n */\nproto.getSectionPlanes = function() {\n    return this.tool.getSectionPlanes();\n};\n\n/**\n *\n * @param enable\n * @returns {boolean}\n * @private\n */\nproto.enableSectionTool = function(enable) {\n    var toolController = this.viewer.toolController,\n        isActive = this.tool.isActive();\n\n    if (enable && !isActive) {\n        toolController.activateTool(\"section\");\n        if (this.sectionToolButton) {\n            this.sectionToolButton.setState(Autodesk.Viewing.UI.Button.State.ACTIVE);\n        }\n        return true;\n\n    } else if (!enable && isActive) {\n        toolController.deactivateTool(\"section\");\n        if (this.sectionToolButton) {\n            this.sectionToolButton.setState(Autodesk.Viewing.UI.Button.State.INACTIVE);\n        }\n        return true;\n    }\n    return false;\n};\n\n/**\n * Returns an object that reperesents the state of the section planes\n * currently applied to the viewer by this extension.\n * \n * @param {THREE.Vector3|Object} [ignoreGlobalOffset=false]\n * \n * @returns {Object|null}\n */\nproto.getViewValues = function(ignoreGlobalOffset) {\n\n    var boxValues = this.tool.getSectionBoxValues(ignoreGlobalOffset);\n    if (boxValues)\n        return boxValues;\n\n    var planeValues = this.tool.getSectionPlaneValues(ignoreGlobalOffset);\n    if (planeValues)\n        return planeValues;\n\n    return null;\n};\n\n/**\n * Gets the extension state as a plain object. Invoked automatically by viewer.getState()\n * @param {object} viewerState - Object to inject extension values.\n * @alias Autodesk.Viewing.Extensions.SectionExtension#getState\n */\nproto.getState = function(viewerState) {\n    if (!this.viewer.model || this.viewer.model.is2d()) {\n        return;\n    }\n\n    viewerState.cutplanes = viewerState.cutplanes || [];\n    var planes = this.tool.getSectionPlaneSet();\n    for (var i = 0; i < planes.length; i++) {\n        viewerState.cutplanes.push(planes[i].toArray());\n    }\n};\n\n/**\n * Restores the extension state from a given object. Invoked automatically by viewer.restoreState()\n * @param {object} viewerState - Viewer state.\n * @param {boolean} immediate - Whether the new view is applied with (true) or without transition (false).\n * @returns {boolean} True if restore operation was successful.\n * @alias Autodesk.Viewing.Extensions.SectionExtension#restoreState\n */\nproto.restoreState = function(viewerState, immediate) {\n    // If viewerState doesn't contain cutplanes, we should leave it as is.\n    if (!viewerState.cutplanes) {\n        return;\n    }\n    const cutplanes = this.getSectionPlanes();\n    this.setSectionFromPlane(null);   // Unload any existing planes first\n    if (cutplanes.length === 1) {\n        this.setSectionFromPlane(cutplanes[0]);\n    }\n    \n    return true;\n};\n\n/**\n * @private\n */\nproto._onCutPlanesChanged = function(/*event*/) {\n    this.tool.notifyCutplanesChanged();\n};\n\n\n/**\n * @private\n */\nproto._onShowAll = function(/*event*/) {\n    this.deactivate();\n}\n\n/**\n * Set a section box around the passed in THREE.Box3.\n * This method will also enable the section tool.\n * @param {THREE.Box3} box - used to set the section box.\n * @alias Autodesk.Viewing.Extensions.SectionExtension#setSectionBox\n */\nproto.setSectionBox = function(box) {\n    if (!box) return;\n    this.enableSectionTool(true);\n    if (this.tool.setSectionBox(box)) {\n        this.activeStatus = true;\n        this.viewer.clearSelection();\n    } else {\n        this.enableSectionTool(false);\n    }\n}\n\n/**\n * Place a section plane on the Intersection.\n * This method will also enable the section tool.\n * @param {Three.Vector3} normal - plane normal.\n * @param {Three.Vector3} position - position to place the plane.\n * @alias Autodesk.Viewing.Extensions.SectionExtension#setSectionPlane\n */\nproto.setSectionPlane = function(normal, point, enableRotationGizmo) {\n    if (!normal || !point) return;\n    this.enableSectionTool(true);\n    if (this.tool.setSectionPlane(normal, point, enableRotationGizmo)) {\n        this.activeStatus = true;\n        this.viewer.clearSelection();\n    } else {\n        this.enableSectionTool(false);\n    }\n}\n\n/**\n * @private\n */\nproto.onViewerSetView = function(/*event*/) {\n    this.deactivate();\n};\n\n/***\n * @private\n */\nproto.onToolbarCreated = function(toolbar) {\n\n    var AVU = Autodesk.Viewing.UI;\n\n    this.sectionToolButton = new AVU.ComboButton(\"toolbar-sectionTool\");\n    this.sectionToolButton.setToolTip('Section analysis');\n    this.sectionToolButton.setIcon(\"adsk-icon-section-analysis\");\n    this.createSubmenu(this.sectionToolButton);\n\n    // make sure inspect tools is visible\n    var modelTools = toolbar.getControl(Autodesk.Viewing.TOOLBAR.MODELTOOLSID);\n\n    // place section tool before reset tool\n    if (modelTools) {\n        var resetTool = modelTools.getControl(\"toolbar-resetTool\");\n        if (resetTool) {\n            modelTools.addControl(this.sectionToolButton, {index: modelTools.indexOf(resetTool.getId())});\n        } else {\n            modelTools.addControl(this.sectionToolButton, {index: 0});\n        }\n    }\n};\n\n/**\n *\n * @param parentButton\n * @private\n */\nproto.createSubmenu = function(parentButton)\n{\n    var that = this;\n    var viewer = this.viewer;\n    var AVU = Autodesk.Viewing.UI;\n\n    function createNavToggler(button, name) {\n        return function() {\n            var state = button.getState();\n            var enable = function() {\n                if (button instanceof AVU.ComboButton === false) {\n                    that.activate(name);\n                } else {\n                    that.enableSectionTool(true);\n                    that.tool.attachControl(true);\n                }\n            };\n\n            const sectionType = name.toLowerCase().indexOf('box') !== -1 ? 'Box' : 'Plane'\n\n            if (state === AVU.Button.State.INACTIVE) {\n                button.setState(AVU.Button.State.ACTIVE);\n                // Long initialization may cause issues on touch enabled devices, make it async\n                if (Autodesk.Viewing.isMobileDevice()) {\n                    setTimeout(enable, 1);\n                } else {\n                    enable();\n                }\n                analytics.track('viewer.section', {\n                    From: 'Toolbar',\n                    Type: sectionType,\n                    Action: 'Enable',\n                });\n            } else if (state === AVU.Button.State.ACTIVE) {\n                button.setState(AVU.Button.State.INACTIVE);\n                that.deactivate();\n                analytics.track('viewer.section', {\n                    From: 'Toolbar',\n                    Type: sectionType,\n                    Action: 'Disable',\n                });\n            }\n            that.sectionStyle = name.toUpperCase();\n        };\n    }\n\n    function updateSectionButtons() {\n        var areVectorsEqual = (function () {\n            var v = new THREE.Vector3();\n            return function(a, b, sqtol) {\n                v.subVectors(a, b);\n                return v.lengthSq() < sqtol;\n            };\n        })();\n\n        var unitx = new THREE.Vector3(1, 0, 0);\n        var unity = new THREE.Vector3(0, 1, 0);\n        var unitz = new THREE.Vector3(0, 0, 1);\n        var right = viewer.autocam.getWorldRightVector();\n        var up = viewer.autocam.getWorldUpVector();\n        var front = viewer.autocam.getWorldFrontVector();\n\n        var tol = 0.0001;\n        if (areVectorsEqual(up, unitx, tol)) {\n            that.sectionYButton.setIcon(\"adsk-icon-plane-x\");\n        } else if (areVectorsEqual(up, unitz, tol)) {\n            that.sectionYButton.setIcon(\"adsk-icon-plane-z\");\n        } else {\n            that.sectionYButton.setIcon(\"adsk-icon-plane-y\");\n        }\n\n        if (areVectorsEqual(right, unity, tol)) {\n            that.sectionXButton.setIcon(\"adsk-icon-plane-y\");\n        } else if (areVectorsEqual(right, unitz, tol)) {\n            that.sectionXButton.setIcon(\"adsk-icon-plane-z\");\n        } else {\n            that.sectionXButton.setIcon(\"adsk-icon-plane-x\");\n        }\n\n        if (areVectorsEqual(front, unitx, tol)) {\n            that.sectionZButton.setIcon(\"adsk-icon-plane-x\");\n        } else if (areVectorsEqual(front, unity, tol)) {\n            that.sectionZButton.setIcon(\"adsk-icon-plane-y\");\n        } else {\n            that.sectionZButton.setIcon(\"adsk-icon-plane-z\");\n        }\n\n    }\n\n    var sectionXButton = this.sectionXButton = new AVU.Button(\"toolbar-sectionTool-x\");\n    sectionXButton.setToolTip('Add X plane');\n    sectionXButton.setIcon(\"adsk-icon-plane-x\");\n    sectionXButton.onClick = createNavToggler(sectionXButton, 'x');\n    parentButton.addControl(sectionXButton);\n\n    var sectionYButton = this.sectionYButton = new AVU.Button(\"toolbar-sectionTool-y\");\n    sectionYButton.setToolTip('Add Y plane');\n    sectionYButton.setIcon(\"adsk-icon-plane-y\");\n    sectionYButton.onClick = createNavToggler(sectionYButton, 'y');\n    parentButton.addControl(sectionYButton);\n\n    var sectionZButton = this.sectionZButton = new AVU.Button(\"toolbar-sectionTool-z\");\n    sectionZButton.setToolTip('Add Z plane');\n    sectionZButton.setIcon(\"adsk-icon-plane-z\");\n    sectionZButton.onClick = createNavToggler(sectionZButton, 'z');\n    parentButton.addControl(sectionZButton);\n\n    var sectionBoxButton = this.sectionBoxButton = new AVU.Button(\"toolbar-sectionTool-box\");\n    sectionBoxButton.setToolTip('Add box');\n    sectionBoxButton.setIcon(\"adsk-icon-box\");\n    sectionBoxButton.onClick = createNavToggler(sectionBoxButton, 'box');\n    parentButton.addControl(sectionBoxButton);\n\n    if (viewer.model) {\n        updateSectionButtons();\n    } else {\n        viewer.addEventListener(Autodesk.Viewing.MODEL_ADDED_EVENT, updateSectionButtons, { once: true });\n    }\n};\n\n/**\n * @private\n */\nproto.destroyUI = function() {\n    \n    if (this.sectionToolButton) {\n        this.sectionToolButton.removeFromParent();\n        this.sectionToolButton = null;\n    }\n};\n\n/**\n * Activates a section plane for user to interact with.\n * It performs the same action as the UI button.\n * \n * @param {string} mode - Accepted values are 'x', 'y', 'z' and 'box' (in lowercase)\n * @returns {boolean} - true if the activation was successful.\n * @alias Autodesk.Viewing.Extensions.SectionExtension#activate\n */\nproto.activate = function (mode) {\n    if (this.activeStatus && this.mode === mode) {\n        return;\n    }\n    this.enableSectionTool(true);\n    switch (mode) {\n        default:\n        case 'x':\n            this.tool.setSection('X');\n            this.mode = 'x';\n            break;\n        case 'y':\n            this.tool.setSection('Y');\n            this.mode = 'y';\n            break;\n        case 'z':\n            this.tool.setSection('Z');\n            this.mode = 'z';\n            break;\n        case 'box':\n            this.tool.setSection('BOX');\n            this.mode = 'box';\n            break;\n        }\n    this.activeStatus = true;\n    return true;\n};\n\n/**\n * Removes the section plane/box from the 3D canvas.\n * @alias Autodesk.Viewing.Extensions.SectionExtension#deactivate\n * @returns {boolean} - returns true if deactivated, false otherwise.\n */\nproto.deactivate = function () {\n    if(this.activeStatus) {\n        this.tool.setActiveMode(\"\");\n        this.enableSectionTool(false);\n        this.activeStatus = false;\n        return true\n    }\n    return false;\n};\n\n\n/**\n * Invoked when the context menu is about to be created.\n * Adds additional entries to the context menu.\n *\n * @private\n */\nfunction onContextMenu(section, menu, status) {\n\n    if (!status.hasSelected)\n        return;\n\n    const viewer = section.viewer;\n    const event = status.event;\n\n    const bbox = viewer.impl.selector.getSelectionBounds();\n\n    const menuEntry = {\n        title: \"Section\",\n        target: []\n    };\n\n    menuEntry.target.push({\n        title: 'Section Box',\n        target: () => {\n            section.setSectionBox(bbox);\n            analytics.track('viewer.section', {\n                From: 'Contextual',\n                Type: 'Box',\n                Action: 'Enable',\n            });\n        }\n    });\n\n    const aggregateSelection = viewer.getAggregateSelection();\n    const selected = aggregateSelection.map(selectionObject => selectionObject.selection).flat();\n    const modelIds = aggregateSelection.map(selectionObject => selectionObject.model.id);\n    const intersection = viewer.impl.hitTest(status.canvasX, status.canvasY, false, selected, modelIds);\n    \n    // Ensure that the selected object is the on that recieved the context click.\n    if (intersection && intersection.face  && intersection.model && selected.indexOf(intersection.dbId) !== -1) {\n\n        const mesh = viewer.impl.getRenderProxy(intersection.model, intersection.fragId);\n        const normalMatrix = new THREE.Matrix3().getNormalMatrix(mesh.matrixWorld);\n        const normal = intersection.face.normal.clone().applyMatrix3(normalMatrix).normalize();\n\n        menuEntry.target.push({\n            title: 'Section Plane',\n            target: () => {\n                section.setSectionPlane(normal, intersection.point, false);\n                analytics.track('viewer.section', {\n                    From: 'Contextual',\n                    Type: 'Plane',\n                    Action: 'Enable',\n                });\n            }\n        });\n    }\n\n    menu.push(menuEntry);\n}\n\n\n// Make the extension available\nAutodesk.Viewing.theExtensionManager.registerExtension('Autodesk.Section', SectionExtension);\n","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n"],"sourceRoot":""}