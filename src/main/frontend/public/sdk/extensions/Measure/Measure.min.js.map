{"version":3,"sources":["webpack://Autodesk.Extensions.[name]/webpack/bootstrap","webpack://Autodesk.Extensions.[name]/./node_modules/css-loader/lib/url/escape.js","webpack://Autodesk.Extensions.[name]/./extensions/Measure/Measure.css?7049","webpack://Autodesk.Extensions.[name]/./extensions/Measure/Measure.css","webpack://Autodesk.Extensions.[name]/./extensions/Measure/res/icon-spinner-sm.svg","webpack://Autodesk.Extensions.[name]/./extensions/Measure/Calibration.css?c2b7","webpack://Autodesk.Extensions.[name]/./extensions/Measure/Calibration.css","webpack://Autodesk.Extensions.[name]/./node_modules/css-loader/lib/css-base.js","webpack://Autodesk.Extensions.[name]/./node_modules/style-loader/lib/addStyles.js","webpack://Autodesk.Extensions.[name]/./extensions/Measure/MeasurementsManager.js","webpack://Autodesk.Extensions.[name]/./extensions/Measure/Indicator.js","webpack://Autodesk.Extensions.[name]/./extensions/Measure/PolygonCentroid.js","webpack://Autodesk.Extensions.[name]/./extensions/Measure/MeasureToolIndicator.js","webpack://Autodesk.Extensions.[name]/./extensions/Measure/MeasureTool.js","webpack://Autodesk.Extensions.[name]/./extensions/Measure/CalibrationToolIndicator.js","webpack://Autodesk.Extensions.[name]/./extensions/Measure/CalibrationPanels.js","webpack://Autodesk.Extensions.[name]/./extensions/Measure/CalibrationTool.js","webpack://Autodesk.Extensions.[name]/./extensions/Measure/MagnifyingGlass.js","webpack://Autodesk.Extensions.[name]/./extensions/Measure/MeasureToolbar.js","webpack://Autodesk.Extensions.[name]/./extensions/Measure/Measure.js","webpack://Autodesk.Extensions.[name]/./node_modules/style-loader/lib/urls.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","url","test","slice","replace","content","options","transform","undefined","locals","escape","push","useSourceMap","list","toString","this","map","item","cssMapping","btoa","sourceMapping","sourceMap","unescape","encodeURIComponent","JSON","stringify","sourceURLs","sources","source","sourceRoot","concat","join","cssWithMappingToString","mediaQuery","alreadyImportedModules","length","id","fn","memo","stylesInDom","isOldIE","window","document","all","atob","apply","arguments","getTarget","target","parent","querySelector","getElement","styleTarget","HTMLIFrameElement","contentDocument","head","e","singleton","singletonCounter","stylesInsertedAtTop","fixUrls","addStylesToDom","styles","domStyle","refs","j","parts","addStyle","listToStyles","newStyles","base","part","css","media","insertStyleElement","style","insertInto","Error","lastStyleElementInsertedAtTop","insertAt","nextSibling","insertBefore","appendChild","firstChild","before","removeStyleElement","parentNode","removeChild","idx","indexOf","splice","createStyleElement","createElement","attrs","type","nonce","getNonce","addAttrs","el","keys","forEach","setAttribute","obj","update","remove","result","default","styleIndex","applyToSingletonTag","URL","createObjectURL","revokeObjectURL","Blob","link","rel","createLinkElement","updateLink","href","applyToTag","newObj","DEBUG","newList","mayRemove","textStore","replaceText","index","replacement","filter","Boolean","styleSheet","cssText","cssNode","createTextNode","childNodes","autoFixUrls","convertToAbsoluteUrls","blob","oldSrc","MeasureCommon","Autodesk","Viewing","MeasurementsManager","viewer","init","restoredMeasurementData","proto","getCurrentMeasurement","currentMeasurement","getRestoredMeasurementData","selectMeasurementById","measurement","measurementsList","changeCurrentMeasurement","createMeasurement","measurementType","measurementsCounter","Measurement","createMeasurementFromData","measurementData","createIndicatorCb","preparePicksCb","model","parse","modelId","impl","findModel","globalOffset","getData","x","y","z","cvtPts","points","THREE","Vector3","sub","dimensionOffset","dashedLeader","arc","Function","initPicks","picks","MeasurementTypes","MEASUREMENT_AREA","closedArea","MEASUREMENT_CALLOUT","text","indicator","changeAllEndpointsEditableStyle","enableSelectionAreas","enableLabelsTouchEvents","activatePicks","computeResult","renderFromPoints","intersectPoints","pointData","intersection","getIntersectPoints","isRestored","pickData","pick","pickPoint","modelData","clone","viewportId","viewportIndex2d","hasTopology","snapNode","getPick","pointInfo","getGeometry","geomType","SnapType","SNAP_VERTEX","geomVertex","intersectPoint","dispatchEvent","Events","MEASUREMENT_CHANGED_EVENT","data","removeCurrentMeasurement","reset","destroy","av","Indicator","tool","setGlobalManager","globalManager","snapper","getSnapper","materialExtensionLine","materialExtensionFace","extensionLines","extensionFaces","grayOutPlane","materialPoint","materialLine","materialAngle","materialAngleOutline","materialGreyOutPlane","materialFace","angleArc","angleOutline","showMeasureResult","visibleLabels","overlayName","xAxis","autocam","getWorldRightVector","yAxis","getWorldUpVector","zAxis","getWorldFrontVector","getPolygonVisualCenter","polygon","Cell","h","inside","minDistSq","Infinity","k","ring","len","a","b","Math","min","getSegDistSq","sqrt","pointToPolygonDist","max","SQRT2","px","py","dx","dy","TinyQueue","compare","_down","_up","pop","top","peek","pos","current","halfLength","left","right","best","centroid","add","multiplyScalar","getCentroidOfPolygon","minX","minY","maxX","maxY","width","height","cellSize","cellQueue","bestCell","area","f","getCentroidCell","bboxCell","cell","GlobalManagerMixin","updateDistance","updateAngle","clear","updateLabelsPosition","endpoints","createEndpoint","position","showClick","renderRubberbandFromPoints","render","hasPick","renderPick","renderRubberband","changeEndpointOnEditStyle","endpointNumber","isEditing","handleResize","setNoTopology","setFetchingTopology","setTopologyAvailable","clientToCanvasCoords","event","rect","getCanvasBoundingClientRect","res","canvasX","center","canvasY","pointers","clientX","clientY","initLabelMobileGestures","label","pointNumber","magnifyingGlass","toolController","getTool","hammer","Hammer","Manager","recognizers","GestureRecognizers","drag","singletap","handlePointerEventMouse","inputClass","isIE11","PointerEventInput","TouchInput","onSingleTapBinded","onMouseDown","editEndpoint","onDragStartBinded","editByDrag","handlePressHold","handleGesture","onDragMoveBinded","onDragEndBinded","handleButtonUp","on","clearLabelMobileGestures","off","updateVisibleLabelsArray","isVisible","hideEndpoints","endpoint","hideLabel","showEndpoints","showLabel","safeToggle","changeEndpointEditableStyle","isEditable","changeAllEndpointsOnEditStyle","hideLabelsOutsideOfView","is2d","point","show","navigation","isPointVisible","classList","contains","toggle","pickNumber","getActivePointIndex","hideClick","renderEndpointGeometry","geometry","getSnapResultPosition","drawEdgeAsCylinder","geom","material","linewidth","cylinderGeometry","cylinder","edge","vertices","cylinderMesh","setCylinderScale","drawDashedLine","p1","p2","dashSize","gapSize","Geometry","line","subVectors","lineLength","lineDirection","normalize","currLength","addVectors","getNewCylinderGeometry","addMultipleOverlays","drawLineAsCylinder","addOverlay","CylinderGeometry","pointX","pointY","direction","orientation","Matrix4","lookAt","Object3D","up","multiply","set","Mesh","applyMatrix","lmv_line_width","scale","nearestPointInPointToSegment","getPosition","setScale","navapi","camera","getCamera","distance","isPerspective","getEyeVector","fov","getVerticalFov","tan","degToRad","getScreenViewport","alignLabelWithLine","offset","camUpVector","getCameraUpVector","cameraAngle","angleTo","PI","angle","deltaX","deltaY","atan2","abs","isTouchDevice","endPoint","removeEventListener","isSafari","onMouseClickBinded","mousewheel","MEASUREMENT_DISTANCE","start","end","renderDistanceMeasurementFromPoints","MEASUREMENT_ANGLE","renderAngleMeasurementFromPoints","renderAreaMeasurementFromPoints","MEASUREMENT_LOCATION","renderLocationMeasurementFromPoints","renderCalloutMeasurementFromPoints","previewsPick","activePick","renderDistanceMeasurement","renderAngleMeasurement","renderAreaMeasurement","renderLocationMeasurement","renderCalloutMeasurement","initMouseEvent","pointerType","addEventListener","tmpColor","Color","numToColor","num","getHexString","MeasureToolIndicator","measureTool","lines","xyz","axis","_createLineMaterial","className","iconText","applyLineColor","segments","dashedLines","simple","angleLabel","areaLabel","locationLabel","calloutLabel","labels","isLeaflet","topologyStatus","TOPOLOGY_NOT_AVAILABLE","tmpVector","surfaceColor","MeshBasicMaterial","color","parseInt","opacity","transparent","depthTest","depthWrite","side","DoubleSide","constructor","isLeftIntersect","other","isRightIntersect","isMiddleIntersect","moveRight","currentLabel","currentRect","otherRect","moveDown","bottom","setValueMeasurementLabelText","strValue","div","textContent","escapeHtml","str","createSpan","format","space","fontSize","bold","setDeltaMeasurementLabelText","setVisibilityMeasurementLabelSpinner","display","MeasureTool","sharedMeasureConfig","_viewer","_names","_sharedMeasureConfig","Extensions","Measure","_active","_isDragging","_endpointMoved","_activePoint","_consumeSingleClick","_singleClickHandled","_downX","_downY","_isolateMeasure","_measurementsManager","_currentMeasurement","_onIndicatorCreatedCB","_fetchingMeasurements","_prevMeasurement","_useLastViewport","_snapper","_isPressing","_picksBackup","_cursorPosition","_preMeasureState","_measurementType","_sessionMeasurements","getActivePick","getMaxNumberOfPicks","countPicks","getPreviousPick","noPicksSet","allPicksSet","enableMeasurementsTouchEvents","MEASUREMENT_COMPLETED_EVENT","isNoPicksSet","getPickData","clonePicks","picksData","snapToFirstPick","currentPick","forceSnap","firstPick","firstPickPoint","firstPickPosition","project","currentPickPoint","currentPickPosition","distanceTo","onMouseMove","copyTo","showResult","viewportIndex","setMeasurePicksViewport","hasResult","getMeasurementType","types","CALIBRATION","enable","changeFetchingState","stateSetter","areAllPicksSet","setSessionMeasurements","measurementList","getSessionMeasurements","register","deregister","deactivate","isActive","getNames","getName","getPriority","getCursor","getCurrentMeasurementRaw","getMeasurementsManager","startNewMeasurement","attachIndicator","changeMeasurementType","activate","isEditingEndpoint","pauseHighlight","clearSelection","getState","objectSet","activateTool","onMeasurementChangedBinded","onMeasurementChanged","CAMERA_CHANGE_EVENT","onCameraChange","SHOW_ALL_EVENT","onShowAllEvent","prefs","Private","Prefs","RESTORE_SESSION_MEASUREMENTS","sessionMeasurements","setMeasurements","isolateMeasurement","clearIncompleteMeasurement","getMeasurementList","clearIsolate","clearCurrentMeasurement","deactivateTool","undoEditEndpoint","getUnits","units","setUnits","DISPLAY_UNITS_CHANGED","updateResults","getPrecision","precision","setPrecision","getDistanceXYZ","getDistanceAux","distanceXYZ","getDistanceX","distanceX","getDistanceY","distanceY","getDistanceZ","distanceZ","measurementDistance","convertUnits","getUnitString","calibrationFactor","formatValueWithUnits","getAngle","String","fromCharCode","getLocation","location","getCallout","getArea","setUseLastViewport","getUseLastViewport","Array","isArray","measureData","getMeasureType","deselectAllMeasurements","getMeasurement","unitType","geomTypes","from","to","deltaZ","getMeasurementPoints","clearPick","updateViewportId","setIsolateMeasure","defaultModelId","isolationGroups","isolationSet","modelInstance","ids","visibilityManager","aggregateIsolate","restoreState","setSimple","unfocusLabels","isComplete","measurementId","snapResult","getSnapResult","isValid","isMobileDevice","_handleMouseEvent","setPick","focusLabels","deleteMeasurements","measurements","deleteCurrentMeasurement","deleteCurrentPick","count","setViewportId","viewport","correctPickPosition","active","passive","correctPerpendicularPicks","nextPick","valid","isSnapped","copyResults","container","getBoundingClientRect","canDrawRubberBand","renderer","idAtPixel","modelQueue","inverseProject","lastPick","_doConsumeSingleClick","renderSucceeded","hasEqualPicks","measurementComplete","handleButtonDown","button","ctrlKey","metaKey","shiftKey","altKey","handleMouseMove","restoreMouseListeners","controller","enableMouseButtons","handleSingleClick","updateScale","clearOverlays","clearSnapped","handleDoubleClick","handleSingleTap","handleDoubleTap","handleKeyDown","keyCode","KeyCode","BACKSPACE","DELETE","currLabel","onSelectionAreaClickedBinded","onSelectionAreaClicked","createMeasurementLabel","onCameraChangeBinded","handleButtonUpBinded","addWindowEventListener","_hexToCorrectedColor","correctedColor","getHex","createSnapResultLabel","lineColor","TEXTCOLOR","Enabled","FILLCOLOR","LINECOLOR","UIntValue","applyLabelColors","hasColor","bg","backgroundColor","xy","placeLabel","xOff","yOff","visible","floor","clientHeight","clientWidth","p1Projected","p2Projected","invalidate","xyzDirection","itemDirection","cross","dot","needToStackLabels","labelsStacked","backupPositions","labelsOverlapDetection","stackLabels","staticLabel","labelsList","dynamicLabel","moved","staticRect","dynamicRect","causeStacking","topLabel","drawXYZLine","self","drawLineSegment","tmpVec","d1","d2","normal","l1","l2","tips","drawTip","redrawDashedLine","dashedLine","removeMultipleOverlays","p1Scale","redrawDashedLines","isDashedLine","drawSurface","cset","CompGeom","ContourSet","addContour","triangulate","triangulationFailed","bufferGeometry","toPolygonMesh","face","drawSegmentAndPush","pickPositions","firstPoint","parseFloat","position1","position2","isEqualVectors","EPSILON","showAreaLabel","updateArea","clearAngleMeshes","removeOverlay","drawAngle","ep1","ep2","midPoint","_radius","MeshPhongMaterial","ambient","createCommonOverlay","radius","circleGeometry","CircleGeometry","V","updateMatrixWorld","vA","vB","applyMatrix4","matrixWorld","v1","v2","v3","v4","ra","a13","a14","a23","a24","rotWorldMatrix","makeRotationAxis","matrix","rotation","setFromRotationMatrix","outlineGeometry","copy","round","dir","arcRadius","o0","o1","crossVectors","showAngleLabel","showLocationLabel","updateLocation","showCalloutLabel","updateCallout","createDistanceLabel","setVisibilityMeasurementLabelText","_document","getDocument","axisIcon","innerText","updateLine","x1","y1","z1","x2","y2","z2","showAxis","getAlignedUpVector","isParallel","displayAxis","setTimeout","setWidth","getWidth","is3d","maxWidth","split","calloutValue","innerHTML","setValueMeasurementLabelCallout","setLineVisible","pointerEvents","setLabelsZIndex","zIndex","tip","clearSelectionAreas","clearOverlay","selectionArea","overlayScenes","removeOverlayScene","removeWindowEventListener","clearXYZLine","segment","spinner","delta","label_icon","hitArea","whiteSpace","textAlign","createSelectionArea","updateSelectionArea","v","Vector2","_selectorAreaSize","transformOrigin","element","getElementById","CalibrationToolIndicator","calibrationTool","calibrationLabel","rubberbandDefaultMaterial","rubberbandSnappedMaterial","rubberbandTipMaterial","clearRubberband","updateLabelValue","i18n","translate","changeLabelClickableMode","clickable","showAddCalibrationLabel","onClick","showPanel","renderCalibrationLabel","mid","labelPosition","drawMeasurementLineTip","flip","tipMaterial","lineNormal","lineMaterial","isPerpendicular","ave","avp","avu","UI","DockingPanel","ViewerPanelMixin","_gDocument","getGlobal","CalibrationPanel","title","addFooter","parentContainer","resize","closer","setVisible","clearSize","heightAdjustment","marginTop","createScrollContainer","calibrationMenu","scrollContainer","table","tbody","row","insertRow","requestedSizeTextbox","autofocus","updateLabel","ESCAPE","requestedSize","cursorIndex","selectionStart","isSimple","unitList","selectedIndex","simpleInput","isPositiveNumber","isSimpleDecimal","calculatePrecision","getMaxPrecision","preventDefault","insertCell","caption","matches","unitNames","OptionDropDown","paddingLeft","paddingRight","setCalibration","requestedUnits","calibrate","match","isNaN","uninitialize","findUnits","selectedUnits","getCurrentUnits","setPanelValue","size","updateUnits","setSelectedIndex","parsedNumber","UnitParser","parsePositiveNumber","updatePanelPosition","labelOffset","cornerX","cornerY","rubberbandDirection","pow","canvas","CalibrationRequiredDialog","measureExt","dialogBox","calibrateNow","buttonsWrapper","cancel","calibrateNowButton","enableCalibrationTool","CalibrationTool","_measurement","_options","_maxPrecision","maxPrecision","_isCalibrated","_distance","_calibrationTaken","_selectedSize","_selectedUnits","_selectedP1","_selectedP2","_waitingForInput","_calibrationPanel","_hasUI","GuiViewer3D","addPanel","screenSizeChangedBinded","screenSizeChanged","removePanel","parsedRequestedSize","VIEWER_RESIZE_EVENT","hidePanel","clearAllPicks","setCalibrationFactor","getCalibrationFactor","isCalibrationValid","currentSize","defualtPrecision","requestedPrecision","getExtension","FINISHED_CALIBRATION","scaleFactor","calibrateByScale","requestedScale","CLOSE_CALIBRATION_PANEL_EVENT","_window","getWindow","focus","onKeyUp","OPEN_CALIBRATION_PANEL_EVENT","updateCalibrationPanel","isCalibrated","CLEAR_CALIBRATION_SIZE_EVENT","clearMeasurement","repickEndpoint","hasPreviousPick","MagnifyingGlass","_magnifyingGlassCanvas","_imageData","_imageBuffer","_clientX","_clientY","_needsClear","updateMagnifyingGlassBinded","updateMagnifyingGlass","pixelRatio","devicePixelRatio","normlizedDiameter","diameter","getContext","createImageData","ceil","Uint8Array","buffer","ctx","gl","glrenderer","readPixels","RGBA","UNSIGNED_BYTE","putImageData","drawImage","setGlassPosition","clearMagnifyingGlass","requestUpdate","hasEventListener","RENDER_PRESENTED_EVENT","once","drawMagnifyingGlass","handleWheelInput","MeasureToolbar","measureExtension","buttonsList","toolbar","getToolbar","navigationBar","getControl","TOOLBAR","NAVTOOLSID","toolbarOptions","measureToolbar","ControlGroup","MEASURETOOLSID","addControl","measureSimpleDistanceBtn","Button","setToolTip","setIcon","State","ACTIVE","measureAngleBtn","measureAreaBtn","calibrationToolBtn","separator","deleteBtn","settingsBtn","settingsControlPanel","setButtonActive","setButtonInactive","root","initialIndex","getDisplayUnit","shift","toUnits","setupPrecision","logger","track","category","precisionList","isolate","OptionCheckbox","checked","freeMeasure","isFreeMeasureMode","setFreeMeasureMode","updateSettingsPanel","setVisibility","disableUnitOption","measureDoneBtn","doneText","cancelLabel","btnContainer","iconEle","getElementsByClassName","exitMeasurementMode","closeToolbar","removeFromParent","enableMeasureTool","toggleVisible","viewerToolbarContainer","viewerContainerChildrenCount","children","MODELTOOLSID","measurementToolbarButton","setState","INACTIVE","deactivateAllButtons","activateButtonByType","dropdownElement","lastChild","precisions","elem","disabled","visibility","avem","AutodeskNamespace","DEFAULT_MEASUREMENT_TYPE","MeasureExtension","Extension","modes","_onModelLoaded","_onDisplayUnitsPrefChanged","_onPrecisionPrefChanged","load","loadExtension","hasUI","escapeHotkeyId","measureToolOptions","onCloseCallback","snapperOptions","forceCalibrate","Snapping","Snapper","renderSnappedTopology","registerTool","calibration","onFinishedCalibration","activateInitiator","MODEL_ROOT_LOADED_EVENT","onModelRemoved","DISABLED","onModelAdded","getVisibleModels","MODEL_ADDED_EVENT","MODEL_REMOVED_EVENT","addListeners","DISPLAY_UNITS","DISPLAY_UNITS_PRECISION","setPdfUnits","isPdf","Prefs2D","FORCE_PDF_CALIBRATION","setLeafletUnits","FORCE_LEAFLET_CALIBRATION","calibrationUnits","getMetadata","precisionPreference","unload","destroyUI","deregisterTool","unloaded","removeListeners","setActive","getUnitOptions","getPrecisionOptions","isFractional","getDefaultUnit","openCalibrationRequiredDialog","initiator","CALIBRATION_REQUIRED_EVENT","FINISHED_CALIBRATION_FOR_DIMENSION_EVENT","getCalibration","activeStatus","success","enterMeasurementMode","console","warn","setForcePDFCalibrate","setForceLeafletCalibrate","setRestoreSessionMeasurements","selectedTool","forcePDFCalibration","forceLeafletCalibration","checkAndFetchTopology","OPEN_TOOL_AFTER_CALIBRAION","UNITS_CALIBRATION_STARTS_EVENT","_measurementMode","MEASUREMENT_MODE_ENTER","navigationControls","measureControls","measureButtonId","getId","removeControl","centerToolBar","MEASUREMENT_MODE_LEAVE","onToolbarCreated","modelTools","state","hotkeys","keycodes","onRelease","getHotkeyManager","pushHotkeys","_checkedTopology","modelHasTopology","fetchTopology","then","topoData","catch","err","log","popHotkeys","allow","useLastViewport","setSnapToPixel","getSnapToPixel","theExtensionManager","registerExtension","baseUrl","protocol","host","currentDir","pathname","fullMatch","origUrl","newUrl","unquotedOrigUrl","trim","$1"],"mappings":"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","file":"Measure/Measure.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 559);\n","module.exports = function escape(url) {\n    if (typeof url !== 'string') {\n        return url\n    }\n    // If url is already wrapped in quotes, remove them\n    if (/^['\"].*['\"]$/.test(url)) {\n        url = url.slice(1, -1);\n    }\n    // Should url be wrapped?\n    // See https://drafts.csswg.org/css-values-3/#urls\n    if (/[\"'() \\t\\n]/.test(url)) {\n        return '\"' + url.replace(/\"/g, '\\\\\"').replace(/\\n/g, '\\\\n') + '\"'\n    }\n\n    return url\n}\n","\nvar content = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/dist/cjs.js!./Measure.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/dist/cjs.js!./Measure.css\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/dist/cjs.js!./Measure.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","var escape = require(\"../../node_modules/css-loader/lib/url/escape.js\");\nexports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".adsk-viewing-viewer .measure-length:hover.measure-length.enable-hover{box-shadow:0 0 16px 3px rgba(0,117,210,0.7);-webkit-box-shadow:0 0 16px 3px rgba(0,117,210,0.7);-moz-box-shadow:0 0 16px 3px rgba(0,117,210,0.7)}.adsk-viewing-viewer .measure-length{display:none;position:absolute;height:19px;left:0px;top:0px;padding:2px 0 2px 0;background-color:#009bea;box-shadow:0px 1px 3px 1px rgba(0,0,0,0.25);color:#f4f4f4;font-size:12px;text-align:center;line-height:1.2;white-space:nowrap;border-radius:8px;pointer-events:none;cursor:pointer;z-index:2;-webkit-tap-highlight-color:rgba(0,0,0,0)}.adsk-viewing-viewer .measure-length.visible{display:block}.adsk-viewing-viewer .measure-length.fetching-topology{background-color:rgba(34,34,34,0.8);box-shadow:0 0.5px 1.5px 0 rgba(0,0,0,0.3)}.adsk-viewing-viewer .measure-length-text{display:inline-block;margin:0 5px 0 5px;vertical-align:middle;font-size:16px;pointer-events:none}.adsk-viewing-viewer .measure-delta-text{margin:0 5px 0 5px;align-self:center;font-size:14px;overflow:hidden;white-space:nowrap;height:16px;line-height:16px;vertical-align:middle;pointer-events:none}.adsk-viewing-viewer .measure-length-button{display:inline-block;width:16px;height:16px;font-size:16px;float:right;color:#FFFFFF;opacity:0.7}.adsk-viewing-viewer .measure-length-button:hover{background-color:rgba(166,194,255,0.7);-webkit-transition:all 0.2s ease;-moz-transition:all 0.2s ease;-ms-transition:all 0.2s ease;-o-transition:all 0.2s ease;transition:all 0.2s ease}.adsk-viewing-viewer .measure-label:hover.measure-label.enable-hover,.adsk-viewing-viewer .measure-label.on-edit{box-shadow:0 0 4px 4px #0d69ca;-webkit-box-shadow:0 0 4px 4px #0d69ca;-moz-box-shadow:0 0 4px 4px #0d69ca}.adsk-viewing-viewer .measure-label.editable{pointer-events:all}.adsk-viewing-viewer .measure-label{display:none;position:absolute;width:7px;height:7px;cursor:move;pointer-events:none;border-radius:100px}.adsk-viewing-viewer .measure-label-hit-area{display:inline-block;position:absolute;width:44px;height:44px;left:-22px;top:-22px;border-radius:100px;z-index:2}.adsk-viewing-viewer .measure-label-icon{display:inline-block;position:absolute;width:7px;height:7px;left:-2px;top:-2px;background-color:#009bea;border-style:solid;border-width:2px;border-color:#FFFFFF;border-radius:100px;box-shadow:0 2px 5px 0 #182A3D;z-index:2}.adsk-viewing-viewer .measure-label.visible{display:block}.adsk-viewing-viewer .measure-label-text{display:inline-block;margin:0px 5px 0px 5px;vertical-align:middle}.adsk-viewing-viewer .measure-horizontal-divider{height:1px;border-top:1px solid rgba(200,200,200,0.8)}.adsk-viewing-viewer .measure-submenu-select{display:block;position:relative;width:calc(100% - 40px);padding:10px 20px 0px 20px;opacity:0.3}.adsk-viewing-viewer .option-drop-down:disabled{opacity:0.3}.adsk-viewing-viewer .measure-submenu-selectlabel{position:relative;display:inline-block;padding-right:20px;padding-bottom:4px}.adsk-viewing-viewer .measure-results{position:relative;display:block;padding:5px 0px  10px 30px}.adsk-viewing-viewer .measure-result-label{display:inline-block;padding-right:10px}.adsk-viewing-viewer .measure-result-number{display:inline-block}.adsk-viewing-viewer .measure-delta-collapse{position:absolute;right:20px;display:inline-block;background-color:rgba(255,255,255,0.12);margin:0px 4px 0px 4px;padding:0px 4px 0px 4px;cursor:pointer;text-align:center}.adsk-viewing-viewer .measure-delta-collapse:hover{background-color:rgba(166,194,255,0.7);-webkit-transition:all 0.2s ease;-moz-transition:all 0.2s ease;-ms-transition:all 0.2s ease;-o-transition:all 0.2s ease;transition:all 0.2s ease}.adsk-viewing-viewer .measure-selection-repick{position:absolute;right:20px;display:inline-block;background-color:rgba(255,255,255,0.12);margin:4px 4px 4px 4px;padding:4px 4px 4px 4px;cursor:pointer;text-align:center}.adsk-viewing-viewer .measure-selection-repick:hover{background-color:rgba(166,194,255,0.7);-webkit-transition:all 0.2s ease;-moz-transition:all 0.2s ease;-ms-transition:all 0.2s ease;-o-transition:all 0.2s ease;transition:all 0.2s ease}.adsk-viewing-viewer .measure-restart{margin:10px 20px 15px 20px;padding:6px 10px 6px 10px;width:calc(100% - 55px);cursor:pointer;text-align:center;border-style:solid;border-width:1px;border-color:rgba(255,255,255,0.2);border-radius:3px}.adsk-viewing-viewer .docking-panel:hover .measure-restart{background-color:rgba(255,255,255,0.12)}.adsk-viewing-viewer .docking-panel .measure-restart:hover{background-color:rgba(166,194,255,0.7);-webkit-transition:all 0.2s ease;-moz-transition:all 0.2s ease;-ms-transition:all 0.2s ease;-o-transition:all 0.2s ease;transition:all 0.2s ease}.adsk-viewing-viewer .measure-panel-title{padding-top:0px;padding-left:20px;margin-top:10px}.adsk-viewing-viewer .measure-panel-title:hover{cursor:pointer}.adsk-viewing-viewer .measure-panel-title.collapsed{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkEwMDhBMzY4QTYyODExRTM5REY0Q0MwMTM3MTVFOTMzIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkEwMDhBMzY5QTYyODExRTM5REY0Q0MwMTM3MTVFOTMzIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QTAwOEEzNjZBNjI4MTFFMzlERjRDQzAxMzcxNUU5MzMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QTAwOEEzNjdBNjI4MTFFMzlERjRDQzAxMzcxNUU5MzMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6WHWu4AAAAcElEQVR42mL8//8/AzmAiYFMgEtjGSFDcUmGAfEEIOYix6lWQLwUiGXJ8SNI00IgNiIncPiAeCoQ+5ITqsxQA+CAhQhN34C4AoiPkaLxGRAXAfEdUvx4DohjsGkCA1CSw4LrgZgVhxwYM9I9rQIEGACZNDs01yUXlAAAAABJRU5ErkJggg==);background-repeat:no-repeat}.adsk-viewing-viewer .measure-panel-title.expanded{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkE3QzFFQUQ1QTYyODExRTM5NzE2RjcyN0QxQjg0QTREIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkE3QzFFQUQ2QTYyODExRTM5NzE2RjcyN0QxQjg0QTREIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QTdDMUVBRDNBNjI4MTFFMzk3MTZGNzI3RDFCODRBNEQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QTdDMUVBRDRBNjI4MTFFMzk3MTZGNzI3RDFCODRBNEQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6XuY60AAAARklEQVR42mL8//8/AzmAiYFMQBeNqSg8kB+JwKlAfAZZjIlIm9JJdSpWTYQ04tSETyNeTbg0EtSETSNRmkCAcegkOYAAAwDGjDZHvY373AAAAABJRU5ErkJggg==);background-repeat:no-repeat}.adsk-viewing-viewer .adsk-viewing-viewer .measure-table td{padding:10px 0px  10px 20px}.adsk-viewing-viewer .measure-selection-one-label{display:inline-block;margin:18px 18px 18px 18px;width:16px;height:16px;font-size:16px;float:left;padding:2px;background-color:#0033FF;border-radius:10px;opacity:0.6}.adsk-viewing-viewer .measure-selection-two-label{display:inline-block;margin:18px 18px 18px 18px;width:16px;height:16px;font-size:16px;float:left;padding:2px;background-color:#0033FF;border-radius:10px;opacity:0.6}.adsk-viewing-viewer .measure-repick{display:inline-block;cursor:default;margin:20px 20px 20px 20px;width:16px;height:16px;font-size:16px;float:right;opacity:0.5}.adsk-viewing-viewer .measure-repick:hover{opacity:1}.adsk-viewing-viewer .measure-selection-result{display:inline-block;margin:21px 0px 21px 0px}.adsk-viewing-viewer .measure-distance-icon{display:inline-block;margin:20px 2px 20px 2px;font-size:52px;color:#FF9900;float:left}.adsk-viewing-viewer .measure-angle-icon{display:inline-block;margin:20px 2px 20px 2px;font-size:52px;color:#FF9900;float:left}.adsk-viewing-viewer .adsk-viewing-viewer .measure-result{font-size:20px;color:#FF9900;display:inline-block;margin:38px 0px 38px 0px}.adsk-viewing-viewer .measure-initial{font-size:20px;display:inline-block;margin:38px 0px 38px 56px}.adsk-viewing-viewer .measure-settings-button{cursor:default;position:relative;top:20px;right:20px;width:16px;height:16px;font-size:18px;float:right;opacity:0.5}.adsk-viewing-viewer .measure-settings-button:hover{opacity:1}.adsk-viewing-viewer .measure-delta-button{position:relative;top:56px;right:4px;width:16px;height:16px;font-size:16px;float:right;opacity:0.5;-webkit-transform:rotate(-90deg);-moz-transform:rotate(-90deg);-ms-transform:rotate(-90deg);-o-transform:rotate(-90deg);transform:rotate(-90deg)}.adsk-viewing-viewer .measure-delta-button.rotated{-webkit-transform:rotate(90deg);-moz-transform:rotate(90deg);-ms-transform:rotate(90deg);-o-transform:rotate(90deg);transform:rotate(90deg)}.adsk-viewing-viewer .measure-delta-button:hover{opacity:1}.adsk-viewing-viewer .measure-delta-result{display:inline-block;margin:0px 0px 20px 0px;padding:0px 0px 0px 56px}.adsk-viewing-viewer .measure-label-axis{display:none;position:absolute;width:16px;height:16px;left:0px;top:0px;background-color:#f4f4f4;border-radius:8px;pointer-events:none}.adsk-viewing-viewer .measure-label-axis-icon.X{background-color:#F12C2C}.adsk-viewing-viewer .measure-label-axis-icon.Y{background-color:#0BB80B}.adsk-viewing-viewer .measure-label-axis-icon.Z{background-color:#2C2CF1}.adsk-viewing-viewer .measure-label-axis-icon{width:20px;height:18px;color:#f4f4f4;border-radius:8px 0 0 8px;font-size:12px;padding-top:4px;line-height:15px;text-align:center;margin-left:-2px}.adsk-viewing-viewer .measure-label-axis-delta.enableTransition{transition:opacity 0.1s linear}.adsk-viewing-viewer .measure-label-axis-delta{display:none;position:absolute;font-size:18px;left:0px;top:0px;background-color:#ffffff;pointer-events:none;opacity:0;border-radius:8px;box-shadow:0px 1px 3px 1px rgba(0,0,0,0.25)}.adsk-viewing-viewer .measure-label-axis.visible{display:block}.adsk-viewing-viewer .measure-label-axis-delta.visible{display:flex}.adsk-viewing-viewer .measure-label-axis-x{color:#F12C2C}.adsk-viewing-viewer .measure-label-axis-y{color:#0BB80B}.adsk-viewing-viewer .measure-label-axis-z{color:#2C2CF1}.adsk-viewing-viewer .magnifying-glass.visible{display:block}.adsk-viewing-viewer .magnifying-glass{position:absolute;display:none;-moz-border-radius:100%;-webkit-border-radius:100%;border-radius:100%;background:transparent;box-shadow:2px 2px 4px rgba(0,0,0,0.5),inset 2px 2px 4px rgba(0,0,0,0.5);-webkit-box-shadow:2px 2px 4px rgba(0,0,0,0.5),inset 2px 2px 4px rgba(0,0,0,0.5);-moz-box-shadow:2px 2px 4px rgba(0,0,0,0.5),inset 2px 2px 4px rgba(0,0,0,0.5);z-index:4}.adsk-viewing-viewer .measure-fetching-topology{display:inline-block;width:10px;height:10px;background:url(\" + escape(require(\"./res/icon-spinner-sm.svg\")) + \");margin:3px 0px -2px 3px;animation:measure-topology-fetching-anim 1.4s infinite linear;-webkit-animation:measure-topology-fetching-anim 1.4s infinite linear}@keyframes measure-topology-fetching-anim{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes measure-topology-fetching-anim{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.adsk-viewing-viewer .docking-panel.measure-settings-popup{display:flex;justify-content:center;flex-direction:column;bottom:120%;box-sizing:border-box;text-align:left;position:absolute;padding-top:15px;padding-bottom:15px}.adsk-viewing-viewer .adsk-toolbar-vertical .docking-panel.measure-settings-popup{right:120%;bottom:unset;height:max-content;width:max-content}.adsk-viewing-viewer .docking-panel.measure-settings-popup .adsk-lmv-tftable tr.switch-slider-row td{width:auto;padding-bottom:0px;padding-top:0px;vertical-align:inherit}.adsk-viewing-viewer .docking-panel.measure-settings-popup.hide{display:none}.adsk-viewing-viewer .measure-settings-popup tbody{top:15px}.adsk-toolbar .measure-toolbar-seperator{height:18px;width:1px;background-color:#999;float:left;margin:16px 5px}.adsk-toolbar.adsk-toolbar-vertical .measure-toolbar-seperator{height:1px;width:18px;margin:5px 16px}.adsk-viewing-viewer .measure-selection-area{display:block;position:absolute;cursor:pointer;z-index:1;-webkit-tap-highlight-color:rgba(0,0,0,0)}\\n\", \"\"]);\n\n// exports\n","module.exports = \"\\\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='10' height='10' viewBox='0 0 10 10'%3E %3Cdefs%3E %3ClinearGradient id='linear-gradient' y1='5' x2='10' y2='5' gradientUnits='userSpaceOnUse'%3E %3Cstop offset='0' stop-color='%23fff' stop-opacity='0'/%3E %3Cstop offset='1' stop-color='%23fff'/%3E %3C/linearGradient%3E %3C/defs%3E %3Ctitle%3EAsset 6%3C/title%3E %3Cg id='Layer_2' data-name='Layer 2'%3E %3Cg id='finals_24px'%3E %3Cpath d='M5,10A5,5,0,0,1,0,5,1.2,1.2,0,0,1,2.3,5,2.7,2.7,0,1,0,5,2.3,1.2,1.2,0,0,1,5,0,5,5,0,0,1,5,10Z' fill='url(%23linear-gradient)'/%3E %3C/g%3E %3C/g%3E %3C/svg%3E\\\"\"","\nvar content = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/dist/cjs.js!./Calibration.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/dist/cjs.js!./Calibration.css\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/dist/cjs.js!./Calibration.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"@font-face{font-family:'calibration-icon';src:url(\\\"data:application/octet-stream;base64,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\\\") format(\\\"woff\\\");font-weight:normal;font-style:normal}[class^=\\\"calibration-icon\\\"],[class*=\\\" calibration-icon\\\"]{font-family:'calibration-icon';font-style:normal;font-weight:normal;font-variant:normal;line-height:1;padding-top:2px;speak:none;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.adsk-viewing-viewer .calibration-icon:before{content:'a'}.adsk-viewing-viewer .calibration-panel{left:calc(50% - 190px);top:calc(50% - 145px);width:300px;height:auto;z-index:4}.adsk-viewing-viewer .measure-settings-popup .option-drop-down,.adsk-viewing-viewer .calibration-panel .option-drop-down{width:100%;padding-right:0px;box-sizing:border-box}.adsk-viewing-viewer .measure-settings-popup .adsk-lmv-tftable tr td,.adsk-viewing-viewer .calibration-panel .adsk-lmv-tftable tr td{width:auto;padding:2px 15px 2px 0px}.adsk-viewing-viewer .calibration-panel .adsk-lmv-tftable tr td input{margin:0px;box-sizing:border-box;width:100%}.adsk-viewing-viewer .measure-settings-popup .switch{margin-left:25px}.adsk-viewing-viewer .measure-settings-popup .switch .slider{width:26px}.adsk-viewing-viewer .calibration-textbox::-webkit-inner-spin-button,.adsk-viewing-viewer .calibration-textbox::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.adsk-viewing-viewer .calibration-text{text-align:left;padding:6px 10px 6px 10px;margin:20px 20px 14px 20px;font-size:14px;-webkit-font-smoothing:antialiased}.adsk-viewing-viewer .calibration-button{margin-top:15px}.adsk-viewing-viewer .calibration-button-left{width:calc(50% - 15px);margin-right:5px !important;display:inline-block}.adsk-viewing-viewer .calibration-button-right{width:calc(50% - 15px);margin-left:5px !important;display:inline-block}.adsk-viewing-viewer .calibration-line{position:absolute;display:block;top:0;left:0;pointer-events:none;z-index:0}.adsk-viewing-viewer .calibration-label{display:none;position:absolute;pointer-events:none;text-align:'center';vertical-align:middle;cursor:default;padding:2px;color:#000000;background:#FFFFFF;border-radius:10px;-webkit-transform-origin:50%  53%}.adsk-viewing-viewer .calibration-label-text{display:inline-block;pointer-events:none;text-align:'center';vertical-align:middle;font-size:12px;cursor:default;padding:2px;color:#000000;background:#FFFFFF;border-bottom:1px dashed #000000;text-decoration:none;text-transform:uppercase;-webkit-font-smoothing:antialiased}.adsk-viewing-viewer .calibration-label-text:hover{color:#039be5;border-bottom:1px dashed #039be5}.adsk-viewing-viewer .calibration-label.visible{display:block}.adsk-viewing-viewer .calibration-endpoint:hover.calibration-endpoint.enable-hover,.adsk-viewing-viewer .calibration-endpoint.edit{background-color:#039be5}.adsk-viewing-viewer .calibration-endpoint:hover.calibration-endpoint.enable-hover>*,.adsk-viewing-viewer .calibration-endpoint.edit>*{color:#ffffff}.adsk-viewing-viewer .calibration-endpoint.editable{pointer-events:all}.adsk-viewing-viewer .calibration-endpoint{display:none;position:absolute;cursor:move;pointer-events:none;width:30px;height:30px;background-color:#ffffff;box-shadow:0 4px 8px 0 rgba(0,0,0,0.24),0 0 8px 0 rgba(0,0,0,0.12);-moz-border-radius:50px;-webkit-border-radius:50px;border-radius:50px;justify-content:center;align-items:center;text-align:center}.adsk-viewing-viewer .calibration-endpoint.visible{display:block}.adsk-viewing-viewer .calibration-endpoint-text{display:inline-block;font-size:14px;vertical-align:middle;cursor:default;margin:5px 5px 5px 5px;vertical-align:middle;text-align:center;color:#039be5;text-decoration:none;text-transform:uppercase;pointer-events:none}.adsk-viewing-viewer .calibration-buttons-wrapper{text-align:center}\\n\", \"\"]);\n\n// exports\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target, parent) {\n  if (parent){\n    return parent.querySelector(target);\n  }\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target, parent) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target, parent);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertAt.before, target);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\n\tif(options.attrs.nonce === undefined) {\n\t\tvar nonce = getNonce();\n\t\tif (nonce) {\n\t\t\toptions.attrs.nonce = nonce;\n\t\t}\n\t}\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction getNonce() {\n\tif (typeof __webpack_nonce__ === 'undefined') {\n\t\treturn null;\n\t}\n\n\treturn __webpack_nonce__;\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = typeof options.transform === 'function'\n\t\t ? options.transform(obj.css) \n\t\t : options.transform.default(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","\n    var MeasureCommon = Autodesk.Viewing.MeasureCommon; //These come from main lmv bundle.\n\n    // /** @constructor */\n    export function MeasurementsManager(viewer)\n    {   \n        this.viewer = viewer;\n        this.init();\n\n        this.restoredMeasurementData = [];\n    }\n\n    var proto = MeasurementsManager.prototype;\n\n    proto.getCurrentMeasurement = function() {\n        return this.currentMeasurement;\n    };\n\n    proto.getRestoredMeasurementData = function() {\n        return this.restoredMeasurementData.slice();\n    }\n\n    proto.selectMeasurementById = function(id) {\n        var measurement = this.measurementsList[id];\n        \n        if (measurement) {\n            this.changeCurrentMeasurement(measurement);\n            return this.currentMeasurement;    \n        }\n\n        return false;\n    };\n\n    proto.createMeasurement = function(measurementType, options) {\n        var id = this.measurementsCounter;\n        var measurement = new MeasureCommon.Measurement(measurementType, id, options);\n        this.measurementsList[id] = measurement;\n        this.measurementsCounter++;\n        this.changeCurrentMeasurement(measurement);\n        return this.currentMeasurement;\n    };\n\n    // Renders measurements from data.\n    proto.createMeasurementFromData = function(measurementData, measurementType, createIndicatorCb, preparePicksCb) {\n        // Convert optional values from DWF to local coordinate\n        let options = measurementData.options;\n        if (options) {\n            // Deep clone options\n            options = JSON.parse(JSON.stringify(options));\n\n            // Convert global world coordinats to LMV coordinates\n            const model =\n                options.hasOwnProperty('modelId') && options.modelId\n                    ? this.viewer.impl.findModel(options.modelId)\n                    : this.viewer.model;\n            const globalOffset = model && model.getData().globalOffset;\n            if (globalOffset && (globalOffset.x !== 0 || globalOffset.y !== 0 || globalOffset.z !== 0)) {\n                const cvtPts = points => {\n                    if (points) {\n                        for (let i = 0; i < points.length; ++i) {\n                            // Tricky way to use Vector3 sub on plain objects\n                            THREE.Vector3.prototype.sub.call(points[i], globalOffset);\n                        }\n                    }\n                };\n                cvtPts(options.dimensionOffset);\n                cvtPts(options.dashedLeader);\n                cvtPts(options.arc);\n            }\n        }\n\n        this.createMeasurement(measurementType, options);\n        if (createIndicatorCb instanceof Function) {\n            createIndicatorCb(this.currentMeasurement);\n        }\n\n        this.initPicks(measurementData.picks);\n\n        if (preparePicksCb instanceof Function) {\n            preparePicksCb();\n        }\n\n        if (this.currentMeasurement.measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_AREA) {\n            this.currentMeasurement.closedArea = true;\n        } else if (this.currentMeasurement.measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_CALLOUT) {\n            this.currentMeasurement.text = measurementData.text;\n        }\n\n        const getIntersectPoints = () => {\n            const points = this.restoredMeasurementData[this.currentMeasurement.id];\n            const keys = Object.keys(points);\n            const intersectPoints = [];\n            for (let i = 0; i < keys.length; i++) {\n                const key = keys[i];\n                const pointData = points[key];\n                intersectPoints[key] = pointData.intersection;\n            }\n            return intersectPoints;\n        };\n\n        this.currentMeasurement.indicator.changeAllEndpointsEditableStyle(true);\n        this.currentMeasurement.indicator.enableSelectionAreas(true);\n        this.currentMeasurement.indicator.enableLabelsTouchEvents(true);\n\n        this.activatePicks();\n\n        this.currentMeasurement.computeResult(this.currentMeasurement.picks, this.viewer)\n\n        // This will render the measurements\n        this.currentMeasurement.indicator.renderFromPoints(getIntersectPoints(), true);\n\n        this.currentMeasurement.indicator.changeAllEndpointsEditableStyle(true);\n        this.currentMeasurement.indicator.enableSelectionAreas(true);\n        this.currentMeasurement.indicator.enableLabelsTouchEvents(true);\n\n        this.currentMeasurement.isRestored = true;\n    };\n\n    // Initializes picks from pick data\n    proto.initPicks = function(pickData) {\n        if (!pickData) return;\n        const points = [];\n\n        for (let i = 0; i < pickData.length; i++) {\n            const pick = pickData[i];\n            if (!pick) continue;\n            const key = i + 1;\n\n            let pickPoint = new THREE.Vector3(pick.intersection.x, pick.intersection.y, pick.intersection.z);\n            const model =\n                pick.hasOwnProperty('modelId') && pick.modelId\n                    ? this.viewer.impl.findModel(pick.modelId)\n                    : this.viewer.model;\n\n            if (model) {\n                const modelData = model.getData();\n                pickPoint =\n                    modelData && modelData.hasOwnProperty('globalOffset')\n                        ? pickPoint.sub(modelData.globalOffset).clone()\n                        : pickPoint.clone();\n            }\n\n            points[key] = {\n                intersection: pickPoint,\n                viewportId: pick.viewportIndex2d,\n                hasTopology: pick.hasTopology,\n                modelId: pick.modelId,\n                snapNode: pick.snapNode\n            };\n            this.currentMeasurement.getPick(key);\n        }\n\n        this.restoredMeasurementData[this.currentMeasurement.id] = points;\n    };\n\n    // Stores information from the restored measurement pick data in the current measurement picks\n    proto.activatePicks = function() {\n        if (!this.currentMeasurement.picks) return;\n        const keys = Object.keys(this.currentMeasurement.picks);\n\n        const id = this.currentMeasurement.id;\n        for (let i = 0; i < keys.length; i++) {\n            const key = keys[i];\n\n            const pick = this.currentMeasurement.picks[key];\n            const restoredMeasurements = this.getRestoredMeasurementData();\n            const pointInfo = restoredMeasurements[id][key];\n            let p = pointInfo.intersection.clone();\n\n            if (!pick.getGeometry() && pointInfo.intersection) {\n                pick.geomType = MeasureCommon.SnapType.SNAP_VERTEX;\n                pick.geomVertex = p;\n                pick.intersectPoint = p;\n                pick.modelId = pointInfo.modelId;\n                pick.snapNode = pointInfo.snapNode; // the dbid of the pick. This is used for isolation.\n\n                // Set the isRestored flag if all of the picks are valid.\n                pick.viewportIndex2d = pointInfo.viewportId;\n            }\n        }\n    };\n\n    proto.changeCurrentMeasurement = function(measurement) {\n        this.currentMeasurement = measurement;\n        this.viewer.dispatchEvent({ type: MeasureCommon.Events.MEASUREMENT_CHANGED_EVENT, data: { type: measurement.measurementType, id: measurement.id }});\n    };\n\n    proto.removeCurrentMeasurement = function() { \n        // Remove current measurement from the list\n        if (Object.keys(this.measurementsList).length > 0) {\n            delete this.measurementsList[this.currentMeasurement.id];\n        }\n    };\n\n    proto.init = function() {\n        this.reset();\n    };\n\n    proto.destroy = function() {\n        this.reset();\n    };\n\n    proto.reset = function() {\n        this.currentMeasurement = null;\n        this.measurementsList = {};\n        this.measurementsCounter = 0;\n    };\n\n","\n    var av = Autodesk.Viewing;\n    var MeasureCommon = av.MeasureCommon;\n    \n    /**\n     * Base class for an indicator.\n     */\n\n    export var Indicator = function(viewer, measurement, tool)\n    {\n        this.viewer = viewer;\n        this.setGlobalManager(viewer.globalManager);\n        this.measurement = measurement;\n        this.tool = tool;\n        this.snapper = tool.getSnapper();\n        this.materialExtensionLine = null;\n        this.materialExtensionFace = null;\n        this.extensionLines = [];\n        this.extensionFaces = [];\n        this.grayOutPlane = [];\n        this.materialPoint = null;\n        this.materialLine = null;\n        this.materialAngle = null;\n        this.materialAngleOutline = null;\n        this.materialGreyOutPlane = null;\n        this.materialFace = null;\n        this.angleArc = null;\n        this.angleOutline = [];\n        this.showMeasureResult = false;\n        this.visibleLabels = [];\n        this.overlayName = 'measure-indicator-overlay-' + (measurement.id || '');\n        this.xAxis = this.viewer.autocam.getWorldRightVector();\n        this.yAxis = this.viewer.autocam.getWorldUpVector();\n        this.zAxis = this.viewer.autocam.getWorldFrontVector();\n    };\n\n\n\n    var proto = Indicator.prototype;\n    av.GlobalManagerMixin.call(proto);\n\n    proto.init = function() {\n        return false;\n    };\n\n    proto.updateDistance = function() {\n        return false;\n    };\n\n    proto.updateAngle = function() {\n        return false;\n    };\n\n    proto.clear = function() {\n        return false;\n    };\n\n    proto.updateLabelsPosition = function() {\n        return false;\n    };\n\n    proto.renderFromPoints = function(points, showMeasureResult) {\n        this.showMeasureResult = showMeasureResult;\n\n        this.clear();\n\n        for (var i = 1; i <= Object.keys(points).length; i++) {\n            const p = points[i];\n            if (!this.endpoints[i]) {\n                this.createEndpoint(i);\n            }\n    \n            this.endpoints[i].position = new THREE.Vector3(p.x, p.y, p.z);\n            this.showClick(i);\n        }\n            \n        this.renderRubberbandFromPoints(points);\n        \n        this.updateLabelsPosition();\n    };\n\n    // Renders the measurement and the labels.\n    proto.render = function(picks, showMeasureResult) {\n\n        this.showMeasureResult = showMeasureResult;\n\n        this.clear();\n\n        for (var i = 1; i <= Object.keys(picks).length; i++) {\n            if (this.measurement.hasPick(i)) {\n                this.renderPick(i);\n            }\n        }\n            \n        this.renderRubberband(picks);\n        \n        this.updateLabelsPosition();\n    };\n\n    proto.changeEndpointOnEditStyle = function(endpointNumber, isEditing) {\n        return false;\n    };\n\n    proto.handleResize = function() {\n        return false;\n    };\n\n    proto.setNoTopology = function() {\n        return false;\n    };\n\n    proto.setFetchingTopology = function() {\n        return false;\n    };\n\n    proto.setTopologyAvailable = function() {\n        return false;\n    };\n\n    proto.clientToCanvasCoords = function(event) {\n        var rect = this.viewer.impl.getCanvasBoundingClientRect();\n        var res = {};\n        if( event.hasOwnProperty(\"center\") )\n        {\n            event.canvasX = res.x = event.center.x - rect.left;\n            event.canvasY = res.y = event.center.y - rect.top;\n        }\n        else\n        {\n            event.canvasX = res.x = event.pointers[0].clientX - rect.left;\n            event.canvasY = res.y = event.pointers[0].clientY - rect.top;\n        }\n\n        return res;\n    };\n\n    proto.initLabelMobileGestures = function(label, pointNumber) {\n        var magnifyingGlass = this.viewer.toolController.getTool(\"magnifyingGlass\");\n\n        this.hammer = new av.Hammer.Manager(label, {\n                recognizers: [\n                    av.GestureRecognizers.drag,\n                    av.GestureRecognizers.singletap\n                ],\n                handlePointerEventMouse: false,\n                inputClass: av.isIE11 ? av.Hammer.PointerEventInput : av.Hammer.TouchInput\n            });\n\n        this.onSingleTapBinded = function(event) { \n                                    var pos = this.clientToCanvasCoords(event);\n                                    this.snapper.onMouseDown(pos);\n                                    this.tool.editEndpoint(event, pointNumber, this.measurement.id); \n                                }.bind(this);\n\n        this.onDragStartBinded = function(event) {\n                                    var pos = this.clientToCanvasCoords(event);\n                                    this.snapper.onMouseDown(pos);\n                                    this.tool.editEndpoint(event, pointNumber, this.measurement.id);\n                                    this.tool.editByDrag = true;\n\n                                    // Activate Magnifying Glass and tool by faking press event.\n                                    event.type = \"press\";\n                                    magnifyingGlass.handlePressHold(event);\n                                    this.tool.handlePressHold(event);\n                                    event.type = \"dragstart\";\n                                    magnifyingGlass.handleGesture(event);\n                                    this.tool.handleGesture(event);\n                                }.bind(this);\n\n        this.onDragMoveBinded = function(event){ \n                                    var pos = this.clientToCanvasCoords(event);\n                                    this.snapper.onMouseDown(pos);\n\n                                    magnifyingGlass.handleGesture(event);\n                                    this.tool.handleGesture(event);\n                                }.bind(this);\n\n        this.onDragEndBinded = function(event){ \n                                    var pos = this.clientToCanvasCoords(event);\n                                    this.snapper.onMouseDown(pos);\n                                    \n                                    // Deactivate Magnifying Glass and tool by faking pressup event.\n                                    magnifyingGlass.handleGesture(event);\n                                    this.tool.handleGesture(event);\n                                    event.type = \"pressup\";\n                                    magnifyingGlass.handlePressHold(event);\n                                    this.tool.handlePressHold(event);\n\n                                    this.tool.handleButtonUp(event);\n                                }.bind(this);\n\n        this.hammer.on(\"singletap\", this.onSingleTapBinded);\n        this.hammer.on(\"dragstart\", this.onDragStartBinded);\n        this.hammer.on(\"dragmove\", this.onDragMoveBinded);\n        this.hammer.on(\"dragend\", this.onDragEndBinded);\n    };\n\n    proto.clearLabelMobileGestures = function() {\n        if (this.hammer) {\n            this.hammer.off(\"singletap\", this.onSingleTapBinded);\n            this.hammer.off(\"dragstart\", this.onDragStartBinded);\n            this.hammer.off(\"dragmove\", this.onDragMoveBinded);\n            this.hammer.off(\"dragend\", this.onDragEndBinded);\n            this.hammer = null;\n        }\n    };\n\n    proto.updateVisibleLabelsArray = function(label, isVisible) {\n        if (isVisible) {\n            if (!(this.visibleLabels.indexOf(label) > -1)) {\n                this.visibleLabels.push(label);        \n            }\n        } else {\n            // remove from array\n            var index = this.visibleLabels.indexOf(label);\n            if (index > -1) {\n                this.visibleLabels.splice(index, 1);\n            }\n        }\n    };\n\n    proto.hideEndpoints = function() {\n        for (var name in this.endpoints) {\n            if (this.endpoints.hasOwnProperty(name)) {\n                var endpoint = this.endpoints[name];\n                if (endpoint.label) {\n                    this.hideLabel(endpoint.label);\n                }\n            }\n        }\n    };\n\n    proto.showEndpoints = function() {\n        for (var name in this.endpoints) {\n            if (this.endpoints.hasOwnProperty(name)) {\n                var endpoint = this.endpoints[name];\n                if (this.measurement.hasPick(name) && endpoint.label) {\n                    this.showLabel(endpoint.label);\n                }\n            }\n        }\n    };\n\n    proto.hideLabel = function(label) {\n        if (label) {\n            MeasureCommon.safeToggle(label, 'visible', false);\n            this.updateVisibleLabelsArray(label, false);      \n        }\n    };\n\n    proto.showLabel = function(label) {\n        if (label) {\n            MeasureCommon.safeToggle(label, 'visible', true);\n            this.updateVisibleLabelsArray(label, true);\n        }\n    };\n\n    proto.changeEndpointOnEditStyle = function(endpointNumber, isEditing) {\n        if (this.endpoints[endpointNumber] && this.endpoints[endpointNumber].label) {\n            MeasureCommon.safeToggle(this.endpoints[endpointNumber].label, 'on-edit', isEditing);\n        }\n    };\n\n    proto.changeEndpointEditableStyle = function(endpointNumber, isEditable) {\n        if (this.endpoints[endpointNumber] && this.endpoints[endpointNumber].label) {\n            MeasureCommon.safeToggle(this.endpoints[endpointNumber].label, 'editable', isEditable);\n        }\n    };\n\n    proto.changeAllEndpointsEditableStyle = function(isEditable) {\n        for (var name in this.endpoints) {\n            if (this.endpoints.hasOwnProperty(name)) {\n                this.changeEndpointEditableStyle(name, isEditable);    \n            }\n        }\n    };\n\n    proto.changeAllEndpointsOnEditStyle = function(isEditing) {\n        for (var name in this.endpoints) {\n            if (this.endpoints.hasOwnProperty(name)) {\n                this.changeEndpointOnEditStyle(name, isEditing);\n            }\n        }\n    };\n\n    proto.hideLabelsOutsideOfView = function() {\n        // For each label, check if it's inside the camera viewport.\n        if (this.viewer.model && !this.viewer.model.is2d()) {\n            this.visibleLabels.forEach(function(label) {\n\n                // Ignore labels if position is not computed yet. This may temporarily happen, because label positions are not\n                // always immediately assigned. (see MeasureToolIndicator.js)\n                // Note that we must not set them to invisible here, because this may cause a hen-and-egg-problem: \n                // Some code sections in MeasureToolIndicator.updatePositions() don't set the label position for invisible labels.\n                if (!label.point) {\n                    return;\n                }\n\n                var show = this.viewer.navigation.isPointVisible(label.point);\n\n                if ((label.classList.contains('visible') && !show) || (!label.classList.contains('visible') && show)) {\n                    label.classList.toggle('visible', show);    \n                } \n\n            }.bind(this));\n        }\n    };\n\n    proto.showClick = function(pickNumber) {\n        if (this.tool.getActivePointIndex() !== pickNumber) {\n            this.showLabel(this.endpoints[pickNumber].label);\n        }\n    };\n\n    proto.hideClick = function(pickNumber) {\n\n        if (this.endpoints[pickNumber]) {\n            this.hideLabel(this.endpoints[pickNumber].label);    \n        }\n    };\n\n    proto.renderPick = function(pickNumber) {\n        if (!this.endpoints[pickNumber]) {\n            this.createEndpoint(pickNumber);\n        }\n\n        this.renderEndpointGeometry(pickNumber);\n        this.showClick(pickNumber);\n    };\n\n    proto.renderEndpointGeometry = function(pickNumber) {\n        var geometry = MeasureCommon.getSnapResultPosition(this.measurement.getPick(pickNumber), this.viewer);\n        \n        if (geometry !== null) {\n            this.endpoints[pickNumber].position = geometry.clone();\n        }\n    };\n\n\n    // This is a workaround to deal with the limitation on linewidth on Windows due to the ANGLE library\n    proto.drawEdgeAsCylinder = function(geom, material, linewidth, type, cylinderGeometry) {\n\n        // The array for all cylinders\n        var edge = [];\n        var cylinder;\n\n        if (type == 1) { // LinePieces\n            for (var i = 0; i < geom.vertices.length; i += 2) {\n                cylinder = this.cylinderMesh(geom.vertices[i], geom.vertices[i + 1], material, linewidth, cylinderGeometry);\n                this.setCylinderScale(cylinder, geom.vertices[i], geom.vertices[i + 1]);\n                edge.push(cylinder);\n            }\n        }\n        else { // LineStrip\n            for (var i = 0; i < geom.vertices.length - 1; i++) {\n                cylinder = this.cylinderMesh(geom.vertices[i], geom.vertices[i + 1], material, linewidth, cylinderGeometry);\n                this.setCylinderScale(cylinder, geom.vertices[i], geom.vertices[i + 1]);\n                edge.push(cylinder);\n            }\n        }\n\n\n        return edge;\n    };\n\n    proto.drawDashedLine = function(p1, p2, dashSize, gapSize, material, width, overlayName) {\n\n        var geometry = new THREE.Geometry();\n        var line = new THREE.Vector3().subVectors(p2, p1);\n        var lineLength = line.length() - gapSize;\n        var lineDirection = line.normalize();\n        \n        var i = 0;\n        var pos = p1.clone();\n        var currLength = 0;\n\n        while (currLength < lineLength) {\n            var isPointVisible = this.viewer.navigation.isPointVisible(pos);\n            \n            if (isPointVisible) {\n                geometry.vertices[i] = pos.clone();\n                i++;\n            }\n            \n            pos.addVectors(pos, lineDirection.clone().multiplyScalar(dashSize));\n            \n            if (isPointVisible) {\n                geometry.vertices[i] = pos.clone();\n                i++;\n            }\n            \n            pos.addVectors(pos, lineDirection.clone().multiplyScalar(gapSize));\n\n            currLength += dashSize + gapSize;\n        }\n        \n        line = this.drawEdgeAsCylinder(geometry, material, width, 1, this.getNewCylinderGeometry());\n        this.viewer.impl.addMultipleOverlays(overlayName, line);\n\n        return line;\n    };\n\n    // This is a workaround to deal with the limitation on linewidth on Windows due to the ANGLE library\n    proto.drawLineAsCylinder = function(geom, material, linewidth, overlayName) {\n\n        var line;\n\n        if (geom.vertices.length == 2) {\n            line = this.cylinderMesh(geom.vertices[0], geom.vertices[1], material, linewidth, this.getNewCylinderGeometry());\n            this.setCylinderScale(line, geom.vertices[0], geom.vertices[1]);\n            this.viewer.impl.addOverlay(overlayName, line);\n        }\n\n        return line;\n    };\n\n    proto.getNewCylinderGeometry = function() {\n        return new THREE.CylinderGeometry(0.1, 0.1, 1, 8, 1, true);\n    };\n\n\n    proto.cylinderMesh = function(pointX, pointY, material, linewidth, cylinderGeometry) {\n\n        var direction = new THREE.Vector3().subVectors(pointY, pointX);\n        var orientation = new THREE.Matrix4();\n        orientation.lookAt(pointX, pointY, new THREE.Object3D().up);\n        orientation.multiply(new THREE.Matrix4().set(linewidth, 0, 0, 0,\n            0, 0, linewidth, 0,\n            0, -direction.length(), 0, 0,\n            0, 0, 0, 1));\n\n        var edge = new THREE.Mesh(cylinderGeometry, material);\n        edge.applyMatrix(orientation);\n        edge.lmv_line_width = linewidth;\n        edge.position.x = (pointY.x + pointX.x) / 2;\n        edge.position.y = (pointY.y + pointX.y) / 2;\n        edge.position.z = (pointY.z + pointX.z) / 2;\n\n        return edge;\n    };\n\n    // Set scale for cylinder\n    proto.setCylinderScale = function(cylinderMesh, p1, p2) {\n        var scale;\n\n        if (p1 && p2) {\n            var point = MeasureCommon.nearestPointInPointToSegment(this.viewer.navigation.getPosition(), p1, p2);\n            scale = this.setScale(point);    \n        } else {\n            scale = this.setScale(cylinderMesh.position);\n        }\n\n        if (cylinderMesh.hasOwnProperty(\"lmv_line_width\"))\n            scale *= cylinderMesh.lmv_line_width;\n        cylinderMesh.scale.x = scale;\n        cylinderMesh.scale.z = scale;\n    };\n\n\n    // Set scale for vertex and extension dashed line\n    proto.setScale = function(point) {\n\n        var pixelSize = 5;\n\n        var navapi = this.viewer.navigation;\n        var camera = navapi.getCamera();\n        var position = navapi.getPosition();\n\n        var p = point.clone();\n\n        var distance = camera.isPerspective ? p.sub(position).length()\n            : navapi.getEyeVector().length();\n\n        var fov = navapi.getVerticalFov();\n        var worldHeight = 2.0 * distance * Math.tan(THREE.Math.degToRad(fov * 0.5));\n\n        var viewport = navapi.getScreenViewport();\n        var scale = pixelSize * worldHeight / viewport.height;\n\n        return scale;\n    };\n\n    proto.alignLabelWithLine = function(label, p1, p2, offset, viewer){\n        var camUpVector = viewer.navigation.getCameraUpVector();\n        var worldUpVec = new THREE.Vector3(0,1,0);\n        var cameraAngle = worldUpVec.angleTo(camUpVector) * 180 / Math.PI;\n\n        cameraAngle = camUpVector.x >= 0 ? cameraAngle : -cameraAngle;\n        \n        var angle = null;\n\n        var deltaX = p1.x - p2.x;\n        var deltaY = p1.y - p2.y;\n\n        if (p1.x < p2.x) {\n            angle =  Math.atan2(-deltaY , -deltaX) * 180 / Math.PI;    \n        } \n        else {\n            angle =  Math.atan2(deltaY , deltaX) * 180 / Math.PI;    \n        }\n\n        angle = -(angle + cameraAngle);\n\n        if (Math.abs(angle) > 90){\n            angle = angle + 180;\n        }\n\n        label.style.transform = 'rotate('+ angle +'deg) translate(0px, ' + offset + 'px)';\n    };\n\n    proto.destroy = function() {\n        this.materialPoint = null;\n        this.materialFace = null;\n        this.materialLine = null;\n        this.materialAngle = null;\n\n        if (av.isTouchDevice()) {\n            this.clearLabelMobileGestures();    \n        }\n\n        for (var name in this.endpoints) {\n            if (this.endpoints.hasOwnProperty(name)) {\n                var endPoint = this.endpoints[name];\n\n                if (endPoint.label) {\n                    endPoint.label.removeEventListener(av.isSafari() ? 'mousedown' : 'pointerdown', this.onMouseClickBinded);\n                    endPoint.label.removeEventListener('mousewheel', this.viewer.toolController.mousewheel);\n                    endPoint.label.parentNode.removeChild(endPoint.label);\n                    endPoint.label = null;\n                }\n            }\n        }\n\n        this.visibleLabels = [];\n    };\n\n    proto.renderRubberbandFromPoints = function(points) {\n        switch (this.measurement.measurementType) {\n            case MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE:\n                var start = points[1];\n                var end = points[2];\n                \n                if (start && end) {\n                    this.renderDistanceMeasurementFromPoints(start, end);\n                }\n                break;\n\n            case MeasureCommon.MeasurementTypes.MEASUREMENT_ANGLE:\n                this.renderAngleMeasurementFromPoints(points);\n                break;\n\n            case MeasureCommon.MeasurementTypes.MEASUREMENT_AREA:\n                this.renderAreaMeasurementFromPoints(points);\n                break;\n\n            case MeasureCommon.MeasurementTypes.MEASUREMENT_LOCATION:\n                this.renderLocationMeasurementFromPoints(points);\n                break;\n\n            case MeasureCommon.MeasurementTypes.MEASUREMENT_CALLOUT:\n                this.renderCalloutMeasurementFromPoints(points);\n                break;\n            }\n\n    }\n\n    proto.renderRubberband = function(picks) {\n\n        switch (this.measurement.measurementType) {\n            case MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE:\n                var previewsPick = picks[1];\n                var activePick = picks[2];\n                var start = MeasureCommon.getSnapResultPosition(previewsPick, this.viewer);\n                var end = MeasureCommon.getSnapResultPosition(activePick, this.viewer);\n                \n                if (start && end) {\n                    this.renderDistanceMeasurement(start, end);\n                }\n                break;\n\n            case MeasureCommon.MeasurementTypes.MEASUREMENT_ANGLE:\n                this.renderAngleMeasurement(picks);\n                break;\n\n            case MeasureCommon.MeasurementTypes.MEASUREMENT_AREA:\n                this.renderAreaMeasurement(picks);\n                break;\n\n            case MeasureCommon.MeasurementTypes.MEASUREMENT_LOCATION:\n                this.renderLocationMeasurement(picks);\n                break;\n\n            case MeasureCommon.MeasurementTypes.MEASUREMENT_CALLOUT:\n                this.renderCalloutMeasurement(picks);\n                break;\n            }\n    };\n\n    proto.initMouseEvent = function(label, pointNumber) {\n        \n        var isSafari = av.isSafari();\n        this.onMouseClickBinded = function(event) { \n            if(isSafari || event.pointerType === 'mouse'){\n                event.canvasX = event.clientX;\n                event.canvasY = event.clientY;\n                this.tool.editEndpoint(event, pointNumber, this.measurement.id); \n            }\n        }.bind(this);\n        label.addEventListener(isSafari ? 'mousedown' : 'pointerdown', this.onMouseClickBinded);         \n    };\n","    // Centroid of a polygon is the average of its points.\n    export function getCentroidOfPolygon(points) {\n        var centroid = new THREE.Vector3();\n        var n = points.length;\n\n        for (var i = 0; i < n; i++) {\n            centroid.add(points[i]);\n        }\n\n        centroid.multiplyScalar(1 / n);\n        return centroid;\n    }\n\n    // Algorithm based on https://github.com/mapbox/polylabel\n    export function getPolygonVisualCenter(polygon) {\n        function compareMax(a, b) {\n            return b.max - a.max;\n        }\n\n        function Cell(x, y, h, polygon) {\n            this.x = x; // cell center x\n            this.y = y; // cell center y\n            this.h = h; // half the cell size\n            this.d = pointToPolygonDist(x, y, polygon); // distance from cell center to polygon\n            this.max = this.d + this.h * Math.SQRT2; // max distance to polygon within a cell\n        }\n\n        // signed distance from point to polygon outline (negative if point is outside)\n        function pointToPolygonDist(x, y, polygon) {\n            var inside = false;\n            var minDistSq = Infinity;\n\n            for (var k = 0; k < polygon.length; k++) {\n                var ring = polygon[k];\n\n                for (var i = 0, len = ring.length, j = len - 1; i < len; j = i++) {\n                    var a = ring[i];\n                    var b = ring[j];\n\n                    if ((a.y > y !== b.y > y) &&\n                        (x < (b.x - a.x) * (y - a.y) / (b.y - a.y) + a.x)) inside = !inside;\n\n                    minDistSq = Math.min(minDistSq, getSegDistSq(x, y, a, b));\n                }\n            }\n\n            return (inside ? 1 : -1) * Math.sqrt(minDistSq);\n        }\n\n        // get polygon centroid\n        function getCentroidCell(polygon) {\n            var area = 0;\n            var x = 0;\n            var y = 0;\n            var points = polygon[0];\n\n            for (var i = 0, len = points.length, j = len - 1; i < len; j = i++) {\n                var a = points[i];\n                var b = points[j];\n                var f = a.x * b.y - b.x * a.y;\n                x += (a.x + b.x) * f;\n                y += (a.y + b.y) * f;\n                area += f * 3;\n            }\n            if (area === 0) return new Cell(points[0].x, points[0].y, 0, polygon);\n            return new Cell(x / area, y / area, 0, polygon);\n        }\n\n        // get squared distance from a point to a segment\n        function getSegDistSq(px, py, a, b) {\n\n            var x = a.x;\n            var y = a.y;\n            var dx = b.x - x;\n            var dy = b.y - y;\n\n            if (dx !== 0 || dy !== 0) {\n\n                var t = ((px - x) * dx + (py - y) * dy) / (dx * dx + dy * dy);\n\n                if (t > 1) {\n                    x = b.x;\n                    y = b.y;\n\n                } else if (t > 0) {\n                    x += dx * t;\n                    y += dy * t;\n                }\n            }\n\n            dx = px - x;\n            dy = py - y;\n\n            return dx * dx + dy * dy;\n        }\n\n        function TinyQueue(data, compare) {\n\n            function defaultCompare(a, b) {\n                return a < b ? -1 : a > b ? 1 : 0;\n            }\n\n            if (!(this instanceof TinyQueue)) return new TinyQueue(data, compare);\n\n            this.data = data || [];\n            this.length = this.data.length;\n            this.compare = compare || defaultCompare;\n\n            if (this.length > 0) {\n                for (var i = (this.length >> 1); i >= 0; i--) this._down(i);\n            }\n        }\n\n        TinyQueue.prototype = {\n\n            push: function (item) {\n                this.data.push(item);\n                this.length++;\n                this._up(this.length - 1);\n            },\n\n            pop: function () {\n                if (this.length === 0) return undefined;\n\n                var top = this.data[0];\n                this.length--;\n\n                if (this.length > 0) {\n                    this.data[0] = this.data[this.length];\n                    this._down(0);\n                }\n                this.data.pop();\n\n                return top;\n            },\n\n            peek: function () {\n                return this.data[0];\n            },\n\n            _up: function (pos) {\n                var data = this.data;\n                var compare = this.compare;\n                var item = data[pos];\n\n                while (pos > 0) {\n                    var parent = (pos - 1) >> 1;\n                    var current = data[parent];\n                    if (compare(item, current) >= 0) break;\n                    data[pos] = current;\n                    pos = parent;\n                }\n\n                data[pos] = item;\n            },\n\n            _down: function (pos) {\n                var data = this.data;\n                var compare = this.compare;\n                var halfLength = this.length >> 1;\n                var item = data[pos];\n\n                while (pos < halfLength) {\n                    var left = (pos << 1) + 1;\n                    var right = left + 1;\n                    var best = data[left];\n\n                    if (right < this.length && compare(data[right], best) < 0) {\n                        left = right;\n                        best = data[right];\n                    }\n                    if (compare(best, item) >= 0) break;\n\n                    data[pos] = best;\n                    pos = left;\n                }\n\n                data[pos] = item;\n            }\n        };\n\n        if (polygon.length === 3) {\n            return getCentroidOfPolygon(polygon);\n        }\n\n        var precision = 0.01;\n        polygon = [polygon];\n\n        // find the bounding box of the outer ring\n        var minX, minY, maxX, maxY;\n        for (var i = 0; i < polygon[0].length; i++) {\n            var p = polygon[0][i];\n            if (!i || p.x < minX) minX = p.x;\n            if (!i || p.y < minY) minY = p.y;\n            if (!i || p.x > maxX) maxX = p.x;\n            if (!i || p.y > maxY) maxY = p.y;\n        }\n\n        var width = maxX - minX;\n        var height = maxY - minY;\n        var cellSize = Math.min(width, height);\n        var h = cellSize / 2;\n\n        // a priority queue of cells in order of their \"potential\" (max distance to polygon)\n        var cellQueue = new TinyQueue(null, compareMax);\n\n        if (cellSize === 0) return [minX, minY];\n\n        // cover polygon with initial cells\n        for (var x = minX; x < maxX; x += cellSize) {\n            for (var y = minY; y < maxY; y += cellSize) {\n                cellQueue.push(new Cell(x + h, y + h, h, polygon));\n            }\n        }\n\n        // take centroid as the first best guess\n        var bestCell = getCentroidCell(polygon);\n\n        // special case for rectangular polygons\n        var bboxCell = new Cell(minX + width / 2, minY + height / 2, 0, polygon);\n        if (bboxCell.d > bestCell.d) bestCell = bboxCell;\n\n        while (cellQueue.length) {\n            // pick the most promising cell from the queue\n            var cell = cellQueue.pop();\n\n            // update the best cell if we found a better one\n            if (cell.d > bestCell.d) {\n                bestCell = cell;\n            }\n\n            // do not drill down further if there's no chance of a better solution\n            if (cell.max - bestCell.d <= precision) continue;\n\n            // split the cell into four cells\n            h = cell.h / 2;\n            cellQueue.push(new Cell(cell.x - h, cell.y - h, h, polygon));\n            cellQueue.push(new Cell(cell.x + h, cell.y - h, h, polygon));\n            cellQueue.push(new Cell(cell.x - h, cell.y + h, h, polygon));\n            cellQueue.push(new Cell(cell.x + h, cell.y + h, h, polygon));\n        }\n\n        return {x:bestCell.x, y:bestCell.y};\n    };\n","import { Indicator } from './Indicator'\nimport { getPolygonVisualCenter } from \"./PolygonCentroid\";\n\n    var av = Autodesk.Viewing;\n    var MeasureCommon = Autodesk.Viewing.MeasureCommon;\n\n    /** Color values should match Measure.css **/\n    const DEFAULT_LINE_COLOR = '009bea';\n    const X_AXIS_COLOR = \"F12C2C\";\n    const Y_AXIS_COLOR = \"0BB80B\";\n    const Z_AXIS_COLOR = \"2C2CF1\";\n    /*******************************************/\n\n    const tmpColor = new THREE.Color();\n    function numToColor(num) {\n        return tmpColor.set(num >>> 8).getHexString();\n    }\n\n    // /** @constructor */\n    export function MeasureToolIndicator( viewer, measurement, measureTool )\n    {\n        Indicator.call(this, viewer, measurement, measureTool);\n        this.measureTool = measureTool;\n        this.endpoints = [];\n        this.lines = { \n            xyz: {axis: false, material: this._createLineMaterial(DEFAULT_LINE_COLOR), className: 'adsk-icon-axis-delta' + '-xyz measure-label-axis-delta' + ' measure-label-axis-xyz'},\n            x:   {axis: true,  material: this._createLineMaterial(X_AXIS_COLOR), className: 'adsk-icon-axis-delta' + '-x measure-label-axis-delta' + ' measure-label-axis-x', iconText: 'X'},\n            y:   {axis: true,  material: this._createLineMaterial(Y_AXIS_COLOR), className: 'adsk-icon-axis-delta' + '-y measure-label-axis-delta' + ' measure-label-axis-y', iconText: 'Y'},\n            z:   {axis: true,  material: this._createLineMaterial(Z_AXIS_COLOR), className: 'adsk-icon-axis-delta' + '-z measure-label-axis-delta' + ' measure-label-axis-z', iconText: 'Z'}\n        };\n        this.applyLineColor(this.lines.xyz.material);\n        this.segments = [];\n        this.dashedLines = [];\n        this.simple = false;\n        this.angleLabel = {};\n        this.areaLabel = {};\n        this.locationLabel = {};\n        this.calloutLabel = {};\n        this.labels = [];\n        this.isLeaflet = false;\n        this.topologyStatus = TOPOLOGY_NOT_AVAILABLE;\n        this.tmpVector = new THREE.Vector3();\n        this.surfaceColor = new THREE.MeshBasicMaterial({\n            color: parseInt(DEFAULT_LINE_COLOR, 16),\n            opacity: 0.15,\n            transparent: true,\n            depthTest: false,\n            depthWrite: false,\n            side: THREE.DoubleSide\n        });   \n        this.applyLineColor(this.surfaceColor);\n    }\n\n    MeasureToolIndicator.prototype = Object.create(Indicator.prototype);\n    MeasureToolIndicator.prototype.constructor = MeasureToolIndicator;\n    var proto = MeasureToolIndicator.prototype;\n\n    var _labelsSpace = 4;\n    var _angleLabelOffset = 5;\n    var TOPOLOGY_NOT_AVAILABLE = 0;\n    var TOPOLOGY_FETCHING = 1; \n    var TOPOLOGY_AVAILABLE = 2;\n    var _selectorAreaSize = 15;\n\n    var _tipHeight = 2;\n    var _tipWidth = 3;\n    var _segmentWidth = 4;\n    var _dashedSegmentWidth = 3;\n    var _axisLineWidth = 2;\n    var _dashSize = 2;\n    var _gapSize = 1;\n\n    var _angleArcWidth = 2;\n\n    function isVisible(label) {\n        return label.classList.contains('visible');\n    }\n\n    proto.init = function() {\n        this.isLeaflet = this.viewer.model.isLeaflet();\n        // Create HTML Labels\n        var currLabel;\n\n        this.onSelectionAreaClickedBinded = this.onSelectionAreaClicked.bind(this);\n\n        // Line\n        if (!this.lines.xyz.label) {\n            currLabel = this.lines.xyz.label = this.createMeasurementLabel(); // Measurement result\n            currLabel.addEventListener('mousewheel', this.viewer.toolController.mousewheel);\n            currLabel.addEventListener('click', this.onSelectionAreaClickedBinded);\n            this.viewer.container.appendChild(currLabel);\n        }\n        switch (this.topologyStatus) {\n            case TOPOLOGY_FETCHING:\n                this.setFetchingTopology();\n                break;\n            case TOPOLOGY_AVAILABLE:\n                this.setTopologyAvailable();\n                break;\n            case TOPOLOGY_NOT_AVAILABLE:\n                this.setNoTopology();\n                break;\n        }\n\n        this.showMeasureResult = false;\n\n        this.onCameraChangeBinded = this.onCameraChange.bind(this);\n        this.viewer.addEventListener(av.CAMERA_CHANGE_EVENT, this.onCameraChangeBinded);\n\n        this.handleButtonUpBinded = this.measureTool.handleButtonUp.bind(this.measureTool);\n        this.addWindowEventListener('mouseup', this.handleButtonUpBinded);\n    };\n\n    proto._hexToCorrectedColor = function (color) {\n        tmpColor.set(parseInt(color, 16));\n\n        // In case of a 3D viewer, manually apply gamma correction to the materials.\n        // It is needed because we are using THREE.js materials that don't get LMV's shaders.\n        // So GAMMA_INPUT & GAMMA_OUTPUT are missing in their shaders.\n        if (!this.viewer.impl.is2d) {\n          tmpColor.multiply(tmpColor);\n        }\n\n        return tmpColor;\n    }\n\n    proto._createLineMaterial = function(color) {\n        const correctedColor = this._hexToCorrectedColor(color);\n        \n        const material = new THREE.MeshBasicMaterial({\n            color: correctedColor.getHex(),\n            depthTest: false,\n            depthWrite: false,\n            side: THREE.DoubleSide,\n        });\n\n        return material;\n    }\n\n    proto.createEndpoint = function(index) {\n        this.endpoints[index] = {};\n\n        // Don't render endpoints that are under the labels.\n        if (index === 2 &&\n            (this.measurement.measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_LOCATION ||\n                this.measurement.measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_CALLOUT)) {\n            return;\n        }\n\n        var currLabel = this.endpoints[index].label = this.createSnapResultLabel(index);\n        this.viewer.container.appendChild(currLabel);    \n    };\n\n    proto.applyLineColor = function(material) {\n        if (!material)\n            return;\n\n        const hasColor = this.measurement.options && this.measurement.options.format &&\n            this.measurement.options.format.TEXTCOLOR && this.measurement.options.format.TEXTCOLOR.Enabled === 'true' &&\n            this.measurement.options.format.FILLCOLOR && this.measurement.options.format.FILLCOLOR.Enabled === 'true' &&\n            this.measurement.options.format.LINECOLOR && this.measurement.options.format.LINECOLOR.Enabled === 'true';\n        const lineColor = hasColor ? numToColor(this.measurement.options.format.LINECOLOR.UIntValue) : DEFAULT_LINE_COLOR;\n        const correctedColor = this._hexToCorrectedColor(lineColor);\n\n        material.color.set(correctedColor);\n    };\n\n    proto.applyLabelColors = function(label) {\n        if (!label)\n            return;\n\n        const hasColor = this.measurement.options && this.measurement.options.format &&\n            this.measurement.options.format.TEXTCOLOR && this.measurement.options.format.TEXTCOLOR.Enabled === 'true' &&\n            this.measurement.options.format.FILLCOLOR && this.measurement.options.format.FILLCOLOR.Enabled === 'true' &&\n            this.measurement.options.format.LINECOLOR && this.measurement.options.format.LINECOLOR.Enabled === 'true';\n        const color = hasColor ? `#${numToColor(this.measurement.options.format.TEXTCOLOR.UIntValue)}` : `#${DEFAULT_LINE_COLOR}`;\n        const bg = hasColor ? `#${numToColor(this.measurement.options.format.FILLCOLOR.UIntValue)}` : '#f4f4f4';\n        label.style.color = color;\n        label.style.backgroundColor = bg;\n    };\n\nproto.updateLabelsPosition = function() {\n\n        var point,\n            xy,\n            label,\n            key;\n\n        const placeLabel = (xOff, yOff) => {\n            xy = MeasureCommon.project(point, this.viewer);\n\n            label.style.top  = (xy.y - yOff) + 'px';\n            label.style.left = (xy.x - xOff) + 'px';\n            label.point = point;\n            this.applyLabelColors(label);\n            this.labels.push(label);\n        };\n    \n        for (key in this.endpoints) {\n            if (this.endpoints.hasOwnProperty(key)) {\n                    label = this.endpoints[key].label;\n                    point = this.endpoints[key].position;\n\n                if (label && point && isVisible(label)) {\n                    xy = MeasureCommon.project(point, this.viewer);\n\n                    placeLabel(label.getBoundingClientRect().width / 2,\n                        label.getBoundingClientRect().height / 2);\n                }\n            }\n        }\n\n        for (var name in this.lines) {\n            if (this.lines.hasOwnProperty(name)) {\n                var item = this.lines[name];\n                    label = item.label;\n\n                if (label && item.p1 && item.p2 && isVisible(label)) {\n                    \n                    item.line.visible = item.visible;\n\n                    point = { x: (item.p1.x + item.p2.x)/2, y: (item.p1.y + item.p2.y)/2, z: (item.p1.z + item.p2.z)/2 };\n                    \n                    xy = MeasureCommon.project(point, this.viewer);\n                    label.style.top  = xy.y - Math.floor(label.clientHeight / 2) + 'px';\n                    label.style.left = xy.x - Math.floor(label.clientWidth / 2) + 'px';\n\n                    if (this.viewer.model && this.viewer.model.is2d()) {\n                        var offset = item === this.lines.xyz ? 0 : label.clientHeight;\n\n                        var p1Projected = MeasureCommon.project(item.p1, this.viewer);\n                        var p2Projected = MeasureCommon.project(item.p2, this.viewer);\n\n                        if (label.clientWidth >= p1Projected.distanceTo(p2Projected) - this.endpoints[1].label.clientWidth) {\n                            if (item === this.lines.xyz) {\n                                offset = label.clientHeight;\n                            } else {\n                                // Hide all axis labels and quit the loop\n                            \n                                this.lines.x.line.visible = false;\n                                this.lines.y.line.visible = false;\n\n                                this.viewer.impl.invalidate(false, false, /*overlayDirty=*/true);\n\n                                for (name in this.lines) {\n                                    if (this.lines.hasOwnProperty(name)) {\n                                        if (this.lines[name] !== this.lines.xyz) {\n                                            var currLabel = this.lines[name].label;\n                                            if (currLabel) {\n                                                currLabel.style.opacity = 0;\n                                            }\n                                        }\n                                    }\n                                }\n\n                                break;\n                                \n                            }\n                        }\n\n                        if (item !== this.lines.xyz) {\n                            var xyzDirection = new THREE.Vector3();\n                            var itemDirection = new THREE.Vector3();\n                            xyzDirection.subVectors(this.lines.xyz.p1, this.lines.xyz.p2).normalize();\n                            itemDirection.subVectors(item.p1, item.p2).normalize();\n                            var normal = xyzDirection.cross(this.viewer.navigation.getEyeVector()).normalize();\n                            var angle = normal.dot(itemDirection);\n                            \n                            if (angle < 0) {\n                                offset = -offset;\n                            }\n                        }\n\n                        this.alignLabelWithLine(label, item.p1, item.p2, offset, this.viewer);\n                    }\n\n                    label.style.opacity = 1;\n                    label.point = point;\n                    this.applyLabelColors(label);\n                    this.labels.push(label);\n                }\n            }\n        }\n\n        if (this.angleLabel) {\n\n            label = this.angleLabel.label;\n\n            if (label && this.angleLabel.p1 && this.angleLabel.p2 && isVisible(label)) {\n                point = { x: (this.angleLabel.p1.x + this.angleLabel.p2.x)/2, y: (this.angleLabel.p1.y + this.angleLabel.p2.y)/2, z: (this.angleLabel.p1.z + this.angleLabel.p2.z)/2 };\n                xy = MeasureCommon.project(point, this.viewer, _angleLabelOffset);\n                placeLabel(Math.floor(label.clientWidth / 2), Math.floor(label.clientHeight / 2));\n            }\n        }\n\n        if (this.locationLabel) {\n\n            label = this.locationLabel.label;\n\n            if (label && this.locationLabel.p && isVisible(label)) {\n                xy = MeasureCommon.project(this.locationLabel.p, this.viewer);\n                placeLabel(Math.floor(label.clientWidth / 2),Math.floor(label.clientHeight / 2));\n            }\n        }\n\n        if (this.calloutLabel) {\n\n            label = this.calloutLabel.label;\n\n            if (label && this.calloutLabel.p && isVisible(label)) {\n                xy = MeasureCommon.project(this.calloutLabel.p, this.viewer);\n                placeLabel(Math.floor(label.clientWidth / 2), Math.floor(label.clientHeight / 2));\n            }\n        }\n\n        if (this.areaLabel) {\n\n            label = this.areaLabel.label;\n\n            if (label && this.areaLabel.p1 && this.areaLabel.p2 && isVisible(label)) {\n                point = { x: (this.areaLabel.p1.x + this.areaLabel.p2.x)/2, y: (this.areaLabel.p1.y + this.areaLabel.p2.y)/2, z: (this.areaLabel.p1.z + this.areaLabel.p2.z)/2 };\n                xy = MeasureCommon.project(point, this.viewer);\n                placeLabel(Math.floor(label.clientWidth / 2), Math.floor(label.clientHeight / 2));\n            }\n        }\n\n        if (this.viewer.model && !this.viewer.model.is2d()) {\n    \n            var needToStackLabels = false;\n            this.labelsStacked = false;\n            var currentLabel, i;\n\n            // Backup lable's positions in case of the need of stacking them later\n            var backupPositions = [];\n            for (i = 0; i < this.labels.length; i++) {\n                backupPositions.push({left: this.labels[i].style.left, top:this.labels[i].style.top});\n            }\n\n            // Detect and move in case of overlapping.\n            for (i = 0; i < this.labels.length && !needToStackLabels; i++) {\n                currentLabel = this.labels[i];\n                needToStackLabels = this.labelsOverlapDetection(currentLabel, this.labels);\n            }\n\n            // If we found out that the labels need to be stacked, restore their positions from the backup first, and then start again.\n            if (needToStackLabels) {\n\n                for (i = 0; i < this.labels.length; i++) {\n                    this.labels[i].style.left = backupPositions[i].left;\n                    this.labels[i].style.top = backupPositions[i].top;\n                }\n\n                this.stackLabels(this.labels);\n\n                for (i = 0; i < this.labels.length; i++) {\n                    currentLabel = this.labels[i];\n                    this.labelsOverlapDetection(currentLabel, this.labels);\n                }\n            } \n        }\n\n        this.labels = [];\n        \n    };\n\n    function isLeftIntersect(current, other) {\n        return current.right >= other.left && current.right <= other.right;\n    }\n\n    function isRightIntersect(current, other) {\n        return current.left >= other.left && current.left <= other.right;\n    }\n\n    function isMiddleIntersect(current, other) {\n        return current.left <= other.left && current.right >= other.right;\n    }\n\n    function isVerticalIntersect(current, other) {\n        return current.top < other.bottom && current.bottom > other.top;\n    }\n\n    function moveLeft(currentLabel, currentRect, otherRect) {\n        currentLabel.style.left = parseInt(currentLabel.style.left, 10) - (currentRect.right - otherRect.left) + 'px';\n    }\n\n    function moveRight(currentLabel, currentRect, otherRect) {\n        currentLabel.style.left = parseInt(currentLabel.style.left, 10) + (otherRect.right - currentRect.left) + 'px';\n    }\n\n    function moveDown(currentLabel, currentRect, otherRect) {\n        currentLabel.style.top = parseInt(currentLabel.style.top, 10) + (otherRect.bottom - currentRect.top) + 'px';\n    }\n\n\n    proto.labelsOverlapDetection = function(staticLabel, labelsList) {\n\n        var needToStackLabels = false;\n\n        for (var i = 0; i < labelsList.length ; i++) {\n\n            var dynamicLabel = labelsList[i];\n            var moved = false;\n\n            if (staticLabel !== dynamicLabel) {\n                var staticRect = staticLabel.getBoundingClientRect();\n                var dynamicRect = dynamicLabel.getBoundingClientRect();\n\n                if (isVerticalIntersect(dynamicRect, staticRect)) {\n\n                    if (isLeftIntersect(dynamicRect, staticRect)) {\n                        moveLeft(dynamicLabel, dynamicRect, staticRect);\n                        moved = true;\n                    }\n                    else if (isRightIntersect(dynamicRect, staticRect)) {\n                        moveRight(dynamicLabel, dynamicRect, staticRect);\n                        moved = true;\n                    }\n                    else if (isMiddleIntersect(dynamicRect, staticRect)) {\n                        moveDown(dynamicLabel, dynamicRect, staticRect);\n                        moved = true;\n                    }\n\n                    if (moved) {\n                        var newList = labelsList.slice(0);\n                        newList.splice(newList.indexOf(staticLabel), 1);\n                        this.labelsOverlapDetection(dynamicLabel, newList);    \n                        \n                        if (dynamicLabel.causeStacking && staticLabel.causeStacking) {\n                            needToStackLabels = true;\n                        }\n\n                        // We don't want that after the labels have been stacked, only one of them will move alone.\n                        if (dynamicLabel.causeStacking && this.labelsStacked) {\n                            this.stackLabels(this.labels);\n                        }\n                    }\n                }\n            }\n        }\n\n        return needToStackLabels;\n    };\n\n    proto.stackLabels = function(labels) { \n        var topLabel = this.lines.xyz.label;\n\n        for (var i = 1; i < labels.length; i++) {\n            if (labels[i].causeStacking) {\n                labels[i].style.left = topLabel.style.left;\n            \n                var rect = labels[i-1].getBoundingClientRect();\n                var space = (labels[i-1] == topLabel) ? _labelsSpace : 0;\n                var top = (labels[i] === topLabel) ? topLabel.style.top : labels[i-1].style.top;\n                labels[i].style.top = parseInt(top, 10) + rect.height + space + 'px';\n            }\n            labels[i].style.transform = '';\n        }\n\n        this.labelsStacked = true;\n    };\n\n    proto.drawXYZLine = function(item) {\n        var self = this;\n\n        var p1 = item.p1;\n        var p2 = item.p2;\n\n        if (!p1 || !p2)\n            return;\n\n        item.line = this.drawLineSegment(p1, p2, _segmentWidth, item.material);\n\n        var tmpVec = new THREE.Vector3();\n        var geometry = item.geometry = new THREE.Geometry();\n        var point = MeasureCommon.nearestPointInPointToSegment(self.viewer.navigation.getPosition(), p1, p2);\n        var scale = self.setScale(point);\n\n        var direction;\n        const dimensionOffset = this.measurement.options && this.measurement.options.dimensionOffset;\n        if (dimensionOffset) {\n            const d1 = new THREE.Vector3(dimensionOffset[0].x, dimensionOffset[0].y, dimensionOffset[0].z);\n            const d2 = new THREE.Vector3(dimensionOffset[1].x, dimensionOffset[1].y, dimensionOffset[1].z);\n            direction = new THREE.Vector3().subVectors(p1, d1);\n            this.segments.push({ line: this.drawLineSegment(d1, p1, _segmentWidth, item.material), p1: d1, p2: p1 });\n            this.segments.push({ line: this.drawLineSegment(p2, d2, _segmentWidth, item.material), p1: p2, p2: d2});\n            p1 = d1;\n            p2 = d2;\n        } else {\n            direction = new THREE.Vector3().subVectors(p2, p1);\n        }\n        var normal = direction.cross(self.viewer.navigation.getEyeVector()).normalize();\n        item.visible = true;\n\n        this.segments.push(item);\n\n        const dashedLeader = this.measurement.options && this.measurement.options.dashedLeader;\n        if (dashedLeader) {\n            const l1 = new THREE.Vector3(dashedLeader[0].x, dashedLeader[0].y, dashedLeader[0].z);\n            const l2 = new THREE.Vector3(dashedLeader[1].x, dashedLeader[1].y, dashedLeader[1].z);\n            this.drawLineSegment(l1, l2, _segmentWidth, item.material, true);\n        }\n\n        function drawTip(p) {\n            geometry.vertices = [];\n\n            // Edge\n            tmpVec.addVectors(p, normal.clone().multiplyScalar(_tipHeight * scale));\n            geometry.vertices[0] = tmpVec.clone();\n            tmpVec.subVectors(p, normal.clone().multiplyScalar(_tipHeight * scale));\n            geometry.vertices[1] = tmpVec.clone();\n            var line = self.drawLineAsCylinder(geometry, item.material, _tipWidth, self.overlayName);\n            self.setCylinderScale(line, p1 ,p2);\n            line.visible = true;\n            item.tips.push(line);\n        }\n\n        if (self.showMeasureResult) {\n            item.tips = [];\n\n            drawTip(p1);\n            drawTip(p2);    \n        }        \n    };\n\n    proto.redrawDashedLine = function(dashedLine) {\n        if (!dashedLine.p1 || !dashedLine.p2)\n            return;\n\n        this.viewer.impl.removeMultipleOverlays(this.overlayName, dashedLine.line);\n        \n        var p1Scale = this.setScale(dashedLine.p2);\n        var dashSize = _dashSize * p1Scale;\n        var gapSize = _gapSize * p1Scale;\n        dashedLine.line = this.drawDashedLine(dashedLine.p2, dashedLine.p1, dashSize, gapSize, this.lines.xyz.material, _dashedSegmentWidth, this.overlayName);\n\n        return dashedLine.line;\n    };\n\n    proto.redrawDashedLines = function() {\n        this.dashedLines.forEach(this.redrawDashedLine.bind(this));\n    };\n\n    proto.drawLineSegment = function(p1, p2, width, material, isDashedLine) {\n        var line;\n\n        if (isDashedLine) {\n            const dashedLine = {};\n            dashedLine.p1 = p1;\n            dashedLine.p2 = p2;\n            this.dashedLines.push(dashedLine);\n            line = this.redrawDashedLine(dashedLine);\n        } else {\n            var geometry = new THREE.Geometry();\n            geometry.vertices.push(p1);\n            geometry.vertices.push(p2);\n            line = this.drawLineAsCylinder(geometry, material, width, this.overlayName);\n            this.setCylinderScale(line, p1, p2);\n        }\n\n        line.visible = true;\n\n        return line;\n    };\n\n    proto.drawSurface = function(points) {\n\n        const cg = Autodesk.Viewing.Extensions.CompGeom;\n\n        let cset = new cg.ContourSet();\n\n        cset.addContour(points);\n\n        cset.triangulate();\n\n        if (cset.triangulationFailed)\n            return false;\n\n        let bufferGeometry = cset.toPolygonMesh();\n\n        var face = new THREE.Mesh(bufferGeometry, this.surfaceColor);\n        this.applyLineColor(this.surfaceColor);\n    \n        this.viewer.impl.addOverlay(this.overlayName, face);\n\n        return true;\n    };\n\n    proto.drawSegmentAndPush = function(p1, p2, isDashedLine) {\n        if (!p1 || !p2) {\n            return;\n        }\n\n         var line = this.drawLineSegment(p1, p2, _segmentWidth, this.lines.xyz.material, isDashedLine);\n            \n        if (!isDashedLine) {\n            var item = { line: line, p1: p1, p2: p2 };\n            this.segments.push(item);    \n        }\n    };\n\n\n    proto.renderAreaMeasurementFromPoints = function(pickPositions) {\n        let p1, p2;\n        let firstPoint;\n\n        const points = [];\n        this.applyLineColor(this.lines.xyz.material);\n        this.applyLineColor(this.surfaceColor);\n\n        const keys = Object.keys(pickPositions);\n\n        for (var i = 0; i < keys.length - 1; i++) {\n            const key = parseFloat(keys[i]);\n            const position1 = pickPositions[key];\n            const position2 = pickPositions[key+1];\n\n            if (i === 0) {\n                firstPoint = new THREE.Vector3(position1.x, position1.y, position1.z);\n            }\n\n            p1 = new THREE.Vector3(position1.x, position1.y, position1.z);\n            p2 = new THREE.Vector3(position2.x, position2.y, position2.z);\n\n            this.drawSegmentAndPush(p1, p2);\n            points.push(p1);\n        }\n\n        if (keys.length > 2) {\n            // Draw last line\n            this.drawSegmentAndPush(firstPoint, p2, !this.measurement.closedArea);\n            \n            if(!MeasureCommon.isEqualVectors(firstPoint,p2,MeasureCommon.EPSILON)){\n                points.push(p2);\n            }\n            \n            if (this.measurement.area !== 0) {\n                //Draw surface will return false if it failed to triangulate the polygon (e.g. it has self-intersections)\n                if (this.drawSurface(points)) {\n                    this.showAreaLabel(getPolygonVisualCenter(points));\n                    this.updateArea();\n                }\n            }\n        }        \n    };\n\n    proto.renderAreaMeasurement = function(picks) {\n\n        var count = this.measurement.countPicks();\n        var p1, p2;\n\n        var points = [];\n        \n        for (var i = 1; i < count; i++) {\n            p1 = MeasureCommon.getSnapResultPosition(picks[i], this.viewer);\n            p2 = MeasureCommon.getSnapResultPosition(picks[i + 1], this.viewer);\n\n            this.drawSegmentAndPush(p1, p2);\n            points.push(p1);\n        }\n\n        if (count > 2) {\n            // Draw last line\n            p1 = MeasureCommon.getSnapResultPosition(picks[1], this.viewer);\n            this.drawSegmentAndPush(p1, p2, !this.measurement.closedArea);\n            \n            if(!MeasureCommon.isEqualVectors(p1,p2,MeasureCommon.EPSILON)){\n                points.push(p2);\n            }\n            \n            if (this.measurement.area !== 0) {\n                //Draw surface will return false if it failed to triangulate the polygon (e.g. it has self-intersections)\n                if (this.drawSurface(points)) {\n                    this.showAreaLabel(getPolygonVisualCenter(points));\n                    this.updateArea();\n                }\n            }\n        }        \n    };\n\n    proto.clearAngleMeshes = function() {\n        if (this.angleArc) {\n            this.viewer.impl.removeOverlay(this.overlayName, this.angleArc);\n            this.angleArc = null;\n        }\n        if (this.angleOutline.length > 0) {\n            this.viewer.impl.removeMultipleOverlays(this.overlayName, this.angleOutline);\n            this.angleOutline.length = 0;\n        }\n    };\n\n    proto.drawAngle = function(p, ep1, ep2, n, angle, midPoint, _radius) {\n\n        var smallNum = 0.001;\n\n        if (!this.materialAngle) {\n\n            this.materialAngle = new THREE.MeshPhongMaterial({\n                    color: 0x999999,\n                    ambient: 0x999999,\n                    opacity: 0.5,\n                    transparent: true,\n                    depthTest: false,\n                    depthWrite: false,\n                    side: THREE.DoubleSide\n                }\n            );\n\n            this.materialAngleOutline = new THREE.MeshBasicMaterial({\n                color: 0xFF9900,\n                depthTest: false,\n                depthWrite: false\n            });\n\n        }\n\n        this.applyLineColor(this.lines.xyz.material);\n        this.applyLineColor(this.surfaceColor);\n\n        MeasureCommon.createCommonOverlay(this.viewer, this.overlayName);\n        this.clearAngleMeshes();\n\n        // draw arc of angle\n        var radius = _radius || Math.min(p.distanceTo(ep1), p.distanceTo(ep2)) / 4;\n        var segments = 100;\n        //angle = angle * Math.PI / 180;\n\n        var circleGeometry = new THREE.CircleGeometry(radius, segments, 0, angle * Math.PI / 180);\n        var arc = new THREE.Mesh(circleGeometry, this.surfaceColor);\n        this.applyLineColor(this.surfaceColor);\n\n        var center = arc.geometry.vertices[0].clone();\n        arc.geometry.vertices.push(center);\n\n\n        // Translate and rotate the arc to the plane where it should lie in\n        arc.position.set(p.x, p.y, p.z);\n        var V = arc.position.clone();\n        V.add(n);\n        arc.lookAt(V);\n        arc.updateMatrixWorld();\n\n\n        // Rotate the arc in the plane to the right place\n        var vA = arc.geometry.vertices[1].clone();\n        var vB = arc.geometry.vertices[arc.geometry.vertices.length - 2].clone();\n        vA.applyMatrix4(arc.matrixWorld);\n        vB.applyMatrix4(arc.matrixWorld);\n\n        var v1 = new THREE.Vector3();\n        var v2 = new THREE.Vector3();\n        var v3 = new THREE.Vector3();\n        var v4 = new THREE.Vector3();\n        v1.subVectors(vA, p);\n        v2.subVectors(vB, p);\n        v3.subVectors(ep1, p);\n        v4.subVectors(ep2, p);\n\n        var a13 = v1.angleTo(v3);\n        var a14 = v1.angleTo(v4);\n        var a23 = v2.angleTo(v3);\n        var a24 = v2.angleTo(v4);\n\n        //console.log(a13 * 180 / Math.PI + \" \" + a14 * 180 / Math.PI + \" \" + a23 * 180 / Math.PI + \" \" + a24 * 180 / Math.PI);\n\n        var ra;\n        // The arc is in the right place\n        if (((a13 <= smallNum && a13 >= -smallNum) || (a14 <= smallNum && a14 >= -smallNum))\n            && ((a23 <= smallNum && a23 >= -smallNum) || (a24 <= smallNum && a24 >= -smallNum))) {\n\n            ra =0;\n        }\n        // The arc needs to be rotated 180 degree to the right place\n        else if (((a13 <= Math.PI + smallNum && a13 >= Math.PI - smallNum) || (a14 <= Math.PI + smallNum && a14 >= Math.PI - smallNum))\n            && ((a23 <= Math.PI + smallNum && a23 >= Math.PI - smallNum) || (a24 <= Math.PI + smallNum && a24 >= Math.PI - smallNum))) {\n\n            ra = Math.PI;\n        }\n        // The arc needs to be rotated a13 radian\n        else if ((a13 <= a23 + smallNum && a13 >= a23 - smallNum) || (a13 <= a24 + smallNum && a13 >= a24 - smallNum)) {\n\n            ra = a13;\n        }\n        // The arc needs to be rotated a14 radian\n        else {\n\n            ra = a14;\n        }\n\n        var rotWorldMatrix = new THREE.Matrix4();\n        rotWorldMatrix.makeRotationAxis(n, ra);\n        //arc.matrix.multiply(rotWorldMatrix);\n        rotWorldMatrix.multiply(arc.matrix);\n        arc.matrix = rotWorldMatrix;\n        arc.rotation.setFromRotationMatrix(arc.matrix);\n\n        // Check if rotate to the wrong direction, if so, rotate back twice of the degree\n        arc.updateMatrixWorld();\n        vA = arc.geometry.vertices[1].clone();\n        vB = arc.geometry.vertices[arc.geometry.vertices.length - 2].clone();\n        vA.applyMatrix4(arc.matrixWorld);\n        vB.applyMatrix4(arc.matrixWorld);\n\n        v1.subVectors(vA, p);\n        v2.subVectors(vB, p);\n\n        a13 = v1.angleTo(v3);\n        a14 = v1.angleTo(v4);\n        a23 = v2.angleTo(v3);\n        a24 = v2.angleTo(v4);\n\n        //console.log(a13 * 180 / Math.PI + \" \" + a14 * 180 / Math.PI + \" \" + a23 * 180 / Math.PI + \" \" + a24 * 180 / Math.PI);\n\n        if (a13 >= smallNum && a14 >= smallNum) {\n\n            rotWorldMatrix = new THREE.Matrix4();\n            rotWorldMatrix.makeRotationAxis(n, - ra * 2);\n            //arc.matrix.multiply(rotWorldMatrix);\n            rotWorldMatrix.multiply(arc.matrix);\n            arc.matrix = rotWorldMatrix;\n            arc.rotation.setFromRotationMatrix(arc.matrix);\n        }\n\n        // draw outline of the arc\n        var outlineGeometry = new THREE.CircleGeometry(radius, segments, 0, angle * Math.PI / 180);\n        outlineGeometry.vertices.splice(0, 1);\n        arc.updateMatrixWorld();\n        outlineGeometry.applyMatrix(arc.matrixWorld);\n        this.angleOutline = this.drawEdgeAsCylinder(outlineGeometry, this.lines.xyz.material, _angleArcWidth, 0, this.getNewCylinderGeometry());\n\n        this.angleArc = arc;\n        this.viewer.impl.addOverlay(this.overlayName, this.angleArc);\n        this.viewer.impl.addMultipleOverlays(this.overlayName, this.angleOutline);\n\n        // This is used for angle label's position\n        midPoint.copy(arc.geometry.vertices[Math.round(arc.geometry.vertices.length / 2) - 1]);\n        midPoint.applyMatrix4(arc.matrixWorld);\n        if (!_radius) {\n            var dir = new THREE.Vector3();\n            dir.subVectors(midPoint, p).normalize();\n            dir.multiplyScalar(radius / 2);\n            midPoint.add(dir);\n        }\n    };\n\n    proto.renderAngleMeasurementFromPoints = function(pickPositions) {\n        var points = [];\n        \n        const keys = Object.keys(pickPositions);\n        for (var i = 0; i < keys.length; i++) {\n            const key = parseFloat(keys[i]);\n            const position = pickPositions[key];\n\n            points.push(new THREE.Vector3(position.x, position.y, position.z));\n        }\n\n        if (points.length === 3) {\n            let arcRadius;\n            const options = this.measurement.options;\n            if (options && options.offset) {\n                const o0 = new THREE.Vector3(options.offset.x, options.offset.y, options.offset.z);\n                const o1 = o0.clone().add(points[1]);\n                o0.add(points[0]);\n                this.drawSegmentAndPush(o0, o1);\n                this.drawSegmentAndPush(points[1], points[2]);\n                this.drawSegmentAndPush(points[0], o0, true);\n                this.drawSegmentAndPush(points[1], o1, true);\n                arcRadius = o1.clone().sub(o0).length();\n            } else {\n                this.drawSegmentAndPush(points[0], points[1]);\n                this.drawSegmentAndPush(points[1], points[2]);\n            }\n\n            if (this.measurement.angle) {\n                var n = new THREE.Vector3();\n                var v1 = new THREE.Vector3();\n                var v2 = new THREE.Vector3();\n                v1.subVectors(points[0], points[1]);\n                v2.subVectors(points[1], points[2]);\n                n.crossVectors(v1, v2);\n                n.normalize();\n\n                var midPoint = new THREE.Vector3();\n                this.drawAngle(points[1], points[0], points[2], n, this.measurement.angle, midPoint, arcRadius);\n                this.showAngleLabel(midPoint);\n                this.updateAngle();\n            }\n        }\n    };\n\n    proto.renderAngleMeasurement = function(picks) {\n\n        var count = this.measurement.countPicks();\n        var p1, p2;\n\n        var points = [];\n        this.applyLineColor(this.lines.xyz.material);\n        this.applyLineColor(this.surfaceColor);\n        \n        for (var i = 1; i < count; i++) {\n            p1 = MeasureCommon.getSnapResultPosition(picks[i], this.viewer);\n            p2 = MeasureCommon.getSnapResultPosition(picks[i + 1], this.viewer);\n\n            this.drawSegmentAndPush(p1, p2);\n\n            if (p1) {\n                points.push(p1);    \n            }\n        }\n\n        if (p2) {\n            points.push(p2);\n        }\n        \n        if (points.length === 3 && this.measurement.angle) {\n            var n = new THREE.Vector3();\n            var v1 = new THREE.Vector3();\n            var v2 = new THREE.Vector3();\n            v1.subVectors(points[0], points[1]);\n            v2.subVectors(points[1], points[2]);\n            n.crossVectors(v1, v2);\n            n.normalize();\n\n            var midPoint = new THREE.Vector3();\n            this.drawAngle(points[1], points[0], points[2], n, this.measurement.angle, midPoint);\n            this.showAngleLabel(midPoint);\n            this.updateAngle();\n        }        \n    };\n\n    proto.renderLocationMeasurementFromPoints = function(pickPositions) {\n        var p1 = pickPositions[1];\n        var p2 = pickPositions[2];\n        if (!p1 || !p2)\n            return;\n        \n        this.applyLineColor(this.lines.xyz.material);\n        this.drawSegmentAndPush(p1, p2);\n\n        this.showLocationLabel(p2);\n        this.updateLocation();\n    };\n\n    proto.renderLocationMeasurement = function(picks) {\n        var p1 = picks[1] && picks[1].intersection;\n        var p2 = picks[2] && picks[2].intersection;\n        if (!p1 || !p2)\n            return;\n        \n        this.applyLineColor(this.lines.xyz.material);\n        this.drawSegmentAndPush(p1, p2);\n\n        this.showLocationLabel(p2);\n        this.updateLocation();\n    };\n\n    proto.renderCalloutMeasurementFromPoints = function(pickPositions) {\n        var p1 = pickPositions[1];\n        var p2 = pickPositions[2];\n        if (!p1 || !p2)\n            return;\n\n        this.applyLineColor(this.lines.xyz.material);\n        this.drawSegmentAndPush(p1, p2);\n\n        this.showCalloutLabel(p2);\n        this.updateCallout();\n    };\n\n    proto.renderCalloutMeasurement = function(picks) {\n        var p1 = picks[1] && picks[1].intersection;\n        var p2 = picks[2] && picks[2].intersection;\n        if (!p1 || !p2)\n            return;\n        \n        this.applyLineColor(this.lines.xyz.material);\n        this.drawSegmentAndPush(p1, p2);\n\n        this.showCalloutLabel(p2);\n        this.updateCallout();\n    };\n\n    proto.createDistanceLabel = function(item) {\n        var label = item.label = this.createMeasurementLabel();\n        \n        setVisibilityMeasurementLabelText(label, item === this.lines.xyz);\n\n        const _document = this.getDocument();\n        // Override main label when displaying only an axis label (X, Y or Z)\n        if (item.axis) {\n            label.className = item.className;\n            var axisIcon = _document.createElement('div');\n            axisIcon.className = 'measure-label-axis-icon ' + item.iconText;\n            axisIcon.innerText = item.iconText;\n            label.insertBefore(axisIcon, label.firstChild);\n\n            if (!av.isMobileDevice()) {\n                MeasureCommon.safeToggle(label, 'enableTransition', true);\n            }\n        }\n\n        this.viewer.container.appendChild(label);\n\n        return label;\n    };\n\n    proto.updateLine = function(item, x1, y1, z1, x2, y2, z2, showAxis) {\n        this.applyLineColor(this.lines.xyz.material);\n\n        var line = item.line,\n            label = item.label,\n            p1 = new THREE.Vector3(x1, y1, z1),\n            p2 = new THREE.Vector3(x2, y2, z2);\n\n        // Swap points if needed to have consistent axis directions.\n        var tmpVec;\n        if (item === this.lines.x && p2.x > p1.x) {\n            tmpVec = p1.clone();\n            p1 = p2.clone();\n            p2 = tmpVec.clone();\n        } \n        else if (item === this.lines.y && p2.y > p1.y) {\n            tmpVec = p1.clone();\n            p1 = p2.clone();\n            p2 = tmpVec.clone();\n        } \n        else if (item === this.lines.z && p2.z > p1.z) {\n            tmpVec = p1.clone();\n            p1 = p2.clone();\n            p2 = tmpVec.clone();\n        }\n\n        item.line = null;            \n\n        if (!label) {\n            label = this.createDistanceLabel(item);\n        }\n        else {\n            this.hideLabel(label);\n        }\n        \n        if (((this.isLeaflet && item !== this.lines.z) || (p1.distanceTo(p2) >= MeasureCommon.EPSILON)) && showAxis) {\n\n            item.p1 = p1;\n            item.p2 = p2;\n\n            if (item === this.lines.xyz) {\n                this.drawXYZLine(item);\n                this.showLabel(label);\n                this.updateDistance();\n            }\n            else {\n                line = item.line = this.drawLineSegment(p1, p2, _axisLineWidth, item.material);\n                var show = !this.simple && this.showMeasureResult;\n\n                line.visible = show;\n                item.visible = show;\n\n                if (show) {\n                    this.showLabel(label);\n                }\n                else {\n                    this.hideLabel(label);\n                }\n            }\n        }\n    }\n\n    // Draw distance measurement\n    proto.renderDistanceMeasurementFromPoints = function(p1, p2) {\n\n        this.updateLine(this.lines.xyz, p1.x, p1.y, p1.z, p2.x, p2.y, p2.z, true);\n\n        var up = this.viewer.navigation.getAlignedUpVector(),\n            x = Math.abs(up.x),\n            y = Math.abs(up.y),\n            z = Math.abs(up.z);\n\n        var showAxis = false;\n\n        if (z > x && z > y) { // z up\n            this.updateLine(this.lines.x, p1.x, p1.y, p1.z, p2.x, p1.y, p1.z, showAxis);\n            this.updateLine(this.lines.y, p2.x, p1.y, p1.z, p2.x, p2.y, p1.z, showAxis);\n            this.updateLine(this.lines.z, p2.x, p2.y, p1.z, p2.x, p2.y, p2.z, showAxis);\n\n        } else if (y > x && y > z) { // y up\n            this.updateLine(this.lines.x, p1.x, p1.y, p1.z, p2.x, p1.y, p1.z, showAxis);\n            this.updateLine(this.lines.z, p2.x, p1.y, p1.z, p2.x, p1.y, p2.z, showAxis);\n            this.updateLine(this.lines.y, p2.x, p1.y, p2.z, p2.x, p2.y, p2.z, showAxis);\n\n        } else { // x up - do we ever see this?\n            this.updateLine(this.lines.y, p1.x, p1.y, p1.z, p1.x, p2.y, p1.z, showAxis);\n            this.updateLine(this.lines.z, p1.x, p2.y, p1.z, p1.x, p2.y, p2.z, showAxis);\n            this.updateLine(this.lines.x, p1.x, p2.y, p2.z, p2.x, p2.y, p2.z, showAxis);\n        }\n\n    };\n\n    // Draw distance measurement\n    proto.renderDistanceMeasurement = function(p1, p2)\n    {\n        var self = this;\n\n        // If the line aligns with one of axis, then don't show axis\n        function displayAxis(p1, p2) {\n            self.tmpVector.subVectors(p1, p2);\n            self.tmpVector.normalize();\n\n            return !MeasureCommon.isParallel(self.tmpVector, self.xAxis) && !MeasureCommon.isParallel(self.tmpVector, self.yAxis) && !MeasureCommon.isParallel(self.tmpVector, self.zAxis);\n        }\n\n        this.updateLine(this.lines.xyz, p1.x, p1.y, p1.z, p2.x, p2.y, p2.z, true);\n\n        var up = this.viewer.navigation.getAlignedUpVector(),\n            x = Math.abs(up.x),\n            y = Math.abs(up.y),\n            z = Math.abs(up.z);\n\n        var showAxis = displayAxis(p1, p2);\n\n        if (z > x && z > y) { // z up\n            this.updateLine(this.lines.x, p1.x, p1.y, p1.z, p2.x, p1.y, p1.z, showAxis);\n            this.updateLine(this.lines.y, p2.x, p1.y, p1.z, p2.x, p2.y, p1.z, showAxis);\n            this.updateLine(this.lines.z, p2.x, p2.y, p1.z, p2.x, p2.y, p2.z, showAxis);\n\n        } else if (y > x && y > z) { // y up\n            this.updateLine(this.lines.x, p1.x, p1.y, p1.z, p2.x, p1.y, p1.z, showAxis);\n            this.updateLine(this.lines.z, p2.x, p1.y, p1.z, p2.x, p1.y, p2.z, showAxis);\n            this.updateLine(this.lines.y, p2.x, p1.y, p2.z, p2.x, p2.y, p2.z, showAxis);\n\n        } else { // x up - do we ever see this?\n            this.updateLine(this.lines.y, p1.x, p1.y, p1.z, p1.x, p2.y, p1.z, showAxis);\n            this.updateLine(this.lines.z, p1.x, p2.y, p1.z, p1.x, p2.y, p2.z, showAxis);\n            this.updateLine(this.lines.x, p1.x, p2.y, p2.z, p2.x, p2.y, p2.z, showAxis);\n        }\n\n    };\n\n    proto.updateResults = function() {\n        this.updateDistance();\n        this.updateAngle();\n        this.updateArea();\n        \n        setTimeout(function(){\n            // This can get called after the viewer is unloaded\n            if (this.viewer.impl)\n                this.updateLabelsPosition();\n        }.bind(this), 0);\n    };\n\n    // Update distance measurement label\n    proto.updateDistance = function() {\n\n        function setWidth(label, value) {\n            if (!label) return;\n            label.style.width = value;\n        }\n\n        function getWidth(label) {\n            return label ? label.clientWidth : 0;\n        }\n\n        Object.keys(this.lines).forEach(function(name) {\n            setWidth(this.lines[name].label, '');\n        }.bind(this));\n        \n        setDeltaMeasurementLabelText(this.lines.x.label, \"~ \" + this.measureTool.getDistanceX(this.measurement));\n        setDeltaMeasurementLabelText(this.lines.y.label, \"~ \" + this.measureTool.getDistanceY(this.measurement));\n        setDeltaMeasurementLabelText(this.lines.z.label, \"~ \" + this.measureTool.getDistanceZ(this.measurement));\n        setValueMeasurementLabelText(this.lines.xyz.label, \"~ \" + this.measureTool.getDistanceXYZ(this.measurement));\n\n        if (this.viewer.model && this.viewer.model.is3d()) {\n            setTimeout(function(){\n                var maxWidth = Math.max(getWidth(this.lines.x.label), getWidth(this.lines.y.label), getWidth(this.lines.z.label), getWidth(this.lines.xyz.label));                \n                Object.keys(this.lines).forEach(function(name) {\n                    setWidth(this.lines[name].label, maxWidth + 'px');\n                }.bind(this));\n            }.bind(this), 0);\n        }\n    };\n\n    // Update angle measurement label\n    proto.updateAngle = function() {\n        setValueMeasurementLabelText(this.angleLabel.label, \"~ \" + this.measureTool.getAngle(this.measurement));\n    };\n\n    // Update angle measurement label\n    proto.updateLocation = function() {\n        setValueMeasurementLabelText(this.locationLabel.label,\n            (\"~ \" + this.measureTool.getLocation(this.measurement)).split('\\n').join('\\n~ '));\n    };\n\n    // Update angle measurement label\n    proto.updateCallout = function() {\n        setValueMeasurementLabelCallout(this.calloutLabel.label, this.measureTool.getCallout(this.measurement));\n    };\n\n    // Update area measurement label\n    proto.updateArea = function() {\n        setValueMeasurementLabelText(this.areaLabel.label, \"~ \" + this.measureTool.getArea(this.measurement));\n    };\n\n    // Set if collapse or expand the xyz delta distance\n    proto.setSimple = function(simple) {\n        if (this.simple != simple) {\n            this.simple = simple;\n\n            var isVisible = !simple;\n            this.setLineVisible(this.lines.x, isVisible);\n            this.setLineVisible(this.lines.y, isVisible);\n            this.setLineVisible(this.lines.z, isVisible);\n\n            this.updateLabelsPosition();\n\n            this.viewer.impl.invalidate(false, false, /*overlayDirty=*/true);\n        }\n    };\n\n    proto.setLineVisible = function(item, isVisible) {\n        if (item.line) {\n            item.line.visible = isVisible;\n            item.visible = isVisible;\n\n            if (item.label) {\n                if (isVisible) {\n                    this.showLabel(item.label);\n                }\n                else {\n                    this.hideLabel(item.label);\n                    item.label.style.opacity = 0;\n                }\n            }\n        }\n    };\n\n    proto.enableLabelsTouchEvents = function(enable) {\n        var value = enable ? 'all' : 'none';\n\n        if (this.lines.xyz.label) {\n            this.lines.xyz.label.style.pointerEvents = value;   \n        }\n\n        if (this.angleLabel.label) {\n            this.angleLabel.label.style.pointerEvents = value;   \n        }\n\n        if (this.areaLabel.label) {\n            this.areaLabel.label.style.pointerEvents = value;\n        }\n    };\n\n    proto.setLabelsZIndex = function(zIndex) {\n        for (var name in this.lines) {\n            if (this.lines.hasOwnProperty(name)) {\n                var item = this.lines[name];\n                if (item.label) {\n                    item.label.style.zIndex = zIndex;\n                }\n            }\n        }\n\n        if (this.angleLabel && this.angleLabel.label) {\n            this.angleLabel.label.style.zIndex = zIndex;    \n        }\n\n        if (this.locationLabel && this.locationLabel.label) {\n            this.locationLabel.label.style.zIndex = zIndex;    \n        }\n\n        if (this.calloutLabel && this.calloutLabel.label) {\n            this.calloutLabel.label.style.zIndex = zIndex;    \n        }\n\n        if (this.areaLabel && this.areaLabel.label) {\n            this.areaLabel.label.style.zIndex = zIndex;    \n        }\n\n        for (name in this.endpoints) {\n            if (this.endpoints.hasOwnProperty(name)) {\n                var endpoint = this.endpoints[name];\n                if (endpoint.label) {\n                    endpoint.label.style.zIndex = zIndex - 1;\n                }\n            }\n        }\n    };\n\n    proto.focusLabels = function() {\n        this.setLabelsZIndex(3);\n    };\n\n    proto.unfocusLabels = function() {\n        this.setLabelsZIndex(2);\n    };\n\n    proto.clear = function() {\n        var name;\n\n        for (name in this.endpoints) {\n            if (this.endpoints.hasOwnProperty(name)) {\n                var endpoint = this.endpoints[name];\n                if (endpoint.label) {\n                    this.hideLabel(endpoint.label);\n                }\n            }\n        }\n\n        for (name in this.lines) {\n            if (this.lines.hasOwnProperty(name)) {\n                var item = this.lines[name];\n                if (item.line) {\n                    item.line.visible = false;\n                    item.visible = false;\n\n                    item.tips && item.tips.forEach(function(tip) {\n                        tip.visible = false;\n                    });\n                }\n                if (item.label) {\n                    this.hideLabel(item.label);\n                    item.label.style.opacity = 0;\n                    item.label.style.zIndex = 2;\n                }\n            }\n        }\n\n        if (this.angleLabel && this.angleLabel.label) {\n            this.hideLabel(this.angleLabel.label);\n        }\n\n        if (this.locationLabel && this.locationLabel.label) {\n            this.hideLabel(this.locationLabel.label);\n        }\n\n        if (this.calloutLabel && this.calloutLabel.label) {\n            this.hideLabel(this.calloutLabel.label);\n        }\n\n        if (this.areaLabel && this.areaLabel.label) {\n            this.hideLabel(this.areaLabel.label);\n        }\n        \n        this.clearSelectionAreas();\n\n        this.segments = [];\n        this.dashedLines = [];\n\n        this.viewer.impl.clearOverlay(this.overlayName);\n        MeasureCommon.createCommonOverlay(this.viewer, this.overlayName);\n    };\n\n    proto.hideClick = function(pickNumber) {\n\n        Indicator.prototype.hideClick.call(this, pickNumber);\n\n        for (var name in this.lines) {\n            if (this.lines.hasOwnProperty(name)) {\n                var item = this.lines[name];\n                if (item.line) {\n                    item.line.visible = false;\n                    item.visible = false;\n\n                    item.tips && item.tips.forEach(function(tip) {\n                        tip.visible = false;\n                    });\n                }\n                if (item.label) {\n                    this.hideLabel(item.label);\n                    item.label.style.opacity = 0;\n                }\n            }\n        }\n\n        if (this.angleLabel && this.angleLabel.label) {\n            this.hideLabel(this.angleLabel.label);\n        }\n\n        if (this.areaLabel && this.areaLabel.label) {\n            this.hideLabel(this.areaLabel.label);\n        }\n\n        this.enableSelectionAreas(item.selectionArea, false);\n    };\n\n    proto.destroy = function() {\n        var name;\n\n        Indicator.prototype.destroy.call(this);\n\n        for (name in this.lines) {\n            if (this.lines.hasOwnProperty(name)) {\n                var item = this.lines[name];\n                if (item.line) {\n                    this.viewer.impl.clearOverlay(self.overlayName);\n                    item.material = item.line = item.geometry = null;\n                }\n\n                if (item.label) {\n                    if (name === 'xyz') {\n                        item.label.addEventListener('mousewheel', this.viewer.toolController.mousewheel);\n                        item.label.removeEventListener('click', this.onSelectionAreaClickedBinded);    \n                    }\n\n                    item.label.parentNode.removeChild(item.label);\n                    item.label = null;\n                }\n                item.material = item.line = item.geometry = item.label = item.p1 = item.p2 = null;\n            }\n        }\n\n        this.clearAngleMeshes();\n        \n        if (this.angleLabel && this.angleLabel.label) {\n            this.angleLabel.label.parentNode.removeChild(this.angleLabel.label);\n            this.angleLabel.label.removeEventListener('mousewheel', this.viewer.toolController.mousewheel);\n            this.angleLabel.label.removeEventListener('click', this.onSelectionAreaClickedBinded);\n             this.angleLabel.label = this.angleLabel.p1 = this.angleLabel.p2 = null;\n        }\n\n        \n        if (this.locationLabel && this.locationLabel.label) {\n            this.locationLabel.label.parentNode.removeChild(this.locationLabel.label);\n            this.locationLabel.label.removeEventListener('mousewheel', this.viewer.toolController.mousewheel);\n            //this.locationLabel.label.removeEventListener('click', this.onSelectionAreaClickedBinded);\n             this.locationLabel.label = this.locationLabel.p = null;\n        }\n\n        \n        if (this.calloutLabel && this.calloutLabel.label) {\n            this.calloutLabel.label.parentNode.removeChild(this.calloutLabel.label);\n            this.calloutLabel.label.removeEventListener('mousewheel', this.viewer.toolController.mousewheel);\n            //this.calloutLabel.label.removeEventListener('click', this.onSelectionAreaClickedBinded);\n             this.calloutLabel.label = this.calloutLabel.p = null;\n        }\n\n        \n        if (this.areaLabel && this.areaLabel.label) {\n            this.areaLabel.label.parentNode.removeChild(this.areaLabel.label);\n            this.areaLabel.label.removeEventListener('mousewheel', this.viewer.toolController.mousewheel);\n            this.areaLabel.label.removeEventListener('click', this.onSelectionAreaClickedBinded);\n            this.areaLabel.label = this.areaLabel.p1 = this.areaLabel.p2 = null;\n        }\n        \n        \n\n        if (this.viewer.impl.overlayScenes[this.overlayName]){\n            this.viewer.impl.removeOverlayScene(this.overlayName);\n        }\n\n        this.viewer.removeEventListener(av.CAMERA_CHANGE_EVENT, this.onCameraChangeBinded);\n        this.removeWindowEventListener('mouseup', this.handleButtonUpBinded);\n    };\n\n    proto.clearXYZLine = function() {\n        this.viewer.impl.removeOverlay(this.overlayName, this.lines.xyz.line);\n\n        this.lines.xyz.tips && this.lines.xyz.tips.forEach(function(tip) {\n            this.viewer.impl.removeOverlay(this.overlayName, tip);\n        }.bind(this));\n    };\n\n    // Update scale for vertex, edge, line and extension dash line\n    proto.updateScale = function() {\n        var name;\n\n        this.angleOutline.forEach(cylinderMesh => this.setCylinderScale(cylinderMesh));\n\n        for (name in this.lines) {\n            if (this.lines.hasOwnProperty(name)) {\n                var item = this.lines[name];\n                if (item.line && item !== this.lines.xyz) {\n                    this.setCylinderScale(item.line, item.p1, item.p2);\n                }\n            }\n        }\n        \n        for (name in this.segments) {\n            if (this.segments.hasOwnProperty(name)) {\n                var segment = this.segments[name];\n                if (segment.line) {\n                    this.setCylinderScale(segment.line, segment.p1, segment.p2);\n                } \n            }\n        }\n        \n        if (this.measurement.measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE) {\n            if (this.measurement.isComplete()) {\n                this.clearXYZLine();\n                this.drawXYZLine(this.lines.xyz);\n            }\n        }\n    };\n\n    proto.setNoTopology = function(){\n        this.topologyStatus = TOPOLOGY_NOT_AVAILABLE;\n        if (this.lines.xyz.label) {\n            setVisibilityMeasurementLabelSpinner(this.lines.xyz.label, false, this.topologyStatus);\n            this.lines.xyz.label.classList.remove('fetching-topology');\n        }\n    };\n    proto.setFetchingTopology = function() {\n        this.topologyStatus = TOPOLOGY_FETCHING;\n        if (this.lines.xyz.label) {\n            setVisibilityMeasurementLabelSpinner(this.lines.xyz.label, true, this.topologyStatus);\n                this.lines.xyz.label.classList.add('fetching-topology');\n        }\n    };\n    proto.setTopologyAvailable = function() {\n        this.topologyStatus = TOPOLOGY_AVAILABLE;\n        if (this.lines.xyz.label) {\n            setVisibilityMeasurementLabelSpinner(this.lines.xyz.label, false, this.topologyStatus);\n            this.lines.xyz.label.classList.remove('fetching-topology');\n        }\n    };\n\n    proto.createMeasurementLabel = function() {\n      \n        const _document = this.getDocument();\n\n        var label = _document.createElement('div');\n        label.className = 'measure-length';\n        \n        var spinner = _document.createElement('div');\n        spinner.className = 'measure-fetching-topology';\n        spinner.style.display = 'none';\n        label.appendChild(spinner);\n\n        var text = _document.createElement('div');\n        text.className = 'measure-length-text';\n        label.appendChild(text);    \n\n        var delta = _document.createElement('div');\n        delta.className = 'measure-delta-text';\n        label.appendChild(delta);\n\n        label.causeStacking = true;\n        \n        if (!av.isMobileDevice()) {\n            MeasureCommon.safeToggle(label, 'enable-hover', true);\n        }\n\n        return label;\n    };\n\n    // Receives an object created with createMeasurementLabel()\n    function setVisibilityMeasurementLabelText(label, isVisible) {\n        var div = label.querySelector('.measure-length-text');\n        div && (div.style.display = isVisible ? '' : 'none');\n    }\n\n    // Receives an object created with createMeasurementLabel()\n    function setValueMeasurementLabelText(label, strValue) {\n        if (!label) return;\n        var div = label.querySelector('.measure-length-text');\n        div && (div.textContent = strValue);\n    }\n\n    // Escape special characters in HTML and convert \\n to <br>\n    function escapeHtml(str) {\n        return str\n             .replace(/&/g, \"&amp;\")\n             .replace(/</g, \"&lt;\")\n             .replace(/>/g, \"&gt;\")\n             .replace(/\"/g, \"&quot;\")\n             .replace(/'/g, \"&#039;\")\n             .replace(/\\n/g, '<br>');\n    }\n\n    // Create a space with formatting from format\n    function createSpan(format) {\n        // If format is a string, no formatting - just return the escaped string\n        if (typeof format === 'string')\n            return escapeHtml(format);\n\n        // Build the style parameters for font-size and font-weight\n        let space = '';\n        let fontSize = format.fontSize;\n        if (format.fontSize !== undefined && format.fontSize !== 10) {\n            // Base the fontSize on 10 === 100% which is ADRs default\n            // LMV uses 12 as the default.\n            fontSize = `font-size: ${0 | (fontSize * 10)}%;`;\n            space = ' ';    // Put a space between font-size and bold\n        } else\n            fontSize = '';\n        let bold = format.bold;\n        if (bold !== undefined)\n            bold = `${space}font-weight: ${bold ? 'bold' : 'normal'};`;\n        else\n            bold = '';\n        // Escape the string.\n        const str = escapeHtml(format.text);\n        // Include bold and fontSize styles if present.\n        if (bold || fontSize)\n            return `<span style=\"${fontSize}${bold}\">${str}</span>`;\n        // return escaped string if no formatting\n        return str;\n    }\n\n    function setValueMeasurementLabelCallout(label, calloutValue) {\n        // If the calloutValue is just a string, then set it as text.\n        if (typeof calloutValue === 'string') {\n            setValueMeasurementLabelText(label, calloutValue);\n            return;\n        }\n\n        var div = label.querySelector('.measure-length-text');\n        if (div) {\n            // construct and set the html for the callout.\n            if (!Array.isArray(calloutValue))\n                div.innerHTML = createSpan(calloutValue);\n            else\n                div.innerHTML = calloutValue.map(createSpan).join('');\n        }\n    }\n\n    // Receives an object created with createMeasurementLabel()\n    function setDeltaMeasurementLabelText(label, strValue) {\n        if (!label) return;\n        var div = label.querySelector('.measure-delta-text');\n        div && (div.textContent = strValue);\n    }\n\n    // Receives an object created with createMeasurementLabel()\n    function setVisibilityMeasurementLabelSpinner(label, isVisible, topologyStatus) {\n        if (!label) return;\n        var div = label.querySelector('.measure-fetching-topology');\n        div && (div.style.display = \n            (isVisible && topologyStatus === TOPOLOGY_FETCHING) ? 'inline-block' : 'none');\n    }\n\n    /**\n     * Helper function that creates the label used for (1) and (2),\n     * which are the 2 mouse clicks for the measurement.\n     */\n    proto.createSnapResultLabel = function(pointNumber) {\n        const _document = this.getDocument();\n\n        var label = _document.createElement('div');\n        label.className = 'measure-label';\n\n        var label_icon = _document.createElement('div');\n        label_icon.className = 'measure-label-icon';\n        label.appendChild(label_icon);\n\n        if (av.isTouchDevice()) {\n            this.initLabelMobileGestures(label, pointNumber, this.measureTool);\n            var hitArea = _document.createElement('div');\n            hitArea.className = 'measure-label-hit-area';\n            label.appendChild(hitArea);                      \n        } \n         \n        if (!av.isMobileDevice()) {\n            this.initMouseEvent(label, pointNumber);\n\n            label.addEventListener('mousewheel', this.viewer.toolController.mousewheel);\n            MeasureCommon.safeToggle(label, 'enable-hover', true);  \n        }\n        \n \n        label.causeStacking = false;\n        \n        return label;\n    };\n\n    proto.showAngleLabel = function(midPoint) {\n\n            var label = this.angleLabel.label;\n\n            if (!label) {\n                label = this.angleLabel.label = this.createMeasurementLabel();\n                this.viewer.container.appendChild(label);\n                label.addEventListener('mousewheel', this.viewer.toolController.mousewheel);\n                label.addEventListener('click', this.onSelectionAreaClickedBinded);\n            }\n\n            this.updateAngle();\n            this.showLabel(label);\n\n            this.angleLabel.p1 = midPoint.clone();\n            this.angleLabel.p2 = midPoint.clone();\n\n    };\n\n    proto.showLocationLabel = function(p) {\n\n        var label = this.locationLabel.label;\n\n        if (!label) {\n            label = this.locationLabel.label = this.createMeasurementLabel();\n            label.style.whiteSpace = 'pre-line';\n            label.style.height = 'auto';\n            label.style.textAlign = 'start';\n            label.querySelector('.measure-delta-text').style.display = 'none';\n            this.viewer.container.appendChild(label);\n            label.addEventListener('mousewheel', this.viewer.toolController.mousewheel);\n            //label.addEventListener('click', this.onSelectionAreaClickedBinded);\n        }\n\n        this.updateLocation();\n        this.showLabel(label);\n\n        this.locationLabel.p = p.clone();\n\n    };\n\n    proto.showCalloutLabel = function(p) {\n\n        var label = this.calloutLabel.label;\n\n        if (!label) {\n            label = this.calloutLabel.label = this.createMeasurementLabel();\n            label.style.whiteSpace = 'pre-line';\n            label.style.height = 'auto';\n            label.style.textAlign = 'start';\n            if (this.measurement.options && this.measurement.options.width)\n                label.style.width = this.measurement.options.width + 'px';\n            label.querySelector('.measure-delta-text').style.display = 'none';\n            this.viewer.container.appendChild(label);\n            label.addEventListener('mousewheel', this.viewer.toolController.mousewheel);\n            //label.addEventListener('click', this.onSelectionAreaClickedBinded);\n        }\n\n        this.updateCallout();\n        this.showLabel(label);\n\n        this.calloutLabel.p = p.clone();\n\n    };\n\n    proto.showAreaLabel = function(midPoint) {\n\n            var label = this.areaLabel.label;\n\n            if (!label) {\n                label = this.areaLabel.label = this.createMeasurementLabel();\n                this.viewer.container.appendChild(label);\n                label.addEventListener('mousewheel', this.viewer.toolController.mousewheel);\n                label.addEventListener('click', this.onSelectionAreaClickedBinded);\n            }\n\n            this.updateArea();\n            this.showLabel(label);\n\n            this.areaLabel.p1 = midPoint;\n            this.areaLabel.p2 = midPoint;\n\n    };\n\n    proto.onSelectionAreaClicked = function() {\n        this.measureTool.selectMeasurementById(this.measurement.id);\n    };\n\n    proto.createSelectionArea = function() {\n        const _document = this.getDocument();\n        var selectionArea = _document.createElement('div');\n        selectionArea.id = 'measurement-selection-area-' + this.measurement.id;\n        this.viewer.container.appendChild(selectionArea);\n        selectionArea.className = 'measure-selection-area';\n        selectionArea.style.display = 'none';\n        selectionArea.addEventListener('mousewheel', this.viewer.toolController.mousewheel);\n        selectionArea.addEventListener('click', this.onSelectionAreaClickedBinded);\n        return selectionArea;\n    };\n\n    proto.updateSelectionArea = function() {\n\n        this.segments.forEach(function(item) \n        {\n            if (item.p1 && item.p2) {\n                var p1 = MeasureCommon.project(item.p1, this.viewer);\n                var p2 = MeasureCommon.project(item.p2, this.viewer);\n\n                if (!item.selectionArea) {\n                    item.selectionArea = this.createSelectionArea();\n                }\n\n                var selectionArea = item.selectionArea;\n\n                var v = new THREE.Vector2();\n\n                selectionArea.style.top = (p1.y - (_selectorAreaSize / 2)) + 'px';\n                selectionArea.style.left = p1.x  + 'px';\n                selectionArea.style.width = v.subVectors(p1, p2).length() + 'px';\n                selectionArea.style.height = _selectorAreaSize + 'px';\n\n                var angle = null;\n                var deltaX = p1.x - p2.x;\n                var deltaY = p1.y - p2.y;\n\n                angle =  Math.atan2(-deltaY , -deltaX) * 180 / Math.PI;    \n\n                selectionArea.style.transform = 'rotate('+ angle +'deg)';\n                selectionArea.style.transformOrigin = '0px ' + (_selectorAreaSize / 2) + 'px';\n            }\n        }.bind(this));\n\n        if (this.measureTool.areAllPicksSet()) {\n            this.enableSelectionAreas(true);    \n        }\n    };\n\n    proto.clearSelectionAreas = function() {\n        const _document = this.getDocument();\n        this.segments.forEach(function(item) \n        {  \n            if (item.selectionArea) {\n                item.selectionArea.removeEventListener('mousewheel', this.viewer.toolController.mousewheel);\n                item.selectionArea.removeEventListener('click', this.onSelectionAreaClickedBinded);\n                var element = _document.getElementById('measurement-selection-area-' + this.measurement.id);\n                if (element) {\n                    element.parentNode.removeChild(element);\n                }\n                item.selectionArea = null;\n            }\n        }.bind(this));\n    };\n\n    proto.enableSelectionAreas = function(enable) {\n        this.segments.forEach(function(item) \n        {   \n            if (item.selectionArea) {\n                if (enable) {\n                    item.selectionArea.style.display = 'block';\n                } \n                else {\n                    item.selectionArea.style.display = 'none';\n                }\n            }\n        }.bind(this));\n    };\n\n    proto.render = function(picks, showMeasureResult) {\n        Indicator.prototype.render.call(this, picks, showMeasureResult);\n\n        this.updateSelectionArea();\n    };\n\n    proto.renderFromPoints = function(points, showMeasureResult) {\n        Indicator.prototype.renderFromPoints.call(this, points, showMeasureResult);\n\n        this.updateSelectionArea();\n    }\n\n    proto.onCameraChange = function() {\n        this.redrawDashedLines();\n        this.updateSelectionArea();\n        this.hideLabelsOutsideOfView();\n        this.updateLabelsPosition();\n    };\n\n    proto.handleResize = function() {\n        this.redrawDashedLines();\n        this.updateSelectionArea();\n        this.updateLabelsPosition();\n    };\n\n","import { MeasurementsManager } from './MeasurementsManager'\nimport { MeasureToolIndicator } from './MeasureToolIndicator'\n\nconst av = Autodesk.Viewing;\n\n//\n// /** @constructor */\n//\n//\nexport function MeasureTool( viewer, options, sharedMeasureConfig, snapper )\n{\n    var _viewer  = viewer;\n    var _options = options || {};\n    var _names  = [\"measure\"];\n    var _priority = 50;\n\n    this.setGlobalManager(viewer.globalManager);\n\n    // Shared State with CalibrationTool and Indicator\n    var _sharedMeasureConfig = sharedMeasureConfig;\n\n    var av = Autodesk.Viewing;\n    var avem = Autodesk.Viewing.Extensions.Measure;\n    var MeasureCommon = Autodesk.Viewing.MeasureCommon;\n    \n    // Not shared with Indicator.js\n    var _active = false;\n    var _isDragging = false;\n    var _endpointMoved = false;\n    var _activePoint = 0;\n    var _consumeSingleClick = false;\n    var _singleClickHandled = false;\n    var _downX = null;\n    var _downY = null;\n    var _isolateMeasure = false;\n\n    var _measurementsManager = new MeasurementsManager(_viewer);\n    var _currentMeasurement = null;\n    var _onIndicatorCreatedCB = null;\n    var _fetchingMeasurements = [];\n    var _prevMeasurement = null;\n    var _useLastViewport = false;\n\n    var _cursor = \"url(data:image/png;base64,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), auto\";\n\n    // Snapper\n    var _snapper = snapper;\n    \n    var _isPressing = false;\n\n    var _picksBackup = [];\n    var _cursorPosition = null;\n\n    var _closeAreaSnapRange = 25;\n    var _preMeasureState = null;\n\n    var _measurementType = MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE;\n\n    var _sessionMeasurements = null;\n\n    function getActivePick()\n    {   \n        if(!_currentMeasurement)\n            return null;\n\n        var index;\n\n        if (_activePoint === 0) {\n            return null;\n        } else if (_activePoint === _currentMeasurement.getMaxNumberOfPicks() + 1) {\n            index = _currentMeasurement.countPicks();\n        } else {\n               index = _activePoint;\n        }\n\n        return _currentMeasurement.getPick(index);\n    }\n\n    function getPreviousPick()\n    {\n        if(!_currentMeasurement)\n            return null;\n\n        var index;\n\n        if (_activePoint === 0) {\n            return null;\n        } else if (_activePoint === 1) {\n            index = _currentMeasurement.countPicks();\n        } else if (_activePoint === _currentMeasurement.getMaxNumberOfPicks() + 1) {\n            index = _currentMeasurement.countPicks() - 1;\n        } else {\n            index = _activePoint - 1;\n        }\n        \n        return _currentMeasurement.getPick(index);\n    }\n\n    function hasPreviousPick()\n    {\n        if(!_currentMeasurement)\n            return false;\n\n        var index;\n\n        if (_activePoint === 0) {\n            return false;\n        } else if (_activePoint === 1) {\n            index = _currentMeasurement.countPicks();\n        } else if (_activePoint === _currentMeasurement.getMaxNumberOfPicks() + 1) {\n            index = _currentMeasurement.countPicks() - 1;\n        } else {\n            index = _activePoint - 1;\n        }\n        \n        return _currentMeasurement.hasPick(index);\n    }\n\n    function noPicksSet() {\n        _activePoint = 0;\n    }\n\n    function allPicksSet() {\n        _activePoint = _currentMeasurement.countPicks() + 1;\n        enableMeasurementsTouchEvents(true);\n        _currentMeasurement.indicator.enableSelectionAreas(true);\n        \n        // Keep track of the previous measurement\n        _prevMeasurement = _currentMeasurement.clone();\n        _viewer.dispatchEvent({\n            type: MeasureCommon.Events.MEASUREMENT_COMPLETED_EVENT,\n            data: { type: _currentMeasurement.measurementType, id: _currentMeasurement.id }\n        });\n    }\n\n    function isNoPicksSet() {\n        return _activePoint === 0 || !_currentMeasurement;\n    }\n\n    this.areAllPicksSet = function() {\n        return _currentMeasurement && (_activePoint === _currentMeasurement.getMaxNumberOfPicks() + 1);\n    };\n\n    this.setSessionMeasurements = function(measurementList) {\n        // Store the clone of the measurementList\n        _sessionMeasurements = JSON.parse(JSON.stringify(measurementList));\n    };\n\n    this.getSessionMeasurements = function() {\n        return JSON.parse(JSON.stringify(_sessionMeasurements));\n    };\n\n    this.register = function()\n    {\n\n    };\n\n    this.deregister = function()\n    {\n        this.deactivate();\n    };\n\n    this.isActive = function()\n    {\n        return _active;\n    };\n\n    this.getNames = function()\n    {\n        return _names;\n    };\n\n    this.getName = function()\n    {\n        return _names[0];\n    };\n\n    this.getPriority = function()\n    {\n        return _priority;\n    };\n\n    this.getCursor = function() {\n        return _isDragging ? null : _cursor;\n    };\n\n    this.getCurrentMeasurementRaw = function() {\n        return _currentMeasurement;\n    };\n\n    this.getActivePointIndex = function() {\n        return _activePoint;\n    };\n\n    this.getMeasurementsManager = function() {\n        return _measurementsManager;\n    }\n\n\n    this.startNewMeasurement = function() {\n        _currentMeasurement = _measurementsManager.createMeasurement(_measurementType);\n        _currentMeasurement.attachIndicator(_viewer, this, MeasureToolIndicator);\n\n        if (_onIndicatorCreatedCB instanceof Function) {\n            _onIndicatorCreatedCB();\n            _onIndicatorCreatedCB = null;\n        }\n\n        enableMeasurementsTouchEvents(false);\n    };\n\n    this.changeMeasurementType = function(type) {\n        _measurementType = type;\n    };\n\n    this.activate = function()\n    {\n        _active = true;\n        _measurementsManager.init();\n\n        noPicksSet();\n        _isDragging = false;\n        this.isEditingEndpoint = false;\n        this.editByDrag = false;\n\n        _viewer.impl.pauseHighlight(true);\n\n        _viewer.clearSelection();\n        _preMeasureState = _viewer.getState({objectSet: true});\n        \n        _viewer.toolController.activateTool(\"snapper\");\n        _viewer.toolController.activateTool(\"magnifyingGlass\");\n \n       this.onMeasurementChangedBinded = this.onMeasurementChanged.bind(this);\n       _viewer.addEventListener(MeasureCommon.Events.MEASUREMENT_CHANGED_EVENT, this.onMeasurementChangedBinded);\n       _viewer.addEventListener(av.CAMERA_CHANGE_EVENT, this.onCameraChange);\n       _viewer.addEventListener(av.SHOW_ALL_EVENT, this.onShowAllEvent);\n\n       // Set the stored session measurements only if the preference is enabled\n       const restoreSessionMeasurements = _viewer.prefs.get(av.Private.Prefs.RESTORE_SESSION_MEASUREMENTS);\n       if (restoreSessionMeasurements) {\n           const sessionMeasurements = this.getSessionMeasurements();\n           this.setMeasurements(sessionMeasurements);\n           this.isolateMeasurement();\n       }\n    };\n\n    this.deactivate = function()\n    {\n        if (!_active)\n            return;\n\n        // Store the session measurements only if the preference is enabled\n        const restoreSessionMeasurements = _viewer.prefs.get(av.Private.Prefs.RESTORE_SESSION_MEASUREMENTS);\n        if (restoreSessionMeasurements) {\n            this.clearIncompleteMeasurement();\n            const measurementList = this.getMeasurementList();\n            this.setSessionMeasurements(measurementList);\n        }\n\n        _active = false;\n        \n        this.clearIsolate(); // restore initial isolation\n        _preMeasureState = null;\n\n        _prevMeasurement = null;\n        _useLastViewport = false;\n\n        while (Object.keys(_measurementsManager.measurementsList).length > 0) {\n            _currentMeasurement = _measurementsManager.measurementsList[Object.keys(_measurementsManager.measurementsList)[0]];\n            _measurementsManager.changeCurrentMeasurement(_currentMeasurement);\n            this.clearCurrentMeasurement();\n            _currentMeasurement = null;\n        }\n\n        if(_snapper && _snapper.isActive()) {\n            _viewer.toolController.deactivateTool(\"snapper\");\n        }\n\n        _viewer.toolController.deactivateTool(\"magnifyingGlass\");\n\n        _viewer.impl.pauseHighlight(false);\n\n        _measurementsManager.destroy();\n        _viewer.removeEventListener(av.CAMERA_CHANGE_EVENT, this.onCameraChange);\n        _viewer.removeEventListener(MeasureCommon.Events.MEASUREMENT_CHANGED_EVENT, this.onMeasurementChangedBinded);\n        _viewer.removeEventListener(av.SHOW_ALL_EVENT, this.onShowAllEvent);\n    };\n\n    this.clearIncompleteMeasurement = function() {\n        if (!this.areAllPicksSet()) {\n            if (this.isEditingEndpoint) {\n                this.undoEditEndpoint();\n            } else {\n                this.clearCurrentMeasurement();\n            }\n        }\n    };\n\n    this.update = function()\n    {\n        return false;\n    };\n\n    this.getUnits = function() {\n        return _sharedMeasureConfig.units;\n    };\n\n    this.setUnits = function( units )\n    {\n        if (_sharedMeasureConfig.units !== units ) {\n            _sharedMeasureConfig.units = units;\n            _viewer.dispatchEvent({ type: MeasureCommon.Events.DISPLAY_UNITS_CHANGED, units: units});\n\n            for (var key in _measurementsManager.measurementsList) {\n                if (_measurementsManager.measurementsList.hasOwnProperty(key)) {\n                    // Update UI\n                    var measurement = _measurementsManager.measurementsList[key];\n                    if (measurement.indicator) {\n                        measurement.indicator.updateResults();\n                    }\n                }\n            }\n        }\n    };\n\n    this.getPrecision = function() {\n        return _sharedMeasureConfig.precision;\n    };\n\n    this.setPrecision = function( precision ) {\n\n        if (_sharedMeasureConfig.precision !== precision ) {\n            _sharedMeasureConfig.precision = precision;\n\n            for (var key in _measurementsManager.measurementsList) {\n                if (_measurementsManager.measurementsList.hasOwnProperty(key)) {\n                    // Update UI\n                    var measurement = _measurementsManager.measurementsList[key];\n                    if (measurement.indicator) {\n                        measurement.indicator.updateResults();\n                    }\n                }\n            }\n        }\n    };\n\n    /**\n     * Prepare the measurement snap result information into a serializable object.\n     * @param {*} measurement \n     */\n    function getPickData(measurement) {\n        measurement = measurement || _currentMeasurement;\n        const picks = measurement.clonePicks();\n        const picksData = [];\n        for (let i = 0; i < picks.length; i++) {\n            const pick = picks[i];\n\n            let pickPoint = MeasureCommon.getSnapResultPosition(pick, _viewer);\n            const model = pick.hasOwnProperty('modelId') && pick.modelId ? _viewer.impl.findModel(pick.modelId) : _viewer.model;\n            if (model) {\n                const modelData = model.getData();\n                pickPoint = modelData && modelData.hasOwnProperty('globalOffset') ? pickPoint.clone().add(modelData.globalOffset) : pickPoint.clone();\n            }\n\n            const pickData = {\n                intersection: JSON.parse(JSON.stringify(pickPoint)),\n                modelId: pick.modelId,\n                viewportIndex2d: pick.viewportIndex2d,\n                snapNode: pick.snapNode\n            };\n            picksData.push(pickData);\n        }\n\n        return picksData;\n    };\n\n    this.getDistanceXYZ = function(measurement) {\n        if (!measurement) {\n            measurement = _currentMeasurement;\n        }\n        return this.getDistanceAux(measurement.distanceXYZ);\n    };\n    this.getDistanceX = function(measurement) {\n        if (!measurement) {\n            measurement = _currentMeasurement;\n        }\n        return this.getDistanceAux(measurement.distanceX);\n    };\n    this.getDistanceY = function(measurement) {\n        if (!measurement) {\n            measurement = _currentMeasurement;\n        }\n        return this.getDistanceAux(measurement.distanceY);\n    };\n    this.getDistanceZ = function(measurement) {\n        if (!measurement) {\n            measurement = _currentMeasurement;\n        }\n        return this.getDistanceAux(measurement.distanceZ);\n    };\n\n    /**\n     * @private\n     */\n    this.getDistanceAux = function (measurementDistance) {\n\n        if (_viewer.model) {\n            var d = Autodesk.Viewing.Private.convertUnits(_viewer.model.getUnitString(), _sharedMeasureConfig.units, _sharedMeasureConfig.calibrationFactor, measurementDistance || 0);\n            return Autodesk.Viewing.Private.formatValueWithUnits(d, _sharedMeasureConfig.units, 3, _sharedMeasureConfig.precision);\n        }\n    };\n\n    this.getAngle = function(measurement) {\n\n        if (!measurement) {\n            measurement = _currentMeasurement;\n        }\n        var angle = measurement.angle;\n        return Autodesk.Viewing.Private.formatValueWithUnits(angle, String.fromCharCode(0xb0), 3, _sharedMeasureConfig.precision);\n    };\n\n    this.getLocation = function(measurement) {\n\n        if (!measurement) {\n            measurement = _currentMeasurement;\n        }\n        var location = measurement.location || { x: 0, y: 0, z: 0};\n        return 'X: ' + this.getDistanceAux(location.x) +\n            '\\nY: ' + this.getDistanceAux(location.y) +\n            '\\nZ: ' + this.getDistanceAux(location.z);\n    };\n\n    this.getCallout = function(measurement) {\n\n        if (!measurement) {\n            measurement = _currentMeasurement;\n        }\n        return measurement.text || \"\";\n    };\n\n    this.getArea = function(measurement) { \n\n        if (_viewer.model) {\n\n            if (!measurement) {\n                measurement = _currentMeasurement;\n            }\n\n            var area = Autodesk.Viewing.Private.convertUnits(viewer.model.getUnitString(), _sharedMeasureConfig.units, _sharedMeasureConfig.calibrationFactor, measurement.area, 'square');\n\n            if (_sharedMeasureConfig.units) {\n                return Autodesk.Viewing.Private.formatValueWithUnits(area, _sharedMeasureConfig.units+'^2', 3, _sharedMeasureConfig.precision);\n            }\n            else {\n                return Autodesk.Viewing.Private.formatValueWithUnits(area, null, 3, _sharedMeasureConfig.precision);\n            }\n        }\n    };\n\n    function snapToFirstPick(currentPick, forceSnap) {\n        if (_currentMeasurement.hasPick(1) && _activePoint > 3 && !_currentMeasurement.closedArea) {\n            var firstPick = _currentMeasurement.getPick(1);\n            var firstPickPoint = MeasureCommon.getSnapResultPosition(firstPick, _viewer);\n            var firstPickPosition = MeasureCommon.project(firstPickPoint, viewer);\n            var currentPickPoint = MeasureCommon.getSnapResultPosition(currentPick, _viewer);\n            var currentPickPosition = MeasureCommon.project(currentPickPoint, viewer);\n            \n            if (forceSnap || currentPickPosition.distanceTo(firstPickPosition) < _closeAreaSnapRange) {\n                _snapper.onMouseMove(firstPickPosition);\n                firstPick.copyTo(currentPick);\n            }\n        }\n    }\n\n    /**\n     * Overrides each pick's viewportIndex2d in the current measurement with the passed in viewportIndex.\n     * This function only overrides the viewport index if the current measurement's picks do not have the viewportIndex2d set.\n     */\n    function setMeasurePicksViewport(viewportIndex) {\n        const picks = _currentMeasurement.picks;\n        for (var key in picks) {\n            if (picks.hasOwnProperty(key)) {\n                // If the current measurement has a viewport index do not override the its picks viewport id with the previous measurement's.\n                if (picks[key].viewportIndex2d) return;\n                picks[key].viewportIndex2d = viewportIndex;\n            }\n        }\n    }\n\n    function render(showResult) {\n        // LMV-5498: Set the current measurement's picks viewport to the previous measurement's pciks viewport.\n        if (_useLastViewport && _prevMeasurement && _prevMeasurement.picks.length > 0) {\n            setMeasurePicksViewport(_prevMeasurement.picks[0].viewportIndex2d);\n        }\n\n        var hasResult = _currentMeasurement.computeResult(_currentMeasurement.picks, _viewer, _snapper);\n        _currentMeasurement.indicator.render(_currentMeasurement.picks, _consumeSingleClick || !!showResult);\n\n        return hasResult;\n    }\n\n    this.setUseLastViewport = function(value) {\n        _useLastViewport = value;\n    };\n\n    this.getUseLastViewport = function() {\n        return _useLastViewport;\n    }\n\n    /**\n     * Sets existing measurements from the passed in measurement list. Reference getMeasurementList.\n     * \n     * @param {Object[]} measurementList - measurements to set.\n     */\n    this.setMeasurements = function(measurementList) {\n        if (!measurementList) return; // Only set the a measurementList is passed in.\n        measurementList = !Array.isArray(measurementList) ? [measurementList] : measurementList;\n\n        if (measurementList.length === 0) return;\n\n        function getMeasureType(measureData) {\n            let measurementType;\n            switch (measureData.type) {\n                case 'Distance':\n                    measurementType = MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE;\n                    break;\n                case 'Angle':\n                    measurementType = MeasureCommon.MeasurementTypes.MEASUREMENT_ANGLE;\n                    break;\n                case 'Area':\n                    measurementType = MeasureCommon.MeasurementTypes.MEASUREMENT_AREA;\n                    break;\n                case 'Location':\n                    measurementType = MeasureCommon.MeasurementTypes.MEASUREMENT_LOCATION;\n                    break;\n                case 'Callout':\n                    measurementType = MeasureCommon.MeasurementTypes.MEASUREMENT_CALLOUT;\n                    break;\n                default:\n                    return;\n            }\n            return measurementType;\n        }\n\n        // Restore the supplied measurementList.\n        for (let i = 0; i < measurementList.length; i++) {\n            const measureData = measurementList[i];\n            const measurementType = getMeasureType(measureData);\n            if (!measurementType) continue;\n\n            const attachIndicatorCb = (measurement) => {\n                _currentMeasurement = measurement; // _currentMeasurement needs to be set for the onMeasurementChanged to work\n                measurement.attachIndicator(_viewer, this, MeasureToolIndicator);\n\n                if (_onIndicatorCreatedCB instanceof Function) {\n                    _onIndicatorCreatedCB();\n                    _onIndicatorCreatedCB = null;\n                }\n\n                enableMeasurementsTouchEvents(false);\n            };\n\n            const initPicksCb = () => {\n                const restoredMeasurements = _measurementsManager.getRestoredMeasurementData();\n                const points = restoredMeasurements[_currentMeasurement.id];\n                _activePoint = points.length;\n            };\n\n            _measurementsManager.createMeasurementFromData(\n                measureData,\n                measurementType,\n                attachIndicatorCb,\n                initPicksCb\n            );\n        }\n\n        this.deselectAllMeasurements();\n    };\n\n    function getMeasurementType(measurement) {\n        measurement = measurement || _currentMeasurement;\n        const types = MeasureCommon.MeasurementTypes;\n        const type = measurement.measurementType;\n        switch (type) {\n            case types.MEASUREMENT_DISTANCE:\n                return 'Distance';\n            case types.MEASUREMENT_ANGLE:\n                return 'Angle';\n            case types.MEASUREMENT_AREA:\n                return 'Area';\n            case types.CALIBRATION:\n                return 'Calibration';\n            case types.MEASUREMENT_LOCATION:\n                return 'Location';\n            case types.MEASUREMENT_CALLOUT:\n                return 'Callout';\n            default:\n                return;\n        }\n    }\n\n    /**\n     * TODO: We need to flesh out the return value here.\n     *\n     * @param unitType\n     * @param precision\n     * @returns {Object}\n     */\n    this.getMeasurement = function(unitType, precision) {\n\n        _sharedMeasureConfig.units = unitType || _sharedMeasureConfig.units;\n        _sharedMeasureConfig.precision = precision || _sharedMeasureConfig.precision;\n\n        var geomTypes = ['Vertex', 'Edge', 'Face', 'Circular Arc', 'Curved Edge', 'Curved Face'];\n        var picks = getPickData();\n        var type = getMeasurementType();\n        var measurement = {\n            from: geomTypes[_currentMeasurement.getGeometry(1).type],\n            to: geomTypes[_currentMeasurement.getGeometry(2).type],\n            distance: this.getDistanceXYZ(),\n            deltaX: this.getDistanceX(),\n            deltaY: this.getDistanceY(),\n            deltaZ: this.getDistanceZ(),\n            angle: this.getAngle(),\n            area: this.getArea(),\n            location: this.getLocation(),\n            text: this.getCallout(),\n            unitType: _sharedMeasureConfig.units,\n            precision: _sharedMeasureConfig.precision,\n            picks,\n            type\n        };\n\n        return measurement;\n    };\n\n    /**\n     * @returns {SnapResult[]} list of points for the selected measurement.\n     */\n    this.getMeasurementPoints = function() {\n\n        return _currentMeasurement.clonePicks();\n    };\n\n    /**\n     * @param unitType\n     * @param precision\n     * @returns {Array.<Object>}\n     */\n\n    this.getMeasurementList = function(unitType, precision) {\n        var list = [];\n        var measurement = null;\n        // TODO: These need to match the measurement SnapTypes\n        var geomTypes = ['Vertex', 'Edge', 'Face', 'Circular Arc', 'Curved Edge', 'Curved Face'];\n        var measurementList = Object.keys(_measurementsManager.measurementsList);\n\n        for(let i = 0; i < measurementList.length; i++) {\n            measurement = _measurementsManager.measurementsList[measurementList[i]];\n            var picks = getPickData(measurement);\n            var type = getMeasurementType(measurement);\n            var result = {\n              from: geomTypes[measurement.getGeometry(1).type],\n              to: geomTypes[measurement.getGeometry(2).type],\n              distance: this.getDistanceXYZ(measurement),\n              deltaX: this.getDistanceX(measurement),\n              deltaY: this.getDistanceY(measurement),\n              deltaZ: this.getDistanceZ(measurement),\n              angle: this.getAngle(measurement),\n              area: this.getArea(measurement),\n              location: this.getLocation(measurement),\n              text: this.getCallout(measurement),\n              unitType: unitType || _sharedMeasureConfig.units,\n              precision: precision || _sharedMeasureConfig.precision,\n              picks,\n              type\n            };\n            if (measurement.options) {\n                const options = result.options = JSON.parse(JSON.stringify(measurement.options));\n                if (!options.modelId && picks[0] && picks[0].modelId)\n                    options.modelId = picks[0].modelId;\n                const model = options.modelId ? _viewer.impl.findModel(options.modelId) : _viewer.model;\n                const globalOffset = model && model.getData().globalOffset;\n                if (globalOffset && (globalOffset.x !== 0 || globalOffset.y !== 0 || globalOffset.z !== 0)) {\n                    const cvtPts = points => {\n                        if (points) {\n                            for (let i = 0; i < points.length; ++i) {\n                                // Tricky way to use Vector3 add on plain objects\n                                THREE.Vector3.prototype.add.call(points[i], globalOffset);\n                            }\n                        }\n                    };\n                    cvtPts(options.dimensionOffset);\n                    cvtPts(options.dashedLeader);\n                    cvtPts(options.arc);\n                }\n            }\n            list.push(result);\n        }\n        return list;\n    };\n\n    this.clearCurrentMeasurement = function() {\n        if (_currentMeasurement) {\n            noPicksSet();\n\n            for (var key in _currentMeasurement.picks) {\n                if (_currentMeasurement.picks.hasOwnProperty(key)) {\n                    this.clearPick(key);    \n                }\n            }\n            \n            this.updateViewportId(true);\n\n            if (_isolateMeasure) {\n                this.clearIsolate();    \n            }\n\n            _currentMeasurement.indicator.clear();\n            _currentMeasurement.indicator.destroy();\n            _currentMeasurement = _measurementsManager.removeCurrentMeasurement();\n            _currentMeasurement = null;\n        }\n\n        enableMeasurementsTouchEvents(true);\n    };\n\n    this.clearPick = function(pickNumber) {\n        if (_currentMeasurement && _currentMeasurement.hasPick(pickNumber)) {\n            _currentMeasurement.clearPick(pickNumber);\n            _currentMeasurement.indicator.hideClick(pickNumber);\n        }\n    };\n\n    this.setIsolateMeasure = function(enable) {\n        _isolateMeasure = enable;\n    };\n\n    this.isolateMeasurement = function () {\n\n        if (!_active || !_isolateMeasure) {\n            return;\n        }\n\n        var defaultModelId = _viewer.model.id;\n        var isolationGroups = {};\n\n        for (var key in _measurementsManager.measurementsList) {\n            if (_measurementsManager.measurementsList.hasOwnProperty(key)) {\n\n                var measurement = _measurementsManager.measurementsList[key];\n                for (var key in measurement.picks) {\n                    if (measurement.picks.hasOwnProperty(key)) {\n                        var pick = measurement.getPick(key);\n\n                        var modelId = pick.modelId || defaultModelId;\n                        if (!Array.isArray(isolationGroups[modelId])) {\n                            isolationGroups[modelId] = [];\n                        }\n                        if (isolationGroups[modelId].indexOf(pick.snapNode) == -1) {\n                            isolationGroups[modelId].push(pick.snapNode);\n                        }\n                    }\n                }\n\n            }\n        }\n    \n\n        // convert to expected format\n        var isolationSet = [];\n        for (var modelId in isolationGroups) {\n            if (isolationGroups.hasOwnProperty(modelId)) {\n\n                var modelInstance = _viewer.impl.findModel(parseInt(modelId));\n                isolationSet.push({\n                    model: modelInstance,\n                    ids: isolationGroups[modelId]\n                });\n            }\n        }\n\n        if (isolationSet.length) {\n            _viewer.impl.visibilityManager.aggregateIsolate(isolationSet);\n        }\n    };\n\n    // It actually restores the isolation state to the one just before\n    // the measure tool was enabled...\n    this.clearIsolate = function() {\n        if (_preMeasureState) {\n            _viewer.restoreState(_preMeasureState, undefined, true);\n        }\n    };\n\n    this.onShowAllEvent = function (event) {\n        _preMeasureState = null;\n    };\n\n    this.deselectAllMeasurements = function() {\n        if (_currentMeasurement && !this.areAllPicksSet()) {\n            if (this.isEditingEndpoint) {\n                this.undoEditEndpoint();\n            }\n            else {\n                this.clearCurrentMeasurement();\n            }\n        }\n\n        for (var key in _measurementsManager.measurementsList) {\n            if (_measurementsManager.measurementsList.hasOwnProperty(key)) {\n                var measurement = _measurementsManager.measurementsList[key];\n                if (measurement.indicator) {\n                    measurement.indicator.setSimple(true);        \n                    measurement.indicator.hideEndpoints();\n                    measurement.indicator.unfocusLabels();\n                }\n            }\n        }\n\n        _currentMeasurement = null;\n    };\n\n    this.onMeasurementChanged = function() {\n        \n        this.deselectAllMeasurements();\n\n        _currentMeasurement = _measurementsManager.getCurrentMeasurement();\n        \n        if (_currentMeasurement.isComplete()) {\n            _currentMeasurement.indicator.setSimple(false);        \n            allPicksSet();\n            render(true); \n            this.updateResults();\n        }\n    };\n\n    this.selectMeasurementById = function(measurementId) {\n        if (!_currentMeasurement) {\n            _currentMeasurement = _measurementsManager.selectMeasurementById(measurementId);\n        }\n\n        if (_currentMeasurement.id !== measurementId) {\n            this.clearIncompleteMeasurement();\n            \n            _currentMeasurement = _measurementsManager.selectMeasurementById(measurementId);\n        }\n    };\n\n    function enableMeasurementsTouchEvents(enable) {\n        for (var key in _measurementsManager.measurementsList) {\n            if (_measurementsManager.measurementsList.hasOwnProperty(key)) {\n                var measurement = _measurementsManager.measurementsList[key];\n                measurement.indicator.changeAllEndpointsEditableStyle(enable);   \n                measurement.indicator.enableSelectionAreas(enable);\n                measurement.indicator.enableLabelsTouchEvents(enable);\n            }\n        }\n    }\n\n    this.editEndpoint = function(event, endpointNumber, measurementId) {\n        if (_currentMeasurement.id === measurementId && _activePoint === endpointNumber) {\n            _currentMeasurement.indicator.changeEndpointOnEditStyle(endpointNumber, false);\n            this.undoEditEndpoint();\n            return;\n        }\n\n        this.selectMeasurementById(measurementId);\n\n        _activePoint = endpointNumber;\n        this.isEditingEndpoint = true;\n\n        _currentMeasurement.indicator.changeEndpointOnEditStyle(endpointNumber, true);\n        enableMeasurementsTouchEvents(false);\n\n        for (var key in _currentMeasurement.picks) {\n            if (_currentMeasurement.picks.hasOwnProperty(key)) {\n                _picksBackup[key] = _currentMeasurement.getPick(key).clone();\n            }\n        }\n\n        this.updateViewportId();\n\n        if (_isolateMeasure) {\n            this.clearIsolate();    \n        }\n\n        if (_currentMeasurement.isRestored) {\n            // populate the existing picks with the new snap result from the snapper\n            _snapper.onMouseMove({x: event.canvasX, y: event.canvasY});\n            const snapResult = _snapper.getSnapResult().clone();\n            const pick = _currentMeasurement.getPick(_activePoint);\n            snapResult.copyTo(pick);\n\n            // Keep track of the pick that was updated.\n            pick.isValid = true;\n\n            // Set isRestored flag back to false if all of the picks have been validated\n            _currentMeasurement.isRestored = !function() {\n                const picks = _currentMeasurement.picks;\n                for (var key in picks) {\n                    if (picks.hasOwnProperty(key)) {\n                        const pick = picks[key];\n                        if (!pick.isValid) {\n                            return false;\n                        }\n                    }\n                }\n                return true;\n            }();\n        }\n\n        if(!av.isMobileDevice()) {\n            this._handleMouseEvent(event);\n        }\n    };\n\n    function canCloseArea() {\n        return _currentMeasurement.countPicks() > 3;\n    }\n\n    this.undoEditEndpoint = function() {\n        _currentMeasurement.indicator.clear();\n\n        for (var key in _currentMeasurement.picks) {\n            if (_currentMeasurement.picks.hasOwnProperty(key)) {\n                _currentMeasurement.setPick(key, _picksBackup[key].clone());\n            }\n        }\n        \n        _currentMeasurement.indicator.changeEndpointOnEditStyle(_activePoint, false);\n        \n        this.isEditingEndpoint = false;\n        this.updateViewportId(true);\n        allPicksSet();\n        render(true);\n    };\n\n    this.updateResults = function() {\n\n        _currentMeasurement.indicator.updateResults();\n        _currentMeasurement.indicator.showEndpoints();\n        _currentMeasurement.indicator.focusLabels();\n\n        if (_currentMeasurement.isComplete()) {\n            this.isolateMeasurement();\n        }\n    };\n\n    /**\n     * Delete all measurements.\n     */\n    this.deleteMeasurements = function() {\n        const measurements = _measurementsManager.measurementsList;\n        const keys = Object.keys(measurements);\n        for (let i = 0; i < keys.length; i++) {\n            const key = keys[i];\n            _measurementsManager.currentMeasurement = measurements[key];\n            _currentMeasurement = _measurementsManager.getCurrentMeasurement();\n            this.deleteCurrentMeasurement();\n        }\n    }\n\n    this.deleteCurrentMeasurement = function() {\n        this.clearCurrentMeasurement();\n        this.isEditingEndpoint = false;\n        this.editByDrag = false;\n        _isDragging = false;\n        this.isolateMeasurement();\n    };\n\n    this.deleteCurrentPick = function() {\n\n        var pick = getActivePick();\n        var id = pick.id;\n\n        while (_currentMeasurement.hasPick(id + 1)) {\n            _currentMeasurement.setPick(id, _currentMeasurement.getPick(id + 1));\n            id++;\n        }\n\n        delete _currentMeasurement.picks[id];\n        \n        \n        \n        var count = _currentMeasurement.countPicks();\n        \n        _activePoint--;\n        \n        if (_activePoint <= 0) {\n            _activePoint = count;\n        }\n\n        if (this.isEditingEndpoint) {\n            if (count == 2) {\n                this.deleteCurrentMeasurement();\n                return;\n            }\n\n            _currentMeasurement.indicator.changeAllEndpointsOnEditStyle(false);\n            this.isEditingEndpoint = false;\n            this.updateViewportId(true);\n            allPicksSet();\n            render();\n        } else {\n            this._handleMouseEvent();    \n        }\n    };\n\n    this.updateViewportId = function(clear) {\n        if (_viewer.model && _viewer.model.is2d()) {\n            if (clear || isNoPicksSet()) {\n                _viewer.impl.updateViewportId(0);\n                _snapper.setViewportId(null);\n            }\n            else if (!_isPressing) {\n                var viewport = getPreviousPick().viewportIndex2d || getActivePick().viewportIndex2d;\n                \n                // Pass viewport Id to LineShader to make all other geometries with different viewport transparent\n                _viewer.impl.updateViewportId(viewport);\n                if (_snapper)\n                    _snapper.setViewportId(viewport);  \n            \n            }\n        }\n    };\n\n    // Setting session measurements before activating measure needed\n    // some special handling for the topology state. The problem was\n    // that the indicators were set to 'fetching', and were cleared from\n    // _currentMeasurement before the the topology fetch could finish.\n    // I changed the logic to track all of the measurements that were\n    // marked as fetching and clear them when the fetch is finished.\n\n    // Clear fetching state in all measurements that were created\n    // while we were fetching topology. The stateSetter is the name\n    // of the method that sets the correct state.\n    function changeFetchingState(stateSetter) {\n        // call setter for all measurements in the list\n        for (let i = 0; i < _fetchingMeasurements.length; ++i) {\n            var measurement = _fetchingMeasurements[i];\n            measurement.indicator[stateSetter]();\n        }\n        // Clear list\n        _fetchingMeasurements.length = 0;\n    }\n\n    this.setNoTopology = function() {\n        // Change existing indicators\n        changeFetchingState(\"setNoTopology\");\n        // Set state for future measurements\n        _onIndicatorCreatedCB = function() { _currentMeasurement.indicator.setNoTopology(); };\n    };\n    this.setFetchingTopology = function() {\n        // Set state for future measurements\n        _onIndicatorCreatedCB = function() {\n            _fetchingMeasurements.push(_currentMeasurement);\n            _currentMeasurement.indicator.setFetchingTopology();\n        };\n        // Change existing indicator\n        if (_currentMeasurement && _currentMeasurement.indicator)\n            _onIndicatorCreatedCB();\n    };\n    this.setTopologyAvailable = function() {\n        // Change existing indicators\n        changeFetchingState(\"setTopologyAvailable\");\n        // Set state for future measurements\n        _onIndicatorCreatedCB = function() { _currentMeasurement.indicator.setTopologyAvailable(); };\n    };\n\n    this.getSnapper = function() {\n        return _snapper;\n    };\n\n    this.correctPickPosition = function() {\n        \n        var active = getActivePick();\n        \n        if (active && !active.getGeometry() && _cursorPosition) {\n            active.geomType = MeasureCommon.SnapType.SNAP_VERTEX;\n            active.geomVertex = _cursorPosition;\n            active.intersectPoint = _cursorPosition;\n        }\n\n        if (hasPreviousPick()) {\n            var passive = getPreviousPick();\n            var corrected = MeasureCommon.correctPerpendicularPicks(passive, active, viewer, _snapper);\n            if (!corrected) {\n\n                // get next pick in case of closed loop measurement.\n                var id = (active.id + 1) % (_currentMeasurement.countPicks() + 1);\n                \n                if (id === 0)\n                    id = 1;\n\n                if (id !== active.id && _currentMeasurement.hasPick(id)) {\n                    var nextPick = _currentMeasurement.getPick(id);   \n                    MeasureCommon.correctPerpendicularPicks(nextPick, active, viewer, _snapper);\n                }\n            }\n            \n            if (_currentMeasurement.measurementType == MeasureCommon.MeasurementTypes.MEASUREMENT_AREA) {\n                snapToFirstPick(active);    \n            }\n        }\n    };\n\n    this._handleMouseEvent = function (event) {\n\n        var valid = false;\n\n        if (_snapper.isSnapped()) {\n            \n            // User picked a new point after two points where already set (or none) - Start a new measurement.\n            if (this.areAllPicksSet() || isNoPicksSet()) {\n                this.startNewMeasurement();\n\n                _activePoint = 1;\n            }\n\n            _snapper.copyResults(getActivePick());\n\n            valid = true;\n\n        } \n        else { \n            // In order to draw rubber-band, set the cursor position, so the indicator will use it as active point.\n            if (event && _viewer.model) {\n                var viewport = _viewer.container.getBoundingClientRect();\n                var x = event.canvasX || event.clientX - viewport.left;\n                var y = event.canvasY || event.clientY - viewport.top;\n\n                if (x && y) {\n                    let canDrawRubberBand;\n                    if (_viewer.impl.is2d) {\n                        canDrawRubberBand = true;\n                    } else {\n                        const renderer = _viewer.impl.renderer();\n                        const res = [];\n                        renderer.idAtPixel(x, y, res);\n                        const modelId = res[1];\n                        if (modelId > 0) {\n                            const model = _viewer.impl.modelQueue().findModel(modelId);\n                            canDrawRubberBand = model?.is2d();\n                        }\n                    }\n\n                    _cursorPosition = canDrawRubberBand ? MeasureCommon.inverseProject({x: x, y: y}, _viewer) : null;\n                }\n            }\n\n            // In case a measurement is set, and the user clicks on a blank spot - don't do nothing.\n            if (_consumeSingleClick && _currentMeasurement && !this.isEditingEndpoint) {\n                if (_activePoint === _currentMeasurement.getMaxNumberOfPicks() + 1) {\n                    return true;\n                }\n            }\n\n            var lastPick = getActivePick();\n            if (lastPick) {\n                lastPick.clear();\n            }\n        }\n\n        if (_currentMeasurement) {\n            this.correctPickPosition();\n            \n            if (_consumeSingleClick) {\n                this._doConsumeSingleClick();\n            }\n\n            if (!isNoPicksSet()) {\n                var renderSucceeded = render();\n                \n                // If it's the first pick, we don't expect the render of the rubberband to be succeeded.\n                // So enter here only if it's not the first pick.\n                if (_currentMeasurement.hasPick(2)) {\n                    valid &= renderSucceeded;\n                }\n            }\n        }\n\n        // If valid is false, the last pick is not revelant, and will clear it in case of a click.\n        return valid;\n    };\n\n    this._doConsumeSingleClick = function() {\n        // In case the measurement is a closed loop, eliminate the last pick.\n        if (_currentMeasurement.measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_AREA && !_currentMeasurement.closedArea) {\n            var length = _currentMeasurement.countPicks();\n            var firstPick = _currentMeasurement.getPick(1);\n            var lastPick = _currentMeasurement.getPick(length);\n\n            if (length >= 3 && _currentMeasurement.hasEqualPicks(firstPick, lastPick)) {\n                lastPick.clear();\n                delete _currentMeasurement.picks[length];\n                _currentMeasurement.closedArea = true;\n            }\n        }\n\n        this.updateResults();\n\n        var measurementComplete = _currentMeasurement.isComplete();\n        this.updateViewportId(measurementComplete);\n    };\n\n\n    this.handleButtonDown = function (event, button) {\n        if (av.isMobileDevice()) \n            return false;\n\n        _isDragging = true;\n        if (button === 0 && !event.ctrlKey && !event.metaKey && !event.shiftKey && !event.altKey) {\n            _consumeSingleClick = true;\n            _downX = event.canvasX;\n            _downY = event.canvasY;\n        }\n        return false;\n    };\n\n    this.handleMouseMove = function (event) {\n\n        if (av.isMobileDevice())\n            return false;\n\n        if (event.canvasX !== _downX || event.canvasY !== _downY) {\n            _consumeSingleClick = false;    \n        } \n\n        _endpointMoved = this.isEditingEndpoint;\n\n        if (!isNoPicksSet() && !this.areAllPicksSet()) {\n            this.clearPick(_activePoint);\n            this._handleMouseEvent(event);\n        }\n\n        _snapper.indicator.render();\n\n        return false;\n    };\n\n    this.restoreMouseListeners = function () {\n\n        // When a press event has happend, the default behavior of firefly.js is to disable other mouse events,\n        // So they won't be triggered as well.\n        // The solution is to enable them after the end of the pressing.\n\n        _viewer.toolController.getTool(\"gestures\").controller.enableMouseButtons(true);\n    };\n\n    this.handlePressHold = function (event) {\n        _consumeSingleClick = false;\n\n        if (av.isTouchDevice()) {\n            switch( event.type )\n            {\n                case \"press\":\n                    _isPressing = true;\n\n                    if (this.areAllPicksSet() || isNoPicksSet()) {\n                        this.startNewMeasurement();\n\n                        if (_isolateMeasure) { \n                            this.clearIsolate();\n                        }\n\n                        _activePoint = 1;\n                    }\n\n                    this._handleMouseEvent(event);\n                    _snapper.indicator.render();\n\n                    return true;\n\n                case \"pressup\":\n                    _consumeSingleClick = true;\n                    this.restoreMouseListeners();\n                    _singleClickHandled = !_singleClickHandled;\n                    this.handleSingleClick(event);\n                    _isPressing = false;\n                    return true;\n            }\n        }\n        return false;\n\n    };\n\n\n\n    this.handleGesture = function( event )\n    {   \n        if (av.isTouchDevice()){\n            \n            _consumeSingleClick = false;\n        \n            if (_isPressing) {\n                \n                this.clearPick(_activePoint);\n\n                switch( event.type )\n                {\n                    case \"dragstart\":\n                        this._handleMouseEvent(event);\n                        _snapper.indicator.render();\n\n                        return true;\n\n                    case \"dragmove\":\n                        this._handleMouseEvent(event);\n                        _snapper.indicator.render();\n\n                        return true;\n\n                    case \"dragend\":\n                        _isPressing = false;\n                        _consumeSingleClick = true;\n\n                        if (!this.editByDrag) {\n                            _singleClickHandled = !_singleClickHandled;\n                            this.handleSingleClick(event);    \n                        }\n\n                        this.editByDrag = false;\n                        this.restoreMouseListeners();\n                        return true;\n\n                    case \"pinchstart\":\n                        this._handleMouseEvent(event);\n                        _snapper.indicator.render();\n\n                        break;\n\n                    case \"pinchmove\":\n                        this._handleMouseEvent(event);\n                        _snapper.indicator.render();\n\n                        break;\n\n                    case \"pinchend\":\n                        _consumeSingleClick = true;\n                        _singleClickHandled = !_singleClickHandled;\n                        this.handleSingleClick(event);\n                        this.restoreMouseListeners();\n                        return true;\n                }\n            }\n\n            if (event.type.indexOf('pinch') !== -1) {\n                for (var key in _measurementsManager.measurementsList) {\n                    if (_measurementsManager.measurementsList.hasOwnProperty(key)) {\n                        var measurement = _measurementsManager.measurementsList[key];\n                        measurement.indicator.updateScale();    \n                    }\n                }\n            }\n        }\n\n        return false;\n    };\n\n    this.handleButtonUp = function (event, button) {\n        _isDragging = false;\n        _downX = null;\n        _downY = null;\n        \n        if (_endpointMoved) {\n            _consumeSingleClick = true;\n            _singleClickHandled = !_singleClickHandled;\n            this.handleSingleClick(event);\n            _endpointMoved = false;\n        }\n\n        return false;\n    };\n\n    this.handleSingleClick = function (event, button) {\n        if (_consumeSingleClick) {\n\n            _snapper.indicator.clearOverlays();\n\n            if (_currentMeasurement) {\n                _currentMeasurement.indicator.changeEndpointOnEditStyle(_activePoint, false);    \n            }\n\n            if (this._handleMouseEvent(event)) {\n                this.updateResults();\n                _activePoint++;\n            }\n            else {\n                if (this.isEditingEndpoint) {\n                    this.undoEditEndpoint();\n                }\n                else {\n                    if (_currentMeasurement && _currentMeasurement.measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_AREA && canCloseArea()) {\n                        snapToFirstPick(getActivePick(), true);\n                        this._handleMouseEvent();\n                    } else {\n                        this.clearCurrentMeasurement();    \n                    }\n                }\n            }\n\n            if (_currentMeasurement && _currentMeasurement.isComplete()) {\n                allPicksSet();\n            }\n\n            _consumeSingleClick = false;\n            _singleClickHandled = !_singleClickHandled;\n            this.isEditingEndpoint = false;\n\n            _snapper.clearSnapped();\n        }\n        return true;\n    };\n\n    this.handleDoubleClick = function(event) {\n        return true;\n    };\n\n    this.onCameraChange = function () {\n        for (var key in _measurementsManager.measurementsList) {\n            if (_measurementsManager.measurementsList.hasOwnProperty(key)) {\n                var measurement = _measurementsManager.measurementsList[key];\n                measurement.indicator.updateScale();\n            }\n        }\n\n        _snapper.indicator.onCameraChange();\n    };\n\n    this.handleSingleTap = function (event) {\n        if (!_singleClickHandled) {\n            _consumeSingleClick = true;\n            _snapper.onMouseDown({x: event.canvasX, y:event.canvasY});\n            this.handleSingleClick(event);\n        }\n        _singleClickHandled = !_singleClickHandled;\n\n        return true;\n    };\n\n    this.handleDoubleTap = function(event) {\n        if (_currentMeasurement && _currentMeasurement.measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_AREA && _currentMeasurement.countPicks() > 2) {\n            // fake single click over the first handle, to close the area.\n            var firstPick = _currentMeasurement.getPick(1);\n            var firstPickPoint = MeasureCommon.getSnapResultPosition(firstPick, _viewer);\n            var firstPickPosition = MeasureCommon.project(firstPickPoint, viewer);\n            event.canvasX = firstPickPosition.x;\n            event.canvasY = firstPickPosition.y;\n            _consumeSingleClick = true;\n            _snapper.onMouseDown(firstPickPosition);\n            this.handleSingleClick(event);\n            _singleClickHandled = !_singleClickHandled;\n        }\n\n        return true;\n    };\n\n    this.handleResize = function() {\n        for (var key in _measurementsManager.measurementsList) {\n            if (_measurementsManager.measurementsList.hasOwnProperty(key)) {\n                var measurement = _measurementsManager.measurementsList[key];\n                if (measurement.indicator) {\n                    measurement.indicator.handleResize();\n                }\n            }\n        }\n    };\n\n    this.handleKeyDown = function(event, keyCode) {\n        switch (keyCode) {\n            case Autodesk.Viewing.KeyCode.BACKSPACE:\n            case Autodesk.Viewing.KeyCode.DELETE:\n            if (_currentMeasurement && _currentMeasurement.measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_AREA && !this.areAllPicksSet()) {\n                if (_currentMeasurement.countPicks() > 2 ) {\n                    this.deleteCurrentPick();\n                } else {\n                    this.deleteCurrentMeasurement();    \n                }\n            } else {\n                this.deleteCurrentMeasurement();\n            }\n\n            return true;\n        }\n\n        return false;\n    };\n};\n\nav.GlobalManagerMixin.call(MeasureTool.prototype);\n","import { Indicator } from './Indicator'\n\n    var av = Autodesk.Viewing;\n    var MeasureCommon = Autodesk.Viewing.MeasureCommon;\n\n    // /** @constructor */\n    export function CalibrationToolIndicator(viewer, measurement, calibrationTool)\n    {\n        Indicator.call(this, viewer, measurement, calibrationTool);\n        this.calibrationTool = calibrationTool;\n        this.calibrationLabel = null;\n        this.endpoints = null;\n        this.tmpVector = new THREE.Vector3();\n        this.p1 = null;\n        this.p2 = null;\n\n        this.rubberbandDefaultMaterial = new THREE.MeshBasicMaterial({\n            color: 0xe8b22c,\n            opacity: 1,\n            transparent: false,\n            depthTest: false,\n            depthWrite: false,\n            side: THREE.DoubleSide\n        });\n\n        this.rubberbandSnappedMaterial = new THREE.MeshBasicMaterial({\n            color: 0x005BCE,\n            opacity: 1,\n            transparent: false,\n            depthTest: false,\n            depthWrite: false,\n            side: THREE.DoubleSide\n        });\n\n        this.rubberbandTipMaterial = new THREE.MeshBasicMaterial({\n            color: 0x000000,\n            opacity: 1,\n            transparent: false,\n            depthTest: false,\n            depthWrite: false,\n            side: THREE.DoubleSide\n        });\n\n    }\n\n    CalibrationToolIndicator.prototype = Object.create(Indicator.prototype);\n    CalibrationToolIndicator.prototype.constructor = CalibrationToolIndicator;\n    var proto = CalibrationToolIndicator.prototype;\n    \n    var kEndpointOffset = 15;\n    \n    var kCrossWidth = 1.5;\n    var kTipXWidth = 2;\n    var kLineWidth = 3;\n\n    var kTipXLength = 3;\n    var kCrossLength = 5;\n\n    var kDashSize = 2;\n    var kGapSize = 1;\n\n    proto.createEndpoint = function(name) {\n        this.endpoints[name] = {};\n        this.endpoints[name].position = null;\n\n        const _document = this.getDocument();\n        var label = this.endpoints[name].label = _document.createElement('div');\n        label.className = 'calibration-endpoint';\n\n        this.viewer.container.appendChild(label);\n\n        var text = _document.createElement('div');\n        text.className = 'calibration-endpoint-text';\n        text.textContent = name.toString();\n        label.appendChild(text);\n        \n        if (av.isTouchDevice()) {\n            this.initLabelMobileGestures(label, name, this.calibrationTool);\n        }\n        // Disable hover for mobile devices\n        if(!av.isMobileDevice()) {\n            MeasureCommon.safeToggle(label, 'enable-hover', true);\n\n            this.initMouseEvent(label, name);\n    \n            label.addEventListener('mousewheel', this.viewer.toolController.mousewheel);\n            \n        }   \n    };\n\n    proto.init = function() {\n\n        MeasureCommon.createCommonOverlay(this.viewer, this.overlayName);\n        \n        if (!this.calibrationLabel) {\n            const _document = this.getDocument();\n            this.calibrationLabel = _document.createElement('div');\n            this.calibrationLabel.className = 'calibration-label';\n            this.hideLabel(this.calibrationLabel);\n            this.viewer.container.appendChild(this.calibrationLabel);\n            this.calibrationLabel.addEventListener('mousewheel', this.viewer.toolController.mousewheel);\n\n            var text = _document.createElement('div');\n            text.className = 'calibration-label-text';\n            this.calibrationLabel.appendChild(text);\n        }\n\n        this.endpoints = [];\n\n        this.handleButtonUpBinded = this.calibrationTool.handleButtonUp.bind(this.calibrationTool);\n        this.addWindowEventListener('mouseup', this.handleButtonUpBinded);\n\n        this.onCameraChangeBinded = this.onCameraChange.bind(this);\n        this.viewer.addEventListener(av.CAMERA_CHANGE_EVENT, this.onCameraChangeBinded);\n    };\n\n    proto.destroy = function() {\n        this.clear();\n\n        Indicator.prototype.destroy.call(this);\n\n        if (this.calibrationLabel) {\n            this.calibrationLabel.removeEventListener('mousewheel', this.viewer.toolController.mousewheel);\n            this.viewer.container.removeChild(this.calibrationLabel);\n            this.calibrationLabel = null;\n        }\n\n        \n        this.viewer.impl.clearOverlay(this.overlayName);\n        this.viewer.impl.removeOverlayScene(this.overlayName);\n        \n        this.removeWindowEventListener('mouseup', this.handleButtonUpBinded);\n        this.viewer.removeEventListener(av.CAMERA_CHANGE_EVENT, this.onCameraChangeBinded);\n    };\n\n    proto.clearRubberband = function() {\n        this.viewer.impl.clearOverlay(this.overlayName);\n    };\n\n    proto.clear = function() {\n\n        this.clearRubberband();\n        \n        this.hideLabel(this.calibrationLabel);\n        \n        for (var name in this.endpoints) {\n            if (this.endpoints.hasOwnProperty(name)) {\n                this.hideClick(name);\n                this.endpoints[name].position = null;\n            }\n        }\n    };\n\n    proto.updateLabelValue = function(text) {\n        if (!text || text === \"\") {\n            this.calibrationLabel.childNodes[0].textContent = null;\n            this.hideLabel(this.calibrationLabel);\n        }\n        else {\n            this.calibrationLabel.childNodes[0].setAttribute(\"data-i18n\", text);\n            this.calibrationLabel.childNodes[0].textContent = av.i18n.translate(text);\n            this.showLabel(this.calibrationLabel);\n            this.calibrationTool.render();\n        }\n    };\n\n    proto.changeLabelClickableMode = function(clickable) {\n        if (clickable) {\n            this.calibrationLabel.childNodes[0].style.pointerEvents='all';\n        }\n        else {\n            this.calibrationLabel.childNodes[0].style.pointerEvents='none';\n        }\n    };\n\n    proto.showAddCalibrationLabel = function() {\n        var self = this;\n        this.updateLabelValue(\"Add Calibration\");\n        this.changeLabelClickableMode(true);\n        this.calibrationTool.render();\n        \n        this.calibrationLabel.addEventListener(\"click\", function onClick() {\n            self.calibrationLabel.childNodes[0].style.pointerEvents = 'none';\n            self.calibrationTool.render();\n            self.updateLabelValue(null);\n            self.calibrationTool.showPanel();\n            self.calibrationLabel.removeEventListener(\"click\", onClick);\n        });    \n    };\n\n    proto.updateLabelsPosition = function() {\n        for (var i = 1; i <= Object.keys(this.endpoints).length; i++) {\n            if (this.endpoints[i].position) {\n                var label = this.endpoints[i].label;\n                var pos = MeasureCommon.project(this.endpoints[i].position, this.viewer, kEndpointOffset);\n                label.style.left = (pos.x - parseInt(label.clientWidth) / 2) + 'px';\n                label.style.top = (pos.y - parseInt(label.clientHeight) / 2) + 'px';\n                label.point = this.endpoints[i].position;\n\n                // Detect and move in case of overlapping.\n                this.labelsOverlapDetection(this.endpoints[i].label, this.endpoints);\n            }\n        }\n\n        this.hideLabelsOutsideOfView();\n    };\n\n    function isLeftIntersect(current, other) {\n        return current.right >= other.left && current.right <= other.right;\n    }\n\n    function isRightIntersect(current, other) {\n        return current.left >= other.left && current.left <= other.right;\n    }\n\n    function isMiddleIntersect(current, other) {\n        return current.left <= other.left && current.right >= other.right;\n    }\n\n    function isVerticalIntersect(current, other) {\n        return current.top < other.bottom && current.bottom > other.top;\n    }\n\n    function moveLeft(currentLabel, currentRect, otherRect) {\n        currentLabel.style.left = parseInt(currentLabel.style.left, 10) - (currentRect.right - otherRect.left) + 'px';\n    }\n\n    function moveRight(currentLabel, currentRect, otherRect) {\n        currentLabel.style.left = parseInt(currentLabel.style.left, 10) + (otherRect.right - currentRect.left) + 'px';\n    }\n\n    function moveDown(currentLabel, currentRect, otherRect) {\n        currentLabel.style.top = parseInt(currentLabel.style.top, 10) + (otherRect.bottom - currentRect.top) + 'px';\n    }\n\n\n    proto.labelsOverlapDetection = function(staticLabel, labelsList) {\n\n        for (var i = 1; i <= Object.keys(labelsList).length ; i++) {\n\n            var dynamicLabel = labelsList[i].label;\n\n            if (staticLabel !== dynamicLabel) {\n                var staticRect = staticLabel.getBoundingClientRect();\n                var dynamicRect = dynamicLabel.getBoundingClientRect();\n\n                if (isVerticalIntersect(dynamicRect, staticRect)) {\n\n                    if (isLeftIntersect(dynamicRect, staticRect)) {\n                        moveLeft(dynamicLabel, dynamicRect, staticRect);\n                    }\n                    else if (isRightIntersect(dynamicRect, staticRect)) {\n                        moveRight(dynamicLabel, dynamicRect, staticRect);\n                    }\n                    else if (isMiddleIntersect(dynamicRect, staticRect)) {\n                        moveDown(dynamicLabel, dynamicRect, staticRect);\n                    }\n                }\n            }\n        }\n    };\n\n    proto.renderCalibrationLabel = function() {\n\n        if (this.showMeasureResult && this.calibrationLabel && this.p1 && this.p2) {\n            \n            var point = { x: (this.p1.x + this.p2.x)/2, y: (this.p1.y + this.p2.y)/2, z: (this.p1.z + this.p2.z)/2 };\n            var mid = MeasureCommon.project(point, this.viewer);\n\n            this.labelPosition = new THREE.Vector2(mid.x, mid.y);\n\n            if (this.calibrationLabel.childNodes[0].textContent) {\n                this.showLabel(this.calibrationLabel);\n            }\n\n            this.calibrationLabel.style.top  = this.labelPosition.y - Math.floor(this.calibrationLabel.clientHeight / 2) + 'px';\n            this.calibrationLabel.style.left = this.labelPosition.x - Math.floor(this.calibrationLabel.clientWidth / 2) + 'px' ;\n            this.calibrationLabel.point = point;\n\n            if (this.viewer.model.is2d()) {\n                this.alignLabelWithLine(this.calibrationLabel, this.p1, this.p2, this.calibrationLabel.clientHeight, this.viewer);\n            }\n        }\n    };\n\n    proto.drawMeasurementLineTip = function(point, direction, normal, flip) {\n\n        var tmpVec = new THREE.Vector3();\n        var geometry = new THREE.Geometry();\n        var p1Scale = this.setScale(point);\n\n        flip = flip ? -1 : 1;\n\n        var tipMaterial = (this.snapper.isSnapped() && !this.showMeasureResult) ? this.rubberbandSnappedMaterial : this.rubberbandTipMaterial;\n\n        // black tip\n        tmpVec.addVectors(point, normal.clone().multiplyScalar(kCrossLength * p1Scale));\n        geometry.vertices[0] = tmpVec.clone();\n        tmpVec.subVectors(point, normal.clone().multiplyScalar(kCrossLength * p1Scale));\n        geometry.vertices[1] = tmpVec.clone();\n        this.drawLineAsCylinder(geometry, tipMaterial, kCrossWidth, this.overlayName);\n\n        geometry.vertices[0] = point;\n        tmpVec.subVectors(point, direction.clone().multiplyScalar(kCrossLength * p1Scale * flip));\n        geometry.vertices[1] = tmpVec.clone();\n        this.drawLineAsCylinder(geometry, tipMaterial, kCrossWidth, this.overlayName);\n\n        // yellow tip\n        tmpVec.addVectors(point, normal.clone().multiplyScalar(kTipXLength * p1Scale));\n        geometry.vertices[0] = tmpVec.clone();\n        tmpVec.subVectors(point, normal.clone().multiplyScalar(kTipXLength * p1Scale));\n        geometry.vertices[1] = tmpVec.clone();\n        this.drawLineAsCylinder(geometry, this.rubberbandDefaultMaterial, kTipXWidth, this.overlayName);\n\n        tmpVec.addVectors(point, normal.clone().multiplyScalar(kTipXLength * p1Scale));\n        tmpVec.addVectors(tmpVec, direction.clone().multiplyScalar(kTipXLength * p1Scale));\n        geometry.vertices[0] = tmpVec.clone();\n        tmpVec.subVectors(point, normal.clone().multiplyScalar(kTipXLength * p1Scale));\n        tmpVec.subVectors(tmpVec, direction.clone().multiplyScalar(kTipXLength * p1Scale));\n        geometry.vertices[1] = tmpVec.clone();\n        this.drawLineAsCylinder(geometry, this.rubberbandDefaultMaterial, kTipXWidth, this.overlayName);\n    };\n\n    proto.renderDistanceMeasurement = function(p1, p2) {\n\n        this.viewer.impl.clearOverlay(this.overlayName);\n\n        if (!p1 || !p2)\n            return;\n\n        var geometry = new THREE.Geometry();\n        var lineDirection = new THREE.Vector3().subVectors(p2, p1).normalize();\n        var lineNormal = lineDirection.clone().cross(this.viewer.navigation.getEyeVector()).normalize();\n        var p1Scale = this.setScale(p1);\n        \n        var dashSize = kDashSize * p1Scale;\n        var gapSize = kGapSize * p1Scale;\n\n        // Main line\n        \n        var lineMaterial = ((Math.abs(p1.x - p2.x) <= 0.1 || Math.abs(p1.y - p2.y) <= 0.1 \n                            || this.snapper.getSnapResult().isPerpendicular) && !this.showMeasureResult) \n                            ? this.rubberbandSnappedMaterial : this.rubberbandDefaultMaterial;\n\n        if (this.showMeasureResult) {\n            // Single solid line.\n            geometry.vertices[0] = p1;\n            geometry.vertices[1] = p2;\n            this.drawLineAsCylinder(geometry, lineMaterial, kLineWidth, this.overlayName);\n        }\n        else {\n            this.drawDashedLine(p1, p2, dashSize, gapSize, lineMaterial, kLineWidth, this.overlayName); \n        }\n        \n        this.drawMeasurementLineTip(p1, lineDirection, lineNormal, false);\n        \n        if (this.showMeasureResult) {\n            this.drawMeasurementLineTip(p2, lineDirection, lineNormal, true);\n        }\n\n        this.p1 = p1;\n        this.p2 = p2;\n\n        this.renderCalibrationLabel();\n    };\n\n    proto.onCameraChange = function() {\n        if (this.measurement.isComplete()) {\n            this.renderDistanceMeasurement(this.p1, this.p2);\n        }   \n        this.updateLabelsPosition();         \n    };\n\n","\n\n    \"use strict\";\n\n    var av = Autodesk.Viewing,\n        ave = Autodesk.Viewing.Extensions,\n        avp = Autodesk.Viewing.Private,\n        avu = Autodesk.Viewing.UI,\n        MeasureCommon = Autodesk.Viewing.MeasureCommon;\n\n    // This strange code is there because we \n    // don't want DockingPanel, which is used as a base class later\n    // to be undefined during headless mode.\n    // Simply deriving from undefined will cause an exception (from babel env preset) \n    // even if the class is never instantiated\n    const DockingPanel = (avu && avu.DockingPanel) || class {};\n    // et ViewerPanelMixin to a no-op in headless mode\n    const ViewerPanelMixin = (ave && ave.ViewerPanelMixin) || function () {};\n\n    const _gWindow = av.getGlobal();\n    const _gDocument = _gWindow.document;\n\n    //\n    // /** @constructor */\n    //\n    //\n    export var CalibrationPanel = function(calibrationTool, viewer, id, title, options)\n    {\n        var self = this;\n\n        options = options || {};\n        options.addFooter = false;\n\n        DockingPanel.call(this, viewer.container, id, title, options);\n\n        this.viewer = viewer;\n        this.calibrationTool = calibrationTool;\n        this.parentContainer = viewer.container;\n        this.container.style.left = '0px';\n        this.container.style.top = '0px';\n        this.container.style.resize = 'none';\n\n        this.container.classList.add('calibration-panel');\n\n        this.setGlobalManager && this.setGlobalManager(viewer.globalManager);\n\n        this.addEventListener( this.closer, \"click\", function(e) {\n            self.setVisible(false);\n            self.calibrationTool.clearSize();\n            self.calibrationTool.showAddCalibrationLabel();\n        });\n\n        if (!options.heightAdjustment)\n            options.heightAdjustment = 40;\n        if (!options.marginTop)\n            options.marginTop = 0;\n        options.left = false;\n\n        this.createScrollContainer(options);\n\n        const _document = (this.getDocument && this.getDocument()) || _gDocument;\n\n        this.calibrationMenu = _document.createElement(\"div\");\n\n        this.scrollContainer.appendChild( this.calibrationMenu );\n\n        // Table\n        this.table = _document.createElement(\"table\");\n        this.table.className = \"adsk-lmv-tftable calibration-table\";\n        this.tbody = _document.createElement(\"tbody\");\n        this.table.appendChild(this.tbody);\n        this.calibrationMenu.appendChild(this.table);\n\n        // Define Size Row\n        this.row = this.tbody.insertRow(0);\n        this.requestedSizeTextbox = _document.createElement('input');\n        this.requestedSizeTextbox.className = 'docking-panel-textbox';\n        this.requestedSizeTextbox.type = 'text';\n        this.requestedSizeTextbox.autofocus= 'true';\n\n        this.addEventListener(this.requestedSizeTextbox, \"keyup\", function(e) {\n            var value = self.requestedSizeTextbox.value;\n            if (value !== \"\" && value.split(\".\")[0] === \"\") {\n                self.requestedSizeTextbox.value = \"0\" + value;\n            }\n            self.updateLabel();\n        });\n\n\n        this.addEventListener(this.requestedSizeTextbox, \"keypress\", function(e) {\n            var key = e.key || String.fromCharCode(e.keyCode);\n            // Handling backspace and arrows for firefox\n            if (key == \"Backspace\" || key == \"ArrowLeft\" || key == \"ArrowRight\"){\n                return;\n            }\n\n            // Escape (For IE11)\n            if (e.keyCode == av.KeyCode.ESCAPE) {\n                self.setVisible(false);\n                self.calibrationTool.clearSize();\n                self.calibrationTool.showAddCalibrationLabel();\n                return;\n            }\n\n            var requestedSize = self.requestedSizeTextbox.value;\n            var cursorIndex = self.requestedSizeTextbox.selectionStart;\n            requestedSize = [requestedSize.slice(0, cursorIndex), key, requestedSize.slice(cursorIndex)].join('');\n            \n            if (requestedSize == \".\") {\n                return;\n            }\n\n            var isSimple = self.units[self.unitList.selectedIndex].simpleInput;\n        \n            if (!isPositiveNumber(requestedSize) || (isSimple && (!isSimpleDecimal(requestedSize) || Autodesk.Viewing.Private.calculatePrecision(requestedSize) > self.calibrationTool.getMaxPrecision()))) {\n                    e.preventDefault();\n            }\n        });\n\n        var caption = \"Define Size\";\n        var cell = this.row.insertCell(0);\n        this.caption = _document.createElement(\"div\");\n        this.caption.setAttribute(\"data-i18n\", caption);\n        this.caption.textContent = av.i18n.translate(caption);\n        cell.appendChild(this.caption);\n\n        cell = this.row.insertCell(1);\n        cell.appendChild(this.requestedSizeTextbox);\n\n        // Unit Type Row\n        this.units = [\n            { name: 'Feet and fractional inches', units: 'ft-and-fractional-in', matches: ['ft-and-fractional-in', 'fractional-in'], simpleInput: false },\n            { name: 'Feet and decimal inches', units: 'ft-and-decimal-in', matches: ['ft', 'decimal-ft', 'in', 'decimal-in', 'ft-and-decimal-in'], simpleInput: false },\n            { name: 'Meters', units: 'm', matches: ['m', 'm-and-cm'], simpleInput: true },\n            { name: 'Centimeters', units: 'cm', matches: ['cm'], simpleInput: true },\n            { name: 'Millimeters', units: 'mm', matches: ['mm'], simpleInput: true }\n        ];\n\n        var unitNames = [];\n        for (var i = 0; i < this.units.length; ++i) {\n            unitNames.push(this.units[i].name);\n        }\n        this.unitList = new avp.OptionDropDown(\"Unit type\", this.tbody, unitNames, 0, null, { paddingLeft: 0, paddingRight: 15 });\n        this.unitList.setGlobalManager(this.globalManager);\n        this.addEventListener(this.unitList, \"change\", function(e) {\n            self.updateLabel();\n        });\n\n        // Set Calibration button\n        var setCalibration = _document.createElement('div');\n        setCalibration.classList.add('docking-panel-primary-button');\n        setCalibration.classList.add('calibration-button');\n\n        setCalibration.setAttribute(\"data-i18n\", \"Set Calibration\");\n        setCalibration.textContent = av.i18n.translate(\"Set Calibration\");\n\n        setCalibration.addEventListener('click', function () {\n            var index = self.unitList.selectedIndex;\n            var requestedUnits = self.units[index].units;\n            self.calibrationTool.calibrate(requestedUnits, self.requestedSizeTextbox.value);\n        }, false);\n\n        this.calibrationMenu.appendChild(setCalibration);\n        \n\n    }; // end constructor\n\n    var isPositiveNumber = function (n) {\n        // The first character of the string has to be a digit.\n        return n.match(/^(\\d+)/);\n    };\n\n    var isSimpleDecimal = function (n) {\n        // Add \"0\" to the end of the string, to check if there are trailing spaces.\n        n += '0';\n        return !isNaN(parseFloat(n)) && !isNaN(+n) && parseFloat(n) >= 0;\n    };\n\n    CalibrationPanel.prototype = Object.create(DockingPanel.prototype);\n    ViewerPanelMixin.call(CalibrationPanel.prototype);\n\n\n    CalibrationPanel.prototype.uninitialize = function uninitialize() {\n        this.viewer = null;\n        DockingPanel.prototype.uninitialize.call(this);\n    };\n\n    CalibrationPanel.prototype.findUnits = function findUnits() {\n        var i,\n            j,\n            selectedUnits = this.calibrationTool.getCurrentUnits();\n        for (i = 0; i < this.units.length; ++i) {\n            var matches = this.units[i].matches;\n            if (matches) {\n                for (j = 0; j < matches.length; ++j) {\n                    if (matches[j] === selectedUnits) {\n                        return i;\n                    }\n                }\n            }\n        }\n        return 0;\n    };\n\n    CalibrationPanel.prototype.setPanelValue = function(size) {\n        this.updateUnits();\n        this.requestedSizeTextbox.value = size;\n    };\n\n    CalibrationPanel.prototype.updateUnits = function() {\n        this.unitList.setSelectedIndex(this.findUnits());\n    }\n\n    CalibrationPanel.prototype.updateLabel = function() {\n        var index = this.unitList.selectedIndex;\n        var requestedUnits = this.units[index].units;\n        var size = this.requestedSizeTextbox.value;\n        var parsedNumber = Autodesk.Viewing.Private.UnitParser.parsePositiveNumber(size, requestedUnits);\n        var text = Autodesk.Viewing.Private.formatValueWithUnits(parsedNumber, requestedUnits, 3, Autodesk.Viewing.Private.calculatePrecision(size));\n\n        if (size === \"\") {\n            this.calibrationTool.updateLabelValue(null);\n        } else if (!isNaN(parsedNumber)) {\n            this.calibrationTool.updateLabelValue(text);\n        }\n    };\n\n    CalibrationPanel.prototype.updatePanelPosition = function (labelPosition, p1, p2, labelOffset) {\n\n        var width = parseInt(this.container.getBoundingClientRect().width);\n        var height = parseInt(this.container.getBoundingClientRect().height);\n\n        var cornerX;\n        var cornerY;\n\n        if (!labelPosition || !p1 || !p2) {\n            cornerX = Math.floor((this.viewer.canvas.clientWidth - width) / 2);\n            cornerY = Math.floor((this.viewer.canvas.clientHeight - height) / 2);\n        }\n        else {\n            p1 = MeasureCommon.project(p1, this.viewer);\n            p2 = MeasureCommon.project(p2, this.viewer);\n            var rubberbandDirection = new THREE.Vector2().copy(p1).sub(p2).normalize();\n\n            var normal;\n            if (p1.x < p2.x) {\n                normal = new THREE.Vector2(rubberbandDirection.y, -rubberbandDirection.x);\n            } else {\n                normal = new THREE.Vector2(-rubberbandDirection.y, rubberbandDirection.x);\n            }\n\n            var offset = labelOffset + Math.sqrt(Math.pow(width, 2) + Math.pow(height, 2)) / 2;\n\n            normal = normal.multiplyScalar(offset);\n            var pos =  labelPosition.sub(normal);\n\n            cornerX = pos.x - Math.floor(width / 2);\n            cornerY = pos.y - Math.floor(height / 2);\n\n            // if panel exceeds screen bounds, just put the panel in the center of the screen.\n            if ((cornerX < 0) || (cornerX + width > this.viewer.canvas.clientWidth) || (cornerY < 0) || (cornerY + height > this.viewer.canvas.clientHeight)) {\n                cornerX = Math.floor((this.viewer.canvas.clientWidth - width) / 2);\n                cornerY = Math.floor((this.viewer.canvas.clientHeight - height) / 2);\n            }\n        }\n\n        this.container.style.left = cornerX + 'px';\n        this.container.style.top  = cornerY + 'px';\n    };\n\n    //\n    // /** @constructor */\n    //\n    //\n    export var CalibrationRequiredDialog = function(measureExt, viewer, id, title, options)\n    {\n        var self = this;\n\n        options = options || {};\n        options.addFooter = false;\n\n        DockingPanel.call(this, viewer.container, id, title, options);\n\n        this.viewer = viewer;\n        this.measureExt = measureExt;\n        this.parentContainer = viewer.container;\n        this.container.classList.add('calibration-panel');\n        this.container.style.width = \"380px\";\n        this.container.style.height = \"190px\";\n        \n        this.setGlobalManager && this.setGlobalManager(viewer.globalManager);\n\n        if (!options.heightAdjustment)\n            options.heightAdjustment = 70;\n        if (!options.marginTop)\n            options.marginTop = 0;\n        options.left = false;\n\n        const _document = (this.getDocument && this.getDocument()) || _gDocument;\n\n        this.createScrollContainer(options);\n        this.dialogBox = _document.createElement(\"div\");\n        this.scrollContainer.appendChild( this.dialogBox );\n\n        // text\n        var calibrateNow = _document.createElement('div');\n        calibrateNow.className = 'calibration-text';\n        var text = \"Calibration Message\";\n        calibrateNow.setAttribute(\"data-i18n\", text);\n        calibrateNow.textContent = av.i18n.translate(text);\n        this.dialogBox.appendChild(calibrateNow);\n\n        var buttonsWrapper = _document.createElement('div');\n        buttonsWrapper.className = 'calibration-buttons-wrapper';\n        this.dialogBox.appendChild(buttonsWrapper);\n        \n        // Cancel button\n        var cancel = _document.createElement('div');\n        cancel.classList.add('docking-panel-secondary-button');\n        cancel.classList.add('calibration-button-left');\n        cancel.setAttribute(\"data-i18n\", \"Cancel\");\n        cancel.textContent = av.i18n.translate(\"Cancel\");\n        cancel.addEventListener('click', function () {\n            self.setVisible(false);\n        }, false);\n        buttonsWrapper.appendChild(cancel);\n\n        // Calibrate-Now button\n        var calibrateNowButton = _document.createElement('div');\n        calibrateNowButton.classList.add('docking-panel-primary-button');\n        calibrateNowButton.classList.add('calibration-button-right');\n        calibrateNowButton.setAttribute(\"data-i18n\", \"Calibrate Now\");\n        calibrateNowButton.textContent = av.i18n.translate(\"Calibrate Now\");\n        calibrateNowButton.addEventListener('click', function () {\n            self.measureExt.enableCalibrationTool(true);\n            self.setVisible(false);\n        }, false);\n        buttonsWrapper.appendChild(calibrateNowButton);\n        \n\n    }; // end constructor\n\n    CalibrationRequiredDialog.prototype = Object.create(DockingPanel.prototype);\n    ViewerPanelMixin.call(CalibrationRequiredDialog.prototype);\n\n\n    CalibrationRequiredDialog.prototype.uninitialize = function uninitialize() {\n        this.viewer = null;\n        DockingPanel.prototype.uninitialize.call(this);\n    };\n","import { CalibrationToolIndicator } from './CalibrationToolIndicator'\nimport { CalibrationPanel } from './CalibrationPanels'\n\nconst av = Autodesk.Viewing;\n\n//\n// /** @constructor */\n//\n//\nexport var CalibrationTool = function( viewer, options, sharedMeasureConfig, snapper)\n{   \n    var av = Autodesk.Viewing;\n    var avem = Autodesk.Viewing.Extensions.Measure;\n    var MeasureCommon = Autodesk.Viewing.MeasureCommon;\n\n    var _names  = [\"calibration\"];\n    var _priority = 50;\n    var _viewer  = viewer;\n    var _measurement = new MeasureCommon.Measurement(MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE);\n    var _options = options || {};\n\n    this.setGlobalManager(viewer.globalManager);\n\n    // Shared State with MeasureTool and Indicator\n    var _sharedMeasureConfig = sharedMeasureConfig;\n\n    var _maxPrecision = options.maxPrecision || 5;\n    var _isCalibrated = (sharedMeasureConfig.calibrationFactor != null); // True when the user set the calibration, or used a Previous calibration factor.\n    \n    var _snapper = snapper;\n\n    var _active = false;\n    var _isDragging = false;\n    var _isPressing = false;\n\n    var _distance = null; // The length of the current measurement.\n    var _calibrationTaken = false; // True when the user selected two valid points and set the calibration.\n    var _selectedSize = null;\n    var _selectedUnits = null;\n    var _selectedP1 = null;\n    var _selectedP2 = null;\n    var _waitingForInput = false; // True when the user selected two valid points.\n    var _picksBackup = [];\n    var _cursorPosition = null;\n\n    var _activePoint = 0;\n    \n    var _endpointMoved = false;\n\n    var _consumeSingleClick = false;\n    var _singleClickHandled = false;\n    var _downX = null;\n    var _downY = null;\n\n    // GUI.\n    var _calibrationPanel = null;\n    var _cursor = \"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAYCAYAAAD+vg1LAAAAAXNSR0IArs4c6QAAAwZJREFUSA2tVEtLW0EUvjGJefoqSY0x0WBSiY+oNWiUINkU6ioLaaAlG1eudNVFoT+grgopiCkEIbUK1o0lusmurRSEWmmKG6MNtNhNosWqyU2CZPpN8cr15nFD7YHDzHnON2fOGYZhmHkw4XEW+wD4xkT4lMvl6CE0+Y2ohh+dz+cZn89HVS/5+n/d/wVMkXq9Xor2v5SBgsmymQwZHx+vOqlKpXKDXWI3eU6Tg+kqSjSh3W4/s9lsvzUajaNcAK3xY7Dyci3nd6WXSCS60dHRvMfjSRcKBfWV4SYbrVarB8p0PB5nY7HYmdVq/aDX67WlckpKKcvpOjs7X09OTvoPDw8z2Wy2Bu+imJqa+npycnJXGHOt3YRGoSyVSvvMZrNkYWFBs7GxkaoBAXFJcDJhcCW5rq5ur62trQ/EOhyOBhDT2Nj4qVKMqA31ve1yub7Rfufo/PycDA4OxpuamhqECaouhVqtfuD3+1tqa2uZQCCQDoVCWTwknVQDDvIKE1clI1ja09Ozg0cjx8fHpL+/P+50OhMU8f7+Punt7f2I5NdqXRXi9fV1z9jYWCuIWV5eziSTyWAqlXq1urqaw6AwOMiCG4lOYtEturu732xubhK0FQHSvfr6+lsog4HWPIPvIBqNErRiqCiwkkKpVFowZd8xZSQYDLImk+kJ52+xWJ4tLS3hU8yTkZGRBD2Ms4mu6Nun4XA4f3p6SoaGhuJ0+rgg/Bsmt9udYFmWzM3NZdDT05ztWsE5JV0R1AqUCfTt0fb2tjESiRRmZmaOUOcI3w9DY5mdnb03PDzMoDQ/MZFRzM20lO/E38vl8vt46UdAq0WNJWixlEwmu8B1bXioOxwjpgXJ0hMTE1og1qysrDghf+HnKtoD7c7u7i5ZXFzMGY3GF7iFuRR3dHTMr62tXWxtbZH29vZ3RYmECozu54ODAzpdP2hphHZOVigUVjChvgMDA+85fdm1q6vrrU6n+4WR9Zd1ujQ0Nzc/NBgMScSExXwZ2j5oL5Wo46UD/ZvxUemo+AdW1zJzUYr16wAAAABJRU5ErkJggg==), auto\";\n    var _hasUI = Autodesk.Viewing.GuiViewer3D && viewer instanceof Autodesk.Viewing.GuiViewer3D;\n\n    var MeasureCommon = Autodesk.Viewing.MeasureCommon;\n\n    function getActivePick()\n    {\n        switch (_activePoint) {\n            case 0:\n                return null;\n            case 1:\n            case 2:\n                return _measurement.getPick(_activePoint);\n            case 3:\n                return _measurement.getPick(_measurement.countPicks());\n        }\n    }\n\n    function getPreviousPick()\n    {\n        switch (_activePoint) {\n            case 0:\n                return null;\n            case 1:\n                return _measurement.getPick(_measurement.countPicks());\n            case 2:\n            case 3:\n                return _measurement.getPick(1);\n        }\n    }\n\n    function hasPreviousPick()\n    {\n        switch (_activePoint) {\n            case 0:\n                return false;\n            case 1:\n                return _measurement.hasPick(_measurement.countPicks());\n            case 2:\n            case 3:\n                return _measurement.hasPick(1);\n        }\n    }\n\n    function noPicksSet() {\n        _activePoint = 0;\n    }\n\n    function allPicksSet() {\n        _activePoint = 3;\n        _measurement.indicator.changeAllEndpointsEditableStyle(true);\n    }\n\n    function isNoPicksSet() {\n        return _activePoint === 0;\n    }\n\n    function areAllPicksSet() {\n        return _activePoint === 3;   \n    }\n\n    this.register = function()\n    {\n        if (_hasUI && !_calibrationPanel) {\n            _calibrationPanel = new CalibrationPanel( this, _viewer, \"calibration-panel\", \"Calibration\", _options );\n            _viewer.addPanel(_calibrationPanel);\n        }\n\n        this.onCameraChangeBinded = this.onCameraChange.bind(this);\n        this.screenSizeChangedBinded = this.screenSizeChanged.bind(this);\n    };\n\n    this.deregister = function()\n    {   \n        this.deactivate();\n        \n        if (_calibrationPanel) {\n            _viewer.removePanel( _calibrationPanel );\n            _calibrationPanel.uninitialize();\n            _calibrationPanel = null;\n        }\n    };\n\n    this.isActive = function()\n    {\n        return _active;\n    };\n\n    this.getNames = function()\n    {\n        return _names;\n    };\n\n    this.getName = function()\n    {\n        return _names[0];\n    };\n\n    this.getPriority = function()\n    {\n        return _priority;\n    };\n\n    this.getCursor = function() {\n        return _isDragging ? null : _cursor;\n    };\n\n    this.activate = function()\n    {\n        _active = true;\n        _isDragging = false;\n        this.isEditingEndpoint = false;\n        this.editByDrag = false;\n        noPicksSet();\n\n        _viewer.toolController.activateTool(_snapper.getName());\n        _viewer.toolController.activateTool(\"magnifyingGlass\");\n\n\n        if (!_measurement.indicator) {\n            _measurement.attachIndicator(_viewer, this, CalibrationToolIndicator);\n        }\n\n        _measurement.indicator.clear();\n\n        if (_calibrationTaken && _selectedP1 && _selectedP2) {\n            _measurement.setPick(1, _selectedP1.clone());\n            _measurement.setPick(2, _selectedP2.clone());\n\n            allPicksSet();\n\n            var parsedRequestedSize = Autodesk.Viewing.Private.UnitParser.parsePositiveNumber(_selectedSize, _selectedUnits);\n            _measurement.indicator.updateLabelValue(Autodesk.Viewing.Private.formatValueWithUnits(parsedRequestedSize, _selectedUnits, 3, _sharedMeasureConfig.precision));\n            _distance = _measurement.distanceXYZ;\n            _measurement.indicator.changeLabelClickableMode(false);\n            _waitingForInput = true;\n            var valid = this.render();\n            _measurement.indicator.changeAllEndpointsEditableStyle(true);\n\n            if (valid) {\n                if (_calibrationPanel) {\n                    _calibrationPanel.setPanelValue(_selectedSize);\n                }\n                \n                this.showPanel();\n            }\n        }\n\n        _viewer.addEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT, this.onCameraChangeBinded);\n        _viewer.addEventListener(Autodesk.Viewing.VIEWER_RESIZE_EVENT, this.screenSizeChangedBinded);\n    };\n\n    this.deactivate = function()\n    {   \n        if (!_active)\n            return;\n\n        _active = false;\n\n        this.hidePanel();\n        this.updateViewportId(true);\n        _waitingForInput = false;\n        _measurement.clearAllPicks();\n\n        if(_snapper && _snapper.isActive()) {\n            _viewer.toolController.deactivateTool(_snapper.getName());\n        }\n\n        _viewer.toolController.deactivateTool(\"magnifyingGlass\");\n\n        if (_measurement.indicator) {\n            _measurement.indicator.clear();\n            _measurement.indicator.destroy();\n            _measurement.indicator = null;\n        }\n\n        _viewer.removeEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT, this.onCameraChangeBinded);\n        _viewer.removeEventListener(Autodesk.Viewing.VIEWER_RESIZE_EVENT, this.screenSizeChangedBinded);\n    };\n\n    this.getActivePointIndex = function() {\n        return _activePoint;\n    };\n\n    this.setCalibrationFactor = function ( calibrationFactor ) {\n        _sharedMeasureConfig.calibrationFactor = calibrationFactor;\n    };\n\n    this.getCalibrationFactor = function () {\n        return _sharedMeasureConfig.calibrationFactor;\n    };\n\n    this.updateLabelValue = function (value) {\n        _measurement.indicator.updateLabelValue(value);\n    };\n\n    this.isCalibrationValid = function(requestedUnits, requestedSize) { \n        var parsedRequestedSize = Autodesk.Viewing.Private.UnitParser.parsePositiveNumber(requestedSize, requestedUnits); \n        return !isNaN(parsedRequestedSize); \n    };\n\n    this.calibrate = function(requestedUnits, requestedSize)\n    {\n\n        var calibrationFactor = null;\n        \n        var parsedRequestedSize = Autodesk.Viewing.Private.UnitParser.parsePositiveNumber(requestedSize, requestedUnits);\n\n        if (!isNaN(parsedRequestedSize)) {\n            var currentSize = Autodesk.Viewing.Private.convertUnits(_viewer.model.getUnitString(), requestedUnits, 1, _distance);\n            if (currentSize !== 0 && !isNaN(currentSize)) {\n                calibrationFactor = parsedRequestedSize / currentSize;\n                _sharedMeasureConfig.calibrationFactor = calibrationFactor;\n                _sharedMeasureConfig.units = requestedUnits;\n                var defualtPrecision = _viewer.model.is2d() ? 3 : 1;\n                var requestedPrecision = Autodesk.Viewing.Private.calculatePrecision(requestedSize);\n                _sharedMeasureConfig.precision = Math.max((_sharedMeasureConfig.precision ? _sharedMeasureConfig.precision : defualtPrecision), requestedPrecision);\n                _selectedSize = requestedSize;\n                _selectedUnits = requestedUnits;\n                _isCalibrated = true;\n                _calibrationTaken = true;\n                _selectedP1 = _measurement.getPick(1).clone();\n                _selectedP2 = _measurement.getPick(2).clone();\n            }\n        }\n        \n        if (calibrationFactor) {\n            _viewer.getExtension('Autodesk.Measure').enableCalibrationTool(false);\n            _viewer.dispatchEvent({ type: MeasureCommon.Events.FINISHED_CALIBRATION , units: requestedUnits , scaleFactor: calibrationFactor, size: requestedSize});\n        }\n    };\n\n    this.calibrateByScale = function(requestedUnits, requestedScale) {\n        _sharedMeasureConfig.calibrationFactor = requestedScale;\n        \n        if (_sharedMeasureConfig.units !== requestedUnits ) {\n            _sharedMeasureConfig.units = requestedUnits;\n            _selectedUnits = requestedUnits;\n        }\n\n        _isCalibrated = true;\n    };\n\n    this.getCurrentUnits = function () {\n        return _sharedMeasureConfig.units;\n    };\n\n    this.hidePanel = function() {\n        if (_calibrationPanel) {\n            _calibrationPanel.setVisible(false);\n        }\n        else {\n            _viewer.dispatchEvent({ type: MeasureCommon.Events.CLOSE_CALIBRATION_PANEL_EVENT });\n        }\n    };\n\n    this.showPanel = function() {\n\n        var self = this;\n        const _window = this.getWindow();\n\n        if (_calibrationPanel) {\n            _window.setTimeout(function () { _calibrationPanel.requestedSizeTextbox.focus();}, 0);\n            _calibrationPanel.setVisible(true);\n            _calibrationPanel.updatePanelPosition(_measurement.indicator.labelPosition, _measurement.indicator.p1, _measurement.indicator.p2, _measurement.indicator.calibrationLabel.clientHeight);\n            _calibrationPanel.updateUnits();\n            self.addWindowEventListener(\"keyup\", function onKeyUp(e){\n                var key = e.key || String.fromCharCode(e.keyCode);\n                if (key == \"Escape\" && self.isActive()) {\n                    self.hidePanel();\n                    self.clearSize();\n                    self.showAddCalibrationLabel();\n                    \n                    self.removeWindowEventListener(\"keyup\", onKeyUp);\n                }\n            });\n        }\n        else {\n            _viewer.dispatchEvent({ type: MeasureCommon.Events.OPEN_CALIBRATION_PANEL_EVENT, data: {size: _selectedSize, units: _selectedUnits } });\n        }\n    };\n\n    this.updateCalibrationPanel = function() {\n        _calibrationPanel && _calibrationPanel.updateUnits();\n    }\n\n    this.showAddCalibrationLabel = function() {\n        _measurement.indicator.showAddCalibrationLabel();\n    };\n\n    this.isCalibrated = function() {\n        return _isCalibrated;\n    };\n\n    this.clearSize = function () {\n        _measurement.indicator.updateLabelValue(null);\n\n        if (_calibrationPanel) {\n            _calibrationPanel.requestedSizeTextbox.value = \"\";   \n        }\n        else {\n            _viewer.dispatchEvent({ type: MeasureCommon.Events.CLEAR_CALIBRATION_SIZE_EVENT });\n        }\n    };\n\n    this.getMaxPrecision = function() {\n        return _maxPrecision;\n    };\n    \n    this.clearMeasurement = function() {\n\n        noPicksSet();\n\n        this.clearPick(1);\n        this.clearPick(2);\n\n        _measurement.indicator.clear();\n        \n        this.updateViewportId(true);\n        this.hidePanel();\n\n        _waitingForInput = false;\n    };\n\n    this.clearPick = function(pickNumber) {\n        if (_measurement.hasPick(pickNumber)) {\n            _measurement.clearPick(pickNumber);\n            _measurement.indicator.hideClick(pickNumber);\n        }\n    };\n\n    this.repickEndpoint = function(pickNumber) {\n        this.clearPick(pickNumber);\n        this.editEndpoint(null, pickNumber);\n    };\n\n    this.getSnapper = function() {\n        return _snapper;\n    };\n\n    this._handleMouseEvent = function (event) {\n\n        var valid = false;\n\n        if (_snapper.isSnapped()) {\n\n            // User picked a new point after two points where already set (or none) - Start a new measurement.\n            if (areAllPicksSet() || isNoPicksSet()) {\n                this.clearMeasurement();\n                _activePoint = 1;\n            }\n            \n            _snapper.copyResults(getActivePick());\n\n            valid = true;\n\n        } \n        else { \n            // In order to draw rubber-band, set the cursor position, so the indicator will use it as active point.\n            if (event && _viewer.model.is2d()) {\n                var viewport = _viewer.container.getBoundingClientRect();\n                var x = event.canvasX || event.clientX - viewport.left;\n                var y = event.canvasY || event.clientY - viewport.top;\n\n                if (x && y) {\n                    _cursorPosition = MeasureCommon.inverseProject({ x:x, y:y }, _viewer);\n                }\n            }\n\n            // In case a measurement is set, and the user clicks on a blank spot - don't do nothing.\n            if (_consumeSingleClick && _measurement && !this.isEditingEndpoint) {\n                if (_activePoint === _measurement.getMaxNumberOfPicks() + 1) {\n                    return true;\n                }\n            }\n\n            var lastPick = getActivePick();\n            if (lastPick) {\n                lastPick.clear();\n            }\n        }\n\n        this.correctPickPosition();\n\n        if (_consumeSingleClick) {\n            this._doConsumeSingleClick(valid);\n        }\n        \n        if (!isNoPicksSet()) {\n            var renderSucceeded = this.render();\n\n            // If it's the first pick, we don't expect the render of the rubberband to be succeeded.\n            // So enter here only if it's not the first pick.\n            if (_measurement.hasPick(2)) {\n                valid &= renderSucceeded;\n            }\n        }\n\n        if (_consumeSingleClick) {\n            if (_measurement.isComplete() && valid) {\n                _distance = _measurement.distanceXYZ;\n                this.clearSize();\n                this.showPanel();\n                _waitingForInput = true;\n            }\n            else {\n                this.hidePanel();\n                _measurement.indicator.updateLabelValue(null);\n                _waitingForInput = false;\n            }\n        }\n\n        // If valid is false, the last pick is not revelant, and will clear it in case of a click.\n        return valid;\n    };\n\n    this.updateViewportId = function(clear) {\n        if (_viewer.model && _viewer.model.is2d()) {\n            if (clear || isNoPicksSet()) {\n                viewer.impl.updateViewportId(0);\n                _snapper.setViewportId(null);\n            }\n            else if (!_isPressing) {\n                var viewport = getPreviousPick().viewportIndex2d || getActivePick().viewportIndex2d;\n                \n                // Pass viewport Id to LineShader to make all other geometries with different viewport transparent\n                viewer.impl.updateViewportId(viewport);\n                if (_snapper)\n                    _snapper.setViewportId(viewport);  \n            \n            }\n        }\n    };\n\n    this._doConsumeSingleClick = function(valid) {\n\n        this.updateViewportId(_measurement.isComplete());\n\n        _measurement.indicator.clear();\n    };\n\n\n    this.handleButtonDown = function (event, button) {\n        if (av.isMobileDevice()) \n            return false;\n\n        _isDragging = true;\n        if (button === 0 && !event.ctrlKey && !event.metaKey && !event.shiftKey && !event.altKey) {\n            _consumeSingleClick = true;\n            _downX = event.canvasX;\n            _downY = event.canvasY;\n        }\n        return false;\n    };\n\n    this.handleMouseMove = function (event) {\n        if (av.isMobileDevice())\n            return false;\n\n        if (event.canvasX !== _downX || event.canvasY !== _downY) {\n            _consumeSingleClick = false;    \n        }\n\n        _endpointMoved = this.isEditingEndpoint;    \n\n        if (!isNoPicksSet() && !areAllPicksSet()) {\n            this.clearPick(_activePoint);\n            this._handleMouseEvent(event);\n        }\n\n        _snapper.indicator.render();\n        \n        return false;\n    };\n\n    this.restoreMouseListeners = function () {\n\n        // When a press event has happend, the default behavior of firefly.js is to disable other mouse events,\n        // So they won't be triggered as well.\n        // The solution is to enable them after the end of the pressing.\n\n        _viewer.toolController.getTool(\"gestures\").controller.enableMouseButtons(true);\n    };\n\n    this.handlePressHold = function (event) {\n        _consumeSingleClick = false;\n\n        if (av.isTouchDevice()) {\n            switch( event.type )\n            {\n                case \"press\":\n                    _isPressing = true;\n                    if (areAllPicksSet()) {\n                        this.clearMeasurement();\n                    } else {\n                        this.clearPick(_activePoint);\n                    }\n                    this._handleMouseEvent(event);\n                    _snapper.indicator.render();\n\n                    return true;\n\n                case \"pressup\":\n                    _consumeSingleClick = true;\n                    this.restoreMouseListeners();\n                    _singleClickHandled = !_singleClickHandled;\n                    this.handleSingleClick(event);\n                    _isPressing = false;\n                    return true;\n            }\n        }\n        return false;\n\n    };\n\n    this.correctPickPosition = function() {\n        \n        var active = getActivePick();\n            \n        if (active && !active.getGeometry() && _cursorPosition) {\n            active.geomType = MeasureCommon.SnapType.SNAP_VERTEX;\n            active.geomVertex = _cursorPosition;\n            active.intersectPoint = _cursorPosition;\n        }\n\n        if (hasPreviousPick()) {\n            var passive = getPreviousPick();\n            MeasureCommon.correctPerpendicularPicks(passive, active, viewer, _snapper);\n        }\n    };\n\n    this.render = function() {\n\n        var hasResult = _measurement.computeResult(_measurement.picks, _viewer, _snapper);\n        _measurement.indicator.render(_measurement.picks, _consumeSingleClick || _waitingForInput);\n\n        return hasResult;\n    };\n\n    this.editEndpoint = function(event, endpointNumber) {\n        if (_activePoint === endpointNumber) {\n            _measurement.indicator.changeEndpointOnEditStyle(endpointNumber, false);\n            this.undoEditEndpoint();\n            return;\n        }\n\n        _activePoint = endpointNumber;\n        this.isEditingEndpoint = true;\n\n        _measurement.indicator.changeEndpointOnEditStyle(endpointNumber, true);\n        _measurement.indicator.changeAllEndpointsEditableStyle(false);\n\n        for (var key in _measurement.picks) {\n            if (_measurement.picks.hasOwnProperty(key)) {\n                _picksBackup[key] = _measurement.getPick(key).clone();\n            }\n        }\n\n        this.updateViewportId();\n\n        this.hidePanel();\n        _measurement.indicator.updateLabelValue(null);\n        _waitingForInput = false;\n\n        if(!av.isMobileDevice()) {\n            this._handleMouseEvent(event);\n        }\n    };\n\n    this.undoEditEndpoint = function() {\n        _measurement.indicator.clear();\n\n        for (var key in _measurement.picks) {\n            if (_measurement.picks.hasOwnProperty(key)) {\n                _measurement.setPick(key, _picksBackup[key].clone());\n            }\n        }\n        \n        this.updateViewportId(true);\n        this.isEditingEndpoint = false;\n        _waitingForInput = true;\n\n        allPicksSet();\n        var valid = this.render();\n        \n        if (valid) {\n            this.showPanel();\n        }\n    };\n\n    this.handleGesture = function(event)\n    {   \n        if (av.isTouchDevice()){\n            \n            _consumeSingleClick = false;\n        \n            if (_isPressing) {\n                \n                this.clearPick(_activePoint);\n\n                switch( event.type )\n                {\n                    case \"dragstart\":\n                        this._handleMouseEvent(event);\n                        _snapper.indicator.render();\n\n                        return true;\n\n                    case \"dragmove\":\n                        this._handleMouseEvent(event);\n                        _snapper.indicator.render();\n\n                        return true;\n\n                    case \"dragend\":\n                        _isPressing = false;\n                        _consumeSingleClick = true;\n\n                        if (!this.editByDrag) {\n                            _singleClickHandled = !_singleClickHandled;\n                            this.handleSingleClick(event);    \n                        }\n\n                        this.editByDrag = false;\n                        this.restoreMouseListeners();\n                        return true;\n\n                    case \"pinchend\":\n                        _consumeSingleClick = true;\n                        _singleClickHandled = !_singleClickHandled;\n                        this.handleSingleClick(event);\n                        this.restoreMouseListeners();\n                        return true;\n                }\n            }\n        }\n\n        return false;\n    };\n\n    this.handleButtonUp = function (event) {\n        _isDragging = false;\n        _downX = null;\n        _downY = null;\n        \n        if (_endpointMoved) {\n            _consumeSingleClick = true;\n            _singleClickHandled = !_singleClickHandled;\n            this.handleSingleClick(event);\n            _endpointMoved = false;\n        }\n\n        return false;\n    };\n\n    this.handleSingleClick = function (event) {\n        if (_consumeSingleClick) {\n            \n            _snapper.indicator.clearOverlays();\n\n            _measurement.indicator.changeEndpointOnEditStyle(_activePoint, false);\n\n            if (this._handleMouseEvent(event)) {\n                _measurement.indicator.showEndpoints();\n                _measurement.indicator.updateLabelsPosition();\n                _activePoint++;\n            }\n            else {\n                if (this.isEditingEndpoint) {\n                    this.undoEditEndpoint();\n                }\n                else {\n                    this.clearMeasurement();\n                }\n            }\n\n            if (_measurement.isComplete()) {\n                allPicksSet();\n            }\n\n            _consumeSingleClick = false;\n            _singleClickHandled = !_singleClickHandled;\n            this.isEditingEndpoint = false;\n\n            _snapper.clearSnapped();\n        }\n        return true;\n    };\n\n    this.handleDoubleClick = function() {\n        return true;\n    };\n\n    this.handleSingleTap = function (event) {\n        if (!_singleClickHandled) {\n            _consumeSingleClick = true;\n            _snapper.onMouseDown({x: event.canvasX, y:event.canvasY});\n            this.handleSingleClick(event);\n        }\n        _singleClickHandled = !_singleClickHandled;\n\n        return true;\n    };\n\n    this.handleDoubleTap = function() {\n        return true;\n    };\n\n    this.handleResize = function() {\n        if (_measurement.indicator) {\n            _measurement.indicator.handleResize();\n        }\n    };\n\n    this.onCameraChange = function() {\n        if (_snapper.indicator) {\n            _snapper.indicator.onCameraChange();\n        }\n    };\n\n    this.screenSizeChanged = function(event) {\n        this.onCameraChange();\n    };\n};\n\nav.GlobalManagerMixin.call(CalibrationTool.prototype);","\nconst av = Autodesk.Viewing;\n\nexport var MagnifyingGlass = function(viewer) {\n\n    var _viewer = viewer;\n    var _active = false;\n    var _names = [\"magnifyingGlass\"];\n    var _priority = 70;\n    var _isPressing = false;\n    var _radius = 60;\n    var _zoom = 2;\n    var _offset = 15;\n    var _magnifyingGlassCanvas = null;\n    var _imageData = null;\n    var _imageBuffer = null;\n    var _clientX = null;\n    var _clientY = null;\n    var _needsClear = false;\n    var av = Autodesk.Viewing;\n    \n    this.setGlobalManager(viewer.globalManager);\n\n    this.register = function() {\n        this.updateMagnifyingGlassBinded = this.updateMagnifyingGlass.bind(this);\n    };\n\n    this.isActive = function() {\n        return _active;\n    };\n\n    this.activate = function() {\n        _active = true;\n    };\n\n    this.updateMagnifyingGlass = function() {\n        const _window = this.getWindow();\n        const _document = this.getDocument();\n        if (_needsClear) {\n            _magnifyingGlassCanvas && _magnifyingGlassCanvas.classList.remove('visible');\n            _needsClear = false;\n        }\n        else {\n            var pixelRatio = _window.devicePixelRatio;\n            var diameter = 2 * _radius;\n            var normlizedDiameter = diameter * pixelRatio;\n            var x = pixelRatio * (_clientX - (_radius  / _zoom));\n            var y = pixelRatio * (_clientY - (_radius  / _zoom));\n            \n            if (!_magnifyingGlassCanvas) {\n                _magnifyingGlassCanvas = _document.createElement(\"canvas\");\n                _magnifyingGlassCanvas.className = 'magnifying-glass';\n                _magnifyingGlassCanvas.width = normlizedDiameter;\n                _magnifyingGlassCanvas.height = normlizedDiameter;\n                _magnifyingGlassCanvas.style.width = diameter + 'px';\n                _magnifyingGlassCanvas.style.height = diameter + 'px';\n\n                // Swap canvas\n                _magnifyingGlassCanvas.getContext(\"2d\").translate(0, normlizedDiameter);\n                _magnifyingGlassCanvas.getContext(\"2d\").scale(1,-1);\n\n                _viewer.container.appendChild(_magnifyingGlassCanvas);\n                _imageData = _magnifyingGlassCanvas.getContext(\"2d\").createImageData(Math.ceil(normlizedDiameter / _zoom), Math.ceil(normlizedDiameter / _zoom));\n                _imageBuffer = new Uint8Array(_imageData.data.buffer);\n            }\n\n            var ctx = _magnifyingGlassCanvas.getContext(\"2d\");\n\n            // Read the pixels from the frame buffer\n            var gl = _viewer.impl.glrenderer().getContext();\n            gl.readPixels(x, _viewer.canvas.height - y - _imageData.height, _imageData.width, _imageData.height, gl.RGBA, gl.UNSIGNED_BYTE, _imageBuffer);\n            // Put the pixel into the magnifying context.\n            ctx.putImageData(_imageData, 0, 0);\n            // Scale the image\n            ctx.drawImage(_magnifyingGlassCanvas, 0, 0, _imageData.width, _imageData.height, 0, 0, normlizedDiameter, normlizedDiameter);\n            this.setGlassPosition(_magnifyingGlassCanvas, _clientX, _clientY, diameter, _offset); \n\n            _magnifyingGlassCanvas.classList.toggle('visible', true);\n        }\n    };\n\n    this.deactivate = function() {\n        this.clearMagnifyingGlass();\n        _active = false;\n    };\n\n    this.getNames = function() {\n\n        return _names;\n    };\n\n    this.getName = function() {\n\n        return _names[0];\n    };\n\n    this.getPriority = function() {\n        return _priority;\n    };\n\n    this.setGlassPosition = function(canvas, x, y, diameter, offset) {\n            \n        // check the left border of canvas\n        canvas.style.left = (x - diameter/2) + 'px';\n\n        // check the top border of canvas\n        if (y - diameter - offset > 0) {\n            canvas.style.top  = (y - diameter - offset) + 'px';    \n        }\n        else {\n            canvas.style.top = (y + offset) + 'px';    \n        }\n    };\n\n    this.requestUpdate = function() {\n        if(!_viewer.hasEventListener(Autodesk.Viewing.RENDER_PRESENTED_EVENT, this.updateMagnifyingGlassBinded)) {\n           _viewer.addEventListener(Autodesk.Viewing.RENDER_PRESENTED_EVENT, this.updateMagnifyingGlassBinded, { once: true });\n        }\n    };\n\n    this.drawMagnifyingGlass = function(clientX, clientY) {\n        _needsClear = false;\n        _clientX = clientX;\n        _clientY = clientY;\n        _viewer.impl.invalidate(false, false, true);\n        this.requestUpdate();\n    };\n\n    this.clearMagnifyingGlass = function () {\n        _needsClear = true;\n        this.requestUpdate();\n    };\n\n    this.handlePressHold = function (event) {\n\n        if (av.isTouchDevice()) {\n            switch( event.type )\n            {\n                case \"press\":\n                    _isPressing = true;\n                    this.drawMagnifyingGlass(event.canvasX, event.canvasY);\n                    break;\n\n                case \"pressup\":\n                    this.clearMagnifyingGlass();\n                    _isPressing = false;\n                    break;\n            }\n        }\n        return false;\n\n    };\n\n    this.handleGesture = function(event) {\n\n        if (_isPressing && av.isTouchDevice()) {\n            switch( event.type )\n            {\n                case \"dragstart\":\n                    this.drawMagnifyingGlass(event.canvasX, event.canvasY);\n                    break;\n\n                case \"dragmove\":\n                    this.drawMagnifyingGlass(event.canvasX, event.canvasY);\n                    break;\n\n                case \"dragend\":\n                    this.clearMagnifyingGlass();\n                    _isPressing = false;\n                    break;\n\n                case \"pinchstart\":\n                    this.drawMagnifyingGlass(event.canvasX, event.canvasY);\n                    break;\n\n                case \"pinchmove\":\n                    this.drawMagnifyingGlass(event.canvasX, event.canvasY);\n                    break;\n\n                case \"pinchend\":\n                    this.clearMagnifyingGlass();\n                    break;\n            }\n        }\n\n        return false;\n    };\n\n    this.handleMouseMove = function (event) {\n        return false;\n    };\n\n    this.handleWheelInput = function (delta) {\n        return false;\n    };\n\n    this.handleButtonUp = function (event, button) {\n        return false;\n    };\n\n};\n\nav.GlobalManagerMixin.call(MagnifyingGlass.prototype);\n","\n    var av = Autodesk.Viewing;\n    var avu = Autodesk.Viewing.UI;\n    var avp = Autodesk.Viewing.Private;\n    var MeasureCommon = Autodesk.Viewing.MeasureCommon;\n\n    // /** @constructor */\n    export function MeasureToolbar(measureExtension)\n    {\n        this.measureExtension = measureExtension;\n        this.measureTool = this.measureExtension.measureTool;\n        this.viewer = this.measureExtension.viewer;\n        this.setGlobalManager(this.viewer.globalManager);\n        this.visible = false;\n        this.buttonsList = [];\n    }\n\n    var proto = MeasureToolbar.prototype;\n    av.GlobalManagerMixin.call(MeasureToolbar.prototype);\n\n    proto.init = function() {\n        var self = this;\n\n        const _document = this.getDocument();\n\n        // Add Measure tool toolbar to main toolbar\n        var toolbar = this.viewer.getToolbar();\n        var navigationBar = toolbar.getControl(Autodesk.Viewing.TOOLBAR.NAVTOOLSID);\n        var toolbarOptions = {};\n        toolbarOptions.index = toolbar.indexOf(navigationBar) + 1;\n        this.measureToolbar = new avu.ControlGroup(Autodesk.Viewing.TOOLBAR.MEASURETOOLSID);\n        this.measureToolbar.setGlobalManager(this.globalManager);\n        toolbar.addControl(this.measureToolbar, toolbarOptions);\n    \n\n        // Create a button for the measure simple distance.\n        this.measureSimpleDistanceBtn = new avu.Button(\"toolbar-measureTool-simple-distance\");\n        this.measureSimpleDistanceBtn.setGlobalManager(this.globalManager);\n        this.measureSimpleDistanceBtn.setToolTip(\"Distance\");\n        this.measureSimpleDistanceBtn.setIcon(\"adsk-icon-measure-distance-new\");\n        this.measureSimpleDistanceBtn.onClick = function() {\n            var enable = self.measureSimpleDistanceBtn.getState() !== avu.Button.State.ACTIVE;\n            if (enable) {\n                self.measureExtension.activate('distance');\n            } else {\n                self.measureTool.deselectAllMeasurements();\n            }\n        };\n\n        this.measureToolbar.addControl(this.measureSimpleDistanceBtn);\n        this.buttonsList[MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE] = this.measureSimpleDistanceBtn;\n\n\n        // Create a button for the measure Angle.\n        this.measureAngleBtn = new avu.Button(\"toolbar-measureTool-angle\");\n        this.measureAngleBtn.setGlobalManager(this.globalManager);\n        this.measureAngleBtn.setToolTip(\"Angle\");\n        this.measureAngleBtn.setIcon(\"adsk-icon-measure-angle-new\");\n        this.measureAngleBtn.onClick = function () {\n            var enable = self.measureAngleBtn.getState() !== avu.Button.State.ACTIVE;\n            if (enable) {\n                self.measureExtension.activate('angle');\n            } else {\n                self.measureTool.deselectAllMeasurements();\n            }\n        };\n        this.measureToolbar.addControl(this.measureAngleBtn);\n        this.buttonsList[MeasureCommon.MeasurementTypes.MEASUREMENT_ANGLE] = this.measureAngleBtn;\n\n        if (this.viewer.model && this.viewer.model.is2d()) {\n            // Create a button for the measure distance.\n            this.measureAreaBtn = new avu.Button(\"toolbar-measureTool-area\");\n            this.measureAreaBtn.setGlobalManager(this.globalManager);\n            this.measureAreaBtn.setToolTip(\"Area\");\n            this.measureAreaBtn.setIcon(\"adsk-icon-measure-area-new\");\n            this.measureAreaBtn.onClick = function() {\n                var enable = self.measureAreaBtn.getState() !== avu.Button.State.ACTIVE;\n                if (enable) {\n                    self.measureExtension.activate('area');\n                } else {\n                    self.measureTool.deselectAllMeasurements();\n                }\n            };\n\n            this.measureToolbar.addControl(this.measureAreaBtn);\n            this.buttonsList[MeasureCommon.MeasurementTypes.MEASUREMENT_AREA] = this.measureAreaBtn;\n        }\n\n        // Create a button for the Calibration tool.\n        this.calibrationToolBtn = new avu.Button( \"toolbar-calibrationTool\");\n        this.calibrationToolBtn.setGlobalManager(this.globalManager);\n        this.calibrationToolBtn.setToolTip(\"Calibrate\");\n        this.calibrationToolBtn.setIcon(\"adsk-icon-measure-calibration\");\n        this.calibrationToolBtn.onClick = function(e) {\n            var enable = self.calibrationToolBtn.getState() !== avu.Button.State.ACTIVE;\n            if(enable) {\n                self.measureExtension.activate('calibrate');\n            } else  {\n                self.measureExtension.enableCalibrationTool(false);\n            }\n        };\n\n        this.measureToolbar.addControl(this.calibrationToolBtn);\n        this.buttonsList[MeasureCommon.MeasurementTypes.CALIBRATION] = this.calibrationToolBtn;\n\n        var separator = _document.createElement('div');\n        separator.className = 'measure-toolbar-seperator';\n\n        this.measureToolbar.container.appendChild(separator);\n        \n\n        // Create a button for the Trash.\n        this.deleteBtn = new avu.Button( \"toolbar-delete\");\n        this.deleteBtn.setGlobalManager(this.globalManager);\n        this.deleteBtn.setToolTip(\"Delete measurement\");\n        this.deleteBtn.setIcon(\"adsk-icon-measure-trash\");\n        this.deleteBtn.onClick = function() {\n            self.measureExtension.deleteCurrentMeasurement();\n        };\n\n        this.measureToolbar.addControl(this.deleteBtn);\n\n        // Create a button for the Settings panel.\n        this.settingsBtn = new avu.Button( \"toolbar-settings\");\n        this.settingsBtn.setGlobalManager(this.globalManager);\n        this.settingsBtn.setToolTip(\"Measure settings\");\n        this.settingsBtn.setIcon(\"adsk-icon-measure-settings\");\n\n        this.settingsControlPanel = _document.createElement('div');\n        this.settingsControlPanel.classList.add('docking-panel');\n        this.settingsControlPanel.classList.add('docking-panel-container-solid-color-b');\n        this.settingsControlPanel.classList.add('measure-settings-popup');\n        this.settingsControlPanel.classList.add('hide');\n\n        this.settingsBtn.onClick = function (event) {\n            if (this.settingsControlPanel.classList.contains('hide')) {\n                this.settingsControlPanel.classList.remove('hide');\n                this.setButtonActive(this.settingsBtn);\n            }\n            else {\n                this.settingsControlPanel.classList.add('hide');\n                this.setButtonInactive(this.settingsBtn);\n            }\n        }.bind(this);\n\n        this.measureToolbar.container.appendChild(this.settingsControlPanel);\n        this.settingsControlPanel.root = this.settingsBtn;\n        this.measureToolbar.addControl(this.settingsBtn);\n\n\n        // Settings Panel\n        this.table = _document.createElement(\"table\");\n        this.table.classList.add(\"adsk-lmv-tftable\");\n        this.table.classList.add(\"calibration-table\");\n\n        this.tbody = _document.createElement(\"tbody\");\n        this.table.appendChild(this.tbody);\n        this.settingsControlPanel.appendChild(this.table);\n\n        this.units = [\n            { name: 'Unknown', units: '', matches: [''] },                                      // localized in OptionDropDown() call below\n            { name: 'Decimal feet', units: 'decimal-ft', matches: ['ft', 'decimal-ft'] },             // localized in OptionDropDown() call below\n            { name: 'Feet and fractional inches', units: 'ft-and-fractional-in', matches: ['ft-and-fractional-in'] },         // localized in OptionDropDown() call below\n            { name: 'Feet and decimal inches', units: 'ft-and-decimal-in', matches: ['ft-and-decimal-in'] }, // localized in OptionDropDown() call below\n            { name: 'Decimal inches', units: 'decimal-in', matches: ['in', 'decimal-in'] },           // localized in OptionDropDown() call below\n            { name: 'Fractional inches', units: 'fractional-in', matches: ['fractional-in'] },  // localized in OptionDropDown() call below\n            { name: 'Meters', units: 'm', matches: ['m'] },                                     // localized in OptionDropDown() call below\n            { name: 'Centimeters', units: 'cm', matches: ['cm'] },                              // localized in OptionDropDown() call below\n            { name: 'Millimeters', units: 'mm', matches: ['mm'] },                              // localized in OptionDropDown() call below\n            { name: 'Meters and centimeters', units: 'm-and-cm', matches: ['m-and-cm'] },        // localized in OptionDropDown() call below\n            { name: 'Points', units: 'pt', matches: ['pt'] }                                    // localized in OptionDropDown() call below\n        ];\n\n        var initialIndex = this.findUnits(),\n            unitNames = [];\n        \n        // It is not possible to hide elements in Safari.\n        if (av.isSafari() && this.viewer.model.getDisplayUnit()){\n            // We will remove the 'Unknown' unit from the units array.\n            this.units.shift();\n        }\n        \n        for (var i = 0; i < this.units.length; ++i) {\n            unitNames.push(this.units[i].name);\n        }\n\n        this.unitList = new avp.OptionDropDown(\"Unit type\", this.tbody, unitNames, initialIndex, null, { paddingLeft: 0, paddingRight: 15 });\n        this.unitList.setGlobalManager(this.globalManager);\n        this.unitList.addEventListener(\"change\", function(e) {\n            var index = self.unitList.selectedIndex;\n            var toUnits = self.units[index].units;\n            self.measureTool.setUnits(toUnits);\n            self.setupPrecision();\n            avp.logger.track({ category: 'pref_changed', name: 'measure/units', value: toUnits });\n        });\n\n        this.precisionList = new avp.OptionDropDown(\"Precision\", this.tbody, [], -1, null, { paddingLeft: 0, paddingRight: 15 });\n        this.precisionList.setGlobalManager(this.globalManager);\n        this.precisionList.addEventListener(\"change\", function(e) {\n            var index = self.precisionList.selectedIndex;\n            self.measureTool.setPrecision(index);\n            avp.logger.track({ category: 'pref_changed', name: 'measure/precision', value: index });\n        });\n\n        this.isolate = new avp.OptionCheckbox(\"Isolate measurement\", this.tbody, false);\n        this.isolate.setGlobalManager(this.globalManager);\n        this.isolate.addEventListener(\"change\", function(e) {\n            var enable = self.isolate.checked;\n            self.measureTool.setIsolateMeasure(enable);\n            if (enable) {\n                self.measureTool.isolateMeasurement();\n            }\n            else {\n                self.measureTool.clearIsolate();\n            }\n            avp.logger.track({ category: 'pref_changed', name: 'measure/isolate', value: enable });\n        });\n\n        this.freeMeasure = new avp.OptionCheckbox(\"Enable free measure\", this.tbody, this.measureExtension.isFreeMeasureMode());\n        this.freeMeasure.setGlobalManager(this.globalManager);\n        this.freeMeasure.addEventListener(\"change\", function(e) {\n            var enable = self.freeMeasure.checked;\n            self.measureExtension.setFreeMeasureMode(enable)\n            avp.logger.track({ category: 'pref_changed', name: 'measure/freeMeasure', value: enable });\n        });\n\n        this.setupPrecision();\n\n        this.updateSettingsPanel();\n\n        if (this.viewer.model && this.viewer.model.is2d()) {\n            this.isolate.setVisibility(false);\n        }\n\n        if (!this.measureExtension.sharedMeasureConfig.units) {\n            this.disableUnitOption();\n        }\n        // Only disable option if the browser is not Safari\n        else if (!Autodesk.Viewing.isSafari()){\n            this.disableUnitOption(0);  // disable \"Unknown\" option when the model has units\n        }\n\n\n        // Create a button for 'Done'.\n        this.measureDoneBtn = new avu.Button(\"toolbar-measureTool-done\");\n        this.measureDoneBtn.setGlobalManager(this.globalManager);\n        var doneText = Autodesk.Viewing.i18n.translate('Done');\n        this.measureDoneBtn.setToolTip(doneText);\n        var cancelLabel = _document.createElement('label');\n        cancelLabel.textContent = doneText;\n        var btnContainer = this.measureDoneBtn.container;\n        btnContainer.appendChild(cancelLabel);\n        btnContainer.classList.add('adsk-label-button');\n        var iconEle = btnContainer.getElementsByClassName('adsk-button-icon');\n        iconEle && iconEle[0] && (iconEle[0].style.display = 'none');\n\n        this.measureDoneBtn.onClick = function() {\n            this.measureExtension.exitMeasurementMode();\n        }.bind(this);\n        this.measureToolbar.addControl(this.measureDoneBtn);\n\n        // this.settingsControlPanel.style.width = this.measureToolbar.container.getBoundingClientRect().width + 'px';\n        this.measureToolbar.setVisible(false);\n\n    };\n\n    proto.destroy = function() {\n\n        // If toolbar was open, close it first. Otherwise, we leave ModelTools toolbar in a broken state.\n        if (this.visible) {\n            this.closeToolbar();\n        }\n\n        if (this.measureToolbar) {\n            this.measureToolbar.removeFromParent();\n            this.measureToolbar = null;\n        }\n    };\n\n    proto.closeToolbar = function() {\n\n        this.measureExtension.enableMeasureTool(false);\n        this.measureExtension.enableCalibrationTool(false);\n        this.toggleVisible();\n\n        var toolbar = this.viewer.getToolbar();\n        var viewerToolbarContainer = toolbar.container;\n        var viewerContainerChildrenCount = viewerToolbarContainer.children.length;\n        \n        for(var i = 0; i < viewerContainerChildrenCount; ++i) {\n            viewerToolbarContainer.children[i].style.display = \"\";\n        }\n\n        var modelTools = toolbar.getControl(av.TOOLBAR.MODELTOOLSID);\n        modelTools.addControl(this.measureExtension.measurementToolbarButton, {index: this.measureExtension.measurementToolbarButton.index });\n    };\n\n    proto.toggleVisible = function() {\n        this.visible = !this.visible;\n        this.measureToolbar.setVisible(this.visible);\n        if (!this.visible) {\n            this.settingsControlPanel.classList.add('hide');\n            this.setButtonInactive(this.settingsBtn);\n        }\n    };\n\n    proto.setButtonActive = function(button) {\n        button.setState(avu.Button.State.ACTIVE);\n    };\n\n    proto.setButtonInactive = function(button) {\n        button.setState(avu.Button.State.INACTIVE);\n    };\n\n    proto.deactivateAllButtons = function() {\n        for (var key in this.buttonsList) {\n            if (this.buttonsList.hasOwnProperty(key)) {\n                var button = this.buttonsList[key];\n                this.setButtonInactive(button);   \n            }\n        }\n    };\n\n    proto.activateButtonByType = function(measurementType) {\n        // Check that toolbar button exists - some measurement types don't have UI\n        this.buttonsList[measurementType] && this.setButtonActive(this.buttonsList[measurementType]);\n    };            \n\n    proto.setupPrecision = function() {\n        const _document = this.getDocument();\n        while (this.precisionList.dropdownElement.lastChild) {\n            this.precisionList.dropdownElement.removeChild(this.precisionList.dropdownElement.lastChild);\n        }\n\n        var selectedUnits = this.measureTool.getUnits(),\n            precisions;\n\n        if (selectedUnits === 'ft-and-fractional-in' || selectedUnits === 'fractional-in') {\n            precisions = ['1', '1/2', '1/4', '1/8', '1/16', '1/32', '1/64'];\n        } else {\n            precisions = ['0', '0.1', '0.01', '0.001', '0.0001', '0.00001'];\n        }\n\n        for (var i = 0; i < precisions.length; ++i) {\n            var elem = _document.createElement('option');\n            elem.value = i;\n            elem.textContent = precisions[i];\n            this.precisionList.dropdownElement.appendChild(elem);\n        }\n\n        var selectedIndex = this.measureTool.getPrecision();\n        if (precisions.length <= selectedIndex) {\n            selectedIndex = precisions.length - 1;\n            this.measureTool.setPrecision(selectedIndex);\n        }\n        this.precisionList.dropdownElement.selectedIndex = selectedIndex;\n    };\n\n    proto.findUnits = function() {\n        var i,\n            j,\n            selectedUnits = this.measureTool.getUnits();\n        for (i = 0; i < this.units.length; ++i) {\n            var matches = this.units[i].matches;\n            if (matches) {\n                for (j = 0; j < matches.length; ++j) {\n                    if (matches[j] === selectedUnits) {\n                        return i;\n                    }\n                }\n            }\n        }\n        return 0;\n    };\n\n    proto.disableUnitOption = function( index ) {\n        if (index != null) {\n            this.unitList.dropdownElement.children[index].style.display = \"none\";\n            if (av.isIE11) {\n                // IE11 can't hide <option> elements...\n                this.unitList.dropdownElement.children[index].disabled = true;\n                this.unitList.dropdownElement.children[index].style.visibility = \"hidden\";\n            }\n        } else {  // disable all options\n            this.unitList.dropdownElement.disabled = true;\n        }\n    };\n\n    proto.updateSettingsPanel = function() {\n        this.unitList.dropdownElement.selectedIndex = this.findUnits();\n        this.precisionList.dropdownElement.selectedIndex = this.measureTool.getPrecision();\n        this.setupPrecision();\n    };\n\n\n","import { MeasureTool } from './MeasureTool'\nimport { CalibrationTool } from './CalibrationTool'\nimport { MagnifyingGlass } from './MagnifyingGlass'\nimport { CalibrationRequiredDialog } from './CalibrationPanels'\nimport { MeasureToolbar } from './MeasureToolbar'\n\n\nimport CSS_1 from './Measure.css'       // IMPORTANT!!\nimport CSS_2 from './Calibration.css'   // IMPORTANT!!\n\n'use strict';\n\nvar avem = AutodeskNamespace('Autodesk.Viewing.Extensions.Measure'),\n    av = Autodesk.Viewing,\n    avp = Autodesk.Viewing.Private,\n    avu = av.UI;\nvar MeasureCommon = Autodesk.Viewing.MeasureCommon; // Comes form main viewer bundle.\n\nvar NONE = 0;\nvar MEASURE_TOOL = 1;\nvar CALIBRATION_TOOL = 2;\n\nvar DEFAULT_MEASUREMENT_TYPE = MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE;\n\n/**\n * Provides UI controls to perform distance and angle measurements for 2D and 3D models.\n * \n * The extension id is: `Autodesk.Measure`\n * \n * @example\n *   viewer.loadExtension('Autodesk.Measure')\n *  \n * @memberof Autodesk.Viewing.Extensions\n * @alias Autodesk.Viewing.Extensions.MeasureExtension\n * @see {@link Autodesk.Viewing.Extension} for common inherited methods.\n * @constructor\n*/\nexport var MeasureExtension = function(viewer, options) {\n    Autodesk.Viewing.Extension.call(this, viewer, options);\n    this.modes = ['distance','angle','area','calibrate'];\n    this.name = 'measure';\n    this._onModelLoaded = this._onModelLoaded.bind(this);\n    this._onDisplayUnitsPrefChanged = this._onDisplayUnitsPrefChanged.bind(this);\n    this._onPrecisionPrefChanged = this._onPrecisionPrefChanged.bind(this);\n};\n\nMeasureExtension.prototype = Object.create(Autodesk.Viewing.Extension.prototype);\nMeasureExtension.prototype.constructor = MeasureExtension;\n\n\n/**\n * Load the measure extension.\n * @returns {boolean} True if measure extension is loaded successfully.\n * \n * @alias Autodesk.Viewing.Extensions.MeasureExtension#load\n*/\nMeasureExtension.prototype.load = async function() {\n\n    await this.viewer.loadExtension('Autodesk.Snapping');\n\n    var self   = this;\n    var viewer = this.viewer;\n    this.hasUI = Autodesk.Viewing.GuiViewer3D && viewer instanceof Autodesk.Viewing.GuiViewer3D;\n\n    this.escapeHotkeyId = 'Autodesk.Measure.Hotkeys.Escape';\n\n    // Register the Measure tool\n    if (!viewer.toolController){\n        return false;\n    }\n\n    this.options = this.options || {};\n    var measureToolOptions = {};\n\n    measureToolOptions.onCloseCallback = function() {\n        self.enableMeasureTool(false);\n    };\n\n    // Shared State with measureTool & calibrationTool.\n    // Gets populated when a model is received.\n    this.sharedMeasureConfig = { \n        units: null,\n        precision: null,\n        calibrationFactor: null\n    };\n\n\tmeasureToolOptions.snapperOptions = this.options.snapperOptions;\n\n    this.forceCalibrate = this.options.forceCalibrate;\n\n    this.snapper = new Autodesk.Viewing.Extensions.Snapping.Snapper(viewer, {\n        renderSnappedTopology: true\n    });\n    viewer.toolController.registerTool(this.snapper);\n\n    this.measureTool = new MeasureTool(viewer, measureToolOptions, this.sharedMeasureConfig, this.snapper);\n    viewer.toolController.registerTool(this.measureTool);\n\n    this.calibrationTool = new CalibrationTool(viewer, this.options, this.sharedMeasureConfig, this.snapper);\n    viewer.toolController.registerTool(this.calibrationTool);\n\n    this.magnifyingGlass = new MagnifyingGlass(viewer);\n    viewer.toolController.registerTool(this.magnifyingGlass);\n\n    this.calibration = {};\n    this.onFinishedCalibration = function(event) {\n        if (self.measureToolbar) {\n            self.measureToolbar.updateSettingsPanel();\n        }\n\n        self.activateInitiator && self.activateInitiator();\n\n        // Set the calibration values\n        self.calibration.units = event.units;\n        self.calibration.scaleFactor = event.scaleFactor;\n        self.calibration.size = event.size;\n        self.calibration.precision = self.sharedMeasureConfig.precision;\n    };\n\n    viewer.addEventListener('finished-calibration', this.onFinishedCalibration);\n\n    this.onMeasurementChanged = function(event) {\n        var type = event.data.type;\n        self.changeMeasurementType(type);\n    };\n\n    viewer.addEventListener(MeasureCommon.Events.MEASUREMENT_CHANGED_EVENT, this.onMeasurementChanged);\n\n    if (viewer.model) {\n        this._onModelLoaded({ model: viewer.model });\n    } else {\n        viewer.addEventListener(av.MODEL_ROOT_LOADED_EVENT, this._onModelLoaded, { once: true });\n    }\n\n    // If there is no model anymore, interrupt any ongoing interaction.\n    // We need at least one model to derive things like is2d() and model units.\n    this.onModelRemoved = function() {\n        // If UI was not created yet or destroyed, we don't have to disable anything\n        if (!self.measurementToolbarButton) {\n            return;\n        }\n                \n        if (!self.viewer.model) {\n            self.measurementToolbarButton.setState(Autodesk.Viewing.UI.Button.State.DISABLED);\n            self.exitMeasurementMode();\n        }\n    };\n    this.onModelAdded = function() {\n\n        // If UI was not created yet or destroyed, the button will be enabled in next createUI() call\n        if (!self.measurementToolbarButton) {\n            return;\n        }\n\n        // On first model-add, re-enable measure toolbar again\n        var modelCount = self.viewer.getVisibleModels().length;\n        if (modelCount === 1 && self.measurementToolbarButton) {\n            self.measurementToolbarButton.setState(Autodesk.Viewing.UI.Button.State.INACTIVE);\n        }\n    };\n    viewer.addEventListener(av.MODEL_ADDED_EVENT, this.onModelAdded);\n    viewer.addEventListener(av.MODEL_REMOVED_EVENT, this.onModelRemoved);\n\n    this.viewer.prefs.addListeners(avp.Prefs.DISPLAY_UNITS, this._onDisplayUnitsPrefChanged, this._onDisplayUnitsPrefChanged);\n    this.viewer.prefs.addListeners(avp.Prefs.DISPLAY_UNITS_PRECISION, this._onPrecisionPrefChanged, this._onPrecisionPrefChanged);\n};\n\n/**\n * \n * @param {string} unit value \n * @private\n */\nMeasureExtension.prototype._onDisplayUnitsPrefChanged = function(value) {\n    if (value !== '') {\n        this.setUnits(value);\n        this.measureToolbar.updateSettingsPanel();\n        // Also update the units in calibration panel\n        this.calibrationTool.updateCalibrationPanel();\n    }\n}\n\n/**\n * \n * @param {string} precision value\n * @private\n */\nMeasureExtension.prototype._onPrecisionPrefChanged = function (value) {\n   if (typeof value === 'number') {\n       this.setPrecision(value);\n       this.measureToolbar.updateSettingsPanel();\n   }\n}\n\nMeasureExtension.prototype._onModelLoaded = function(event) {\n    var model = event.model;\n\n    const setPdfUnits = !!model.isPdf(true) && !this.viewer.prefs.get(avp.Prefs2D.FORCE_PDF_CALIBRATION);\n    const setLeafletUnits = !!model.isLeaflet() && !this.viewer.prefs.get(avp.Prefs2D.FORCE_LEAFLET_CALIBRATION);\n\n    this.sharedMeasureConfig.units = this.options.calibrationUnits || this.viewer.prefs.get(avp.Prefs.DISPLAY_UNITS) || model.getDisplayUnit();\n\n    // Set the units to points only for pdf and leaflet models that do not contain model units in the metadata.\n    if ((setPdfUnits || setLeafletUnits) && !model.getMetadata('page_dimensions', 'model_units', null)) {\n        this.sharedMeasureConfig.units = 'pt';\n    }\n\n    const precisionPreference = this.viewer.prefs.get(avp.Prefs.DISPLAY_UNITS_PRECISION);\n    if (typeof precisionPreference === 'number') {\n        this.sharedMeasureConfig.precision = precisionPreference;\n    } else {\n        this.sharedMeasureConfig.precision = model.is2d() ? 3 : 1; \n    }\n\n    if (this.options.calibrationUnits && !isNaN(this.options.calibrationFactor)) {\n        this.calibrationTool.calibrateByScale(this.options.calibrationUnits, this.options.calibrationFactor);\n    }\n}\n\n/**\n * Unload the measure extension.\n * @returns {boolean} True if measure extension is unloaded successfully.\n * \n * @alias Autodesk.Viewing.Extensions.MeasureExtension#unload\n*/\nMeasureExtension.prototype.unload = function () {\n    var viewer = this.viewer;\n\n    // Remove the ui from the viewer.\n    this.destroyUI();\n\n    viewer.removeEventListener('finished-calibration', this.onFinishedCalibration);\n    viewer.removeEventListener(MeasureCommon.Events.MEASUREMENT_CHANGED_EVENT, this.onMeasurementChanged);\n    viewer.removeEventListener(av.MODEL_ADDED_EVENT, this.onModelAdded);\n    viewer.removeEventListener(av.MODEL_REMOVED_EVENT, this.onModelRemoved);\n    viewer.removeEventListener(av.MODEL_ROOT_LOADED_EVENT, this._onModelLoaded);\n\n    viewer.toolController.deregisterTool(this.snapper);\n    this.snapper = null;\n\n    viewer.toolController.deregisterTool(this.measureTool);\n    this.measureTool = null;\n\n    viewer.toolController.deregisterTool(this.calibrationTool);\n    this.calibrationTool = null;\n\n    viewer.toolController.deregisterTool(this.magnifyingGlass);\n    this.magnifyingGlass = null;\n\n    this.unloaded = true;\n    \n    viewer.prefs.removeListeners(avp.Prefs.DISPLAY_UNITS, this._onDisplayUnitsPrefChanged, this._onDisplayUnitsPrefChanged);\n    viewer.prefs.removeListeners(avp.Prefs.DISPLAY_UNITS_PRECISION, this._onPrecisionPrefChanged, this._onPrecisionPrefChanged);\n    \n    return true;\n};\n\n/**\n * Enable/disable the measure tool.\n * It does not update the toolbar UI.\n * \n * @param {boolean} active - True to activate, false to deactivate.\n * @returns {boolean} True if a change in activeness occurred.\n */\nMeasureExtension.prototype.setActive = function(active) {\n    return this.enableMeasureTool(active);\n};\n\n/**\n * Toggles activeness of the measure tool.\n * It does not update the toolbar UI.\n * \n * @return {boolean} Whether the tool is active.\n */\nMeasureExtension.prototype.toggle = function() {\n    if (this.isActive()) {\n        this.enableMeasureTool(false);\n    } else {\n        this.enableMeasureTool(true);\n    }\n    return this.isActive();\n};\n\n/**\n * Get the current measurement in the measure tool.\n * @param {string} [unitType] - Either: \"decimal-ft\", \"ft\", \"ft-and-decimal-in\", \"decimal-in\", \"fractional-in\", \"m\", \"cm\", \"mm\" or \"m-and-cm\".\n * @param {number} [precision] - precision index (0: 0, 1: 0.1, 2: 0.01, 3: 0.001, 4: 0.0001, 5: 0.00001).\n * When units type is \"ft\", \"in\" or \"fractional-in\", then the precisions are 0: 1, 1: 1/2, 2: 1/4, 3: 1/8, 4: 1/16, 5: 1/32, 6: 1/64.\n * @returns {object|null} Object with properties of the current measurement, or null.\n * @alias Autodesk.Viewing.Extensions.MeasureExtension#getMeasurement\n */\nMeasureExtension.prototype.getMeasurement = function(unitType, precision) {\n    var measurement = null;\n    if (this.measureTool.isActive()) {\n        measurement = this.measureTool.getMeasurement(unitType, precision);\n    }\n    return measurement;\n};\n\n/**\n * Get a list of all the measurements that are currently on the screen.\n * @param {string} [unitType] - Either: \"decimal-ft\", \"ft\", \"ft-and-decimal-in\", \"decimal-in\", \"fractional-in\", \"m\", \"cm\", \"mm\" or \"m-and-cm\".\n * @param {number} [precision] - precision index (0: 0, 1: 0.1, 2: 0.01, 3: 0.001, 4: 0.0001, 5: 0.00001).\n * When units type is \"ft\", \"in\" or \"fractional-in\", then the precisions are 0: 1, 1: 1/2, 2: 1/4, 3: 1/8, 4: 1/16, 5: 1/32, 6: 1/64.\n * @returns {Array.<Object>} An array of measurement objects with properties of the measurement.\n * @alias Autodesk.Viewing.Extensions.MeasureExtension#getMeasurementList\n */\n\nMeasureExtension.prototype.getMeasurementList = function(unitType, precision) {\n  var measurementList = [];\n  if(this.measureTool.isActive()) {\n      measurementList = this.measureTool.getMeasurementList(unitType, precision);\n  }\n  return measurementList;\n}\n\n/**\n * Restores existing measurements. The `measurements` object should be generated by either the {@link Autodesk.Viewing.Extensions.MeasureExtension#getMeasurementList|getMeasurementList} or the {@link Autodesk.Viewing.Extensions.MeasureExtension#getMeasurement|getMeasurement} methods.\n * @param {Object[]|Object} measurements - An array of measurement objects\n * @alias Autodesk.Viewing.Extensions.MeasureExtension#setMeasurements\n */\nMeasureExtension.prototype.setMeasurements = function(measurements) {\n    if (this.measureTool.isActive()) {\n        this.measureTool.setMeasurements(measurements);\n    }\n};\n\n\n/**\n * Get all available units in measure tool.\n * @returns {object[]} Array of all available units.\n*/\nMeasureExtension.prototype.getUnitOptions = function() {\n    var units = [\n        { name: 'Unknown', type: '' },\n        { name: 'Decimal feet', type: 'decimal-ft' },\n        { name: 'Feet and fractional inches', type: 'ft' },\n        { name: 'Feet and decimal inches', type: 'ft-and-decimal-in' },\n        { name: 'Decimal inches', type: 'decimal-in' },\n        { name: 'Fractional inches', type: 'fractional-in' },\n        { name: 'Meters', type: 'm' },\n        { name: 'Centimeters', type: 'cm' },\n        { name: 'Millimeters', type: 'mm' },\n        { name: 'Meters and centimeters', type: 'm-and-cm' },\n        { name: 'Points', type: 'pt' }\n    ];\n\n    return units;\n};\n\n/**\n * Get all available precisions in measure tool.\n * @param {boolean} isFractional - Set true to get fractional precisions.\n * @return {string[]} List of all available precisions.\n*/\nMeasureExtension.prototype.getPrecisionOptions = function(isFractional) {\n\n    var precisions;\n\n    if (isFractional)\n        precisions = ['1', '1/2', '1/4', '1/8', '1/16', '1/32', '1/64'];\n    else\n        precisions = ['0', '0.1', '0.01', '0.001', '0.0001', '0.00001'];\n\n    return precisions;\n};\n\n/**\n * Get the default measure unit in measure tool.\n * @returns {string} The default measure unit.\n*/\nMeasureExtension.prototype.getDefaultUnit = function() {\n    var unit = this.viewer.model.getDisplayUnit();\n\n    return unit;\n};\n\nMeasureExtension.prototype.openCalibrationRequiredDialog = function (initiator) {\n    if (this.hasUI) {\n        if (!this.CalibrationRequiredDialog) {\n            this.CalibrationRequiredDialog = new CalibrationRequiredDialog(this, this.viewer, \"calibration-required\", \"Calibration Required\", this.options );\n        }\n\n        this.CalibrationRequiredDialog.setVisible(true);\n    }\n    else {\n        this.viewer.dispatchEvent({ type: MeasureCommon.Events.CALIBRATION_REQUIRED_EVENT });\n    }\n\n    if (initiator === 'measure') {\n        this.activateInitiator = function() {\n            this.enableMeasureTool(true, DEFAULT_MEASUREMENT_TYPE);\n            this.activateInitiator = null;\n        };\n    } else if (initiator === 'dimension') {\n        this.activateInitiator = function() {\n            this.viewer.dispatchEvent({ type: MeasureCommon.Events.FINISHED_CALIBRATION_FOR_DIMENSION_EVENT });\n            this.activateInitiator = null;\n        };\n    }\n};\n\n/**\n * Get the calibration size, unit type and the calibration Factor of the model\n * @returns {Object}\n */\nMeasureExtension.prototype.getCalibration = function() {\n    return this.calibration;\n};\n\n\n/**\n * @param mode Measurement Mode\n * @returns {boolean}\n */\n\n /**\n  * Activates the tool and UI to start measuring.\n  * \n  * @param {string} [mode] - Either 'distance', 'angle', 'area' (2D only) or 'calibrate'. Default is 'distance'.\n * \n * @alias Autodesk.Viewing.Extensions.MeasureExtension#activate\n  */\nMeasureExtension.prototype.activate = function (mode) {\n    if (this.activeStatus && this.mode === mode) {\n        return true;\n    }\n\n    // Once activated, the display units preference will no longer control\n    // units in measure\n    this.viewer.prefs.removeListeners(avp.Prefs.DISPLAY_UNITS, this._onDisplayUnitsPrefChanged, this._onDisplayUnitsPrefChanged);\n    this.viewer.prefs.removeListeners(avp.Prefs.DISPLAY_UNITS_PRECISION, this._onPrecisionPrefChanged, this._onPrecisionPrefChanged);\n\n    this.enterMeasurementMode();\n\n    var success;\n\n    switch (mode) {\n        default:\n            mode = 'distance';\n        case 'distance':\n            success = this.enableMeasureTool(true, MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE);\n            break;\n        case 'angle':\n            success = this.enableMeasureTool(true, MeasureCommon.MeasurementTypes.MEASUREMENT_ANGLE);\n            break;\n        case 'area':\n            if(!this.viewer.model.is2d()) {\n                console.warn('Area mode is applicable on 2D models only');\n            } else {\n                success = this.enableMeasureTool(true, MeasureCommon.MeasurementTypes.MEASUREMENT_AREA);\n            }\n            break;\n        case 'calibrate':\n            success = this.enableCalibrationTool(true);\n            break;\n    }\n\n    this.mode = success ? mode : '';\n    this.activeStatus = true;\n    return true;\n};\n\n/**\n * Deactivates measuring tool and UI.\n * \n * @returns {boolean}\n * \n * @alias Autodesk.Viewing.Extensions.MeasureExtension#deactivate\n */\nMeasureExtension.prototype.deactivate = function () {\n    if(this.activeStatus) {\n        this.exitMeasurementMode();\n        this.enableMeasureTool(false);\n        this.activeStatus = false;\n    }\n    return true;\n};\n\n/**\n * Force the calibration panel for pdf models\n * @param {Boolean} enable - true to force the calibration panel\n */\nMeasureExtension.prototype.setForcePDFCalibrate = function(enable) {\n    this.viewer.prefs.set(avp.Prefs2D.FORCE_PDF_CALIBRATION, enable);\n};\n\n/**\n * Force the calibration panel for leaflet models\n * @param {Boolean} enable - true to force the calibration panel\n */\nMeasureExtension.prototype.setForceLeafletCalibrate = function(enable) {\n    this.viewer.prefs.set(avp.Prefs2D.FORCE_LEAFLET_CALIBRATION, enable);\n};\n\n/**\n * Restore session measurements when enabling the measure tool.\n * @param {Boolean} enable - true to restore session measurements. \n */\nMeasureExtension.prototype.setRestoreSessionMeasurements = function(enable) {\n    this.viewer.prefs.set(avp.Prefs.RESTORE_SESSION_MEASUREMENTS, enable);\n}\n\n/**\n * Enable/disable the measure tool.\n * @param {boolean} enable - True to enable, false to disable.\n * @returns {boolean} True if the tool state was changed.\n * @private\n */\nMeasureExtension.prototype.enableMeasureTool = function(enable, measurementType) {\n    if (measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_AREA && this.viewer.model && !this.viewer.model.is2d()) {\n        return false;\n    }\n\n    var toolController = this.viewer.toolController,\n        isActive = (this.selectedTool === MEASURE_TOOL);\n\n    if (!this.viewer.model || (!enable && isActive)) {\n        if (this.measureTool.isActive()) {\n            toolController.deactivateTool(\"measure\");\n\n            if (this.measureToolbar) {\n                this.measureToolbar.deactivateAllButtons();\n            }\n\n            // No tool is active anymore. Only do this if measureTool was really the active one before.\n            // If not, changing selectedTool would produce an inconsistent state, e.g., CalibrationTool \n            // may still be active, but enableCalibrationTool(false) would not properly close it.\n            this.selectedTool = NONE;\n        }\n\n        return true;\n    }\n\n    const forcePDFCalibration = this.viewer.model.isPdf(true) && this.viewer.prefs.get(avp.Prefs2D.FORCE_PDF_CALIBRATION);\n    const forceLeafletCalibration = this.viewer.model.isLeaflet() && this.viewer.prefs.get(avp.Prefs2D.FORCE_LEAFLET_CALIBRATION);\n\n    this.forceCalibrate |= forceLeafletCalibration || forcePDFCalibration;\n\n    if (!measurementType) {\n        measurementType = DEFAULT_MEASUREMENT_TYPE;\n    }\n\n    if (enable && !isActive) {\n        // Fetch topology when opening Measure tool for the first time.\n        this.checkAndFetchTopology(toolController.getTool('measure'));\n\n        if (!this.forceCalibrate || (this.forceCalibrate && this.calibrationTool.isCalibrated()) || measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_ANGLE) {\n            if (this.calibrationTool.isActive()) {\n                toolController.deactivateTool(\"calibration\");\n            }\n            \n            if (this.measureToolbar) {\n                this.measureToolbar.updateSettingsPanel();\n            }\n\n            toolController.activateTool(\"measure\");\n\n            this.selectedTool = MEASURE_TOOL;\n\n            \n\n            this.changeMeasurementType(measurementType);\n            return true;\n        }\n        else {\n            this.viewer.addEventListener(avem.OPEN_TOOL_AFTER_CALIBRAION, function(){\n                this.enableMeasureTool(true);                \n            }.bind(this), {once: true});\n            \n            this.openCalibrationRequiredDialog('measure');\n            return false;\n        }\n\n    } else if (enable && isActive) {\n        if (!this.forceCalibrate || (this.forceCalibrate && this.calibrationTool.isCalibrated()) || measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_ANGLE) {\n            this.changeMeasurementType(measurementType);\n            return true;\n        }\n        else {\n            this.openCalibrationRequiredDialog('measure');\n            return false;\n        }\n    }\n\n    return false;\n};\n\nMeasureExtension.prototype.changeMeasurementType = function(measurementType) {\n    this.measureTool.changeMeasurementType(measurementType);\n    if (this.measureToolbar) {\n        this.measureToolbar.deactivateAllButtons();\n        this.measureToolbar.activateButtonByType(measurementType);\n    }\n\n    switch (measurementType) {\n        case MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE:\n            this.mode = 'distance';\n            break;\n        case MeasureCommon.MeasurementTypes.MEASUREMENT_ANGLE:\n            this.mode = 'angle'\n            break;\n        case MeasureCommon.MeasurementTypes.MEASUREMENT_AREA:\n            this.mode = 'area';\n            break;\n        default:\n            this.mode = '';\n    }\n};\n\n/**\n * When enabled, the Viewer will only render model parts that are included in\n * measurements.\n *\n * @param {boolean} enable - true to render only nodes being measured.\n * \n * @alias Autodesk.Viewing.Extensions.MeasureExtension#setIsolateMeasure\n */\nMeasureExtension.prototype.setIsolateMeasure = function(enable) {\n    this.measureTool.setIsolateMeasure(enable);\n    if (enable) {\n        this.measureTool.isolateMeasurement();\n    } else {\n        this.measureTool.clearIsolate();\n    }\n}\n\n/**\n * Enable/disable the measure tool.\n * @param {boolean} enable - True to enable, false to disable.\n * @returns {boolean} True if the tool state was changed.\n * @private\n */\nMeasureExtension.prototype.enableCalibrationTool = function(enable) {\n    var toolController = this.viewer.toolController,\n        isActive = (this.selectedTool == CALIBRATION_TOOL);\n\n    if (enable && !isActive) {\n        if (this.measureTool.isActive()) {\n            toolController.deactivateTool(\"measure\");\n        }\n        \n        toolController.activateTool(\"calibration\");\n        this.viewer.dispatchEvent({ type: MeasureCommon.Events.UNITS_CALIBRATION_STARTS_EVENT });\n        \n        if (this.measureToolbar) {\n            this.measureToolbar.deactivateAllButtons();\n            this.measureToolbar.activateButtonByType(MeasureCommon.MeasurementTypes.CALIBRATION);\n        }\n\n        this.selectedTool = CALIBRATION_TOOL;\n        return true;\n\n    } else if (!enable && isActive) {\n        if (this.calibrationTool.isActive()) {\n            this.mode = '';\n            toolController.deactivateTool(\"calibration\");\n            if (this.measureToolbar) {\n                this.measureToolbar.deactivateAllButtons();\n            }\n        }\n\n        this.selectedTool = NONE;\n        return true;\n    }\n    return false;\n};\n\n/**\n * @private\n */\nMeasureExtension.prototype.enterMeasurementMode = function() {\n\n    if (this._measurementMode) return;\n    this._measurementMode = true;\n\n    this.viewer.dispatchEvent({type: MeasureCommon.Events.MEASUREMENT_MODE_ENTER});\n\n    if (!this.viewer.getToolbar) {\n        return; // Adds support for Viewer3D instance\n    }\n\n    var toolbar = this.viewer.getToolbar();    \n    var viewerToolbarContainer = toolbar.container;\n    var viewerContainerChildrenCount = viewerToolbarContainer.children.length;\n    for(var i = 0; i < viewerContainerChildrenCount; ++i) {\n        viewerToolbarContainer.children[i].style.display = \"none\";\n    }\n\n    this.navigationControls = toolbar.getControl(Autodesk.Viewing.TOOLBAR.NAVTOOLSID);\n    this.navigationControls.setVisible(true);\n    this.navigationControls.container.style.display = '';\n\n    this.measureControls = toolbar.getControl(Autodesk.Viewing.TOOLBAR.MEASURETOOLSID);\n    this.measureControls.setVisible(true);\n    this.measureControls.container.style.display = '';\n    \n    var measureButtonId = this.measurementToolbarButton.getId();\n    this.measurementToolbarButton.index = this.measurementToolbarButton.parent.indexOf(measureButtonId);\n    this.measurementToolbarButton.parent.removeControl(measureButtonId);\n\n    this.measureToolbar.toggleVisible();\n\n    if (this.viewer.centerToolBar) {\n        this.viewer.centerToolBar();\n    }\n\n    this.enableMeasureTool(true, DEFAULT_MEASUREMENT_TYPE);\n};\n\n/**\n * @private\n */\nMeasureExtension.prototype.exitMeasurementMode = function() {\n    if (!this._measurementMode) return;\n\n    this.viewer.dispatchEvent({type: MeasureCommon.Events.MEASUREMENT_MODE_LEAVE});\n\n    this.measureToolbar && this.measureToolbar.closeToolbar();\n    if (this.CalibrationRequiredDialog && this.CalibrationRequiredDialog.isVisible()) {\n        this.CalibrationRequiredDialog.setVisible(false);\n    }\n    this._measurementMode = false;\n};\n\n/**\n * Create measure button in toolbar.\n * @private\n*/\nMeasureExtension.prototype.onToolbarCreated = function(toolbar)\n{\n    if (this.measureToolbar) {\n        return;\n    }\n\n    var self   = this;\n    var viewer = this.viewer;\n\n    // Add Measure button to toolbar\n    var modelTools = toolbar.getControl(av.TOOLBAR.MODELTOOLSID);\n    this.measurementToolbarButton = new avu.Button('toolbar-measurementSubmenuTool');\n    this.measurementToolbarButton.setToolTip('Measure');\n    this.measurementToolbarButton.setIcon(\"adsk-icon-measure\");\n    modelTools.measurementToolbarButton = this.measurementToolbarButton;\n    modelTools.addControl(this.measurementToolbarButton, {index:0});\n\n    // Set button enabled if and only if there is >=1 visible model. Otherwise, it will remain disabled until next model-add event.\n    var state = this.viewer.model ? Autodesk.Viewing.UI.Button.State.INACTIVE : Autodesk.Viewing.UI.Button.State.DISABLED;\n    this.measurementToolbarButton.setState(state);\n\n    this.measureToolbar = new MeasureToolbar(this);\n    this.measureToolbar.init();\n\n    this.measurementToolbarButton.onClick = this.activate.bind(this);\n\n    // Escape hotkey to exit tool.\n    //\n    var hotkeys = [{\n        keycodes: [\n            Autodesk.Viewing.KeyCode.ESCAPE\n        ],\n        onRelease: function () {\n            if (self._measurementMode) {\n                self.exitMeasurementMode();\n                return true;\n            }\n        }\n    }];\n    viewer.getHotkeyManager().pushHotkeys(this.escapeHotkeyId, hotkeys);\n};\n\n\n/**\n * @private\n */\nMeasureExtension.prototype.checkAndFetchTopology = function(tool) {\n\n    if (this._checkedTopology) {\n        return;\n    }\n\n    this._checkedTopology = true;\n    if (!this.viewer.model.is3d()) {\n        tool && tool.setNoTopology();\n        return;\n    }\n\n    if (this.viewer.modelHasTopology()){\n        tool && tool.setTopologyAvailable();\n        return;\n    }\n\n    // Fetch topology from backend.\n    tool && tool.setFetchingTopology();\n    this.viewer.model.fetchTopology()\n    .then(function(topoData){\n        tool && tool.setTopologyAvailable();\n    })\n    .catch(function(err){\n        avp.logger.log(err); // No topology\n        tool && tool.setNoTopology();\n    });\n};\n\n/**\n * Destroy measure button in toolbar.\n * @private\n*/\nMeasureExtension.prototype.destroyUI = function()\n{\n    var viewer = this.viewer;\n\n    if (this.measureToolbar) {\n         this.measureToolbar.destroy();\n         this.measureToolbar = null;\n    }\n\n    if (this.measurementToolbarButton) {\n        this.measurementToolbarButton.removeFromParent();\n        this.measurementToolbarButton = null;\n    }\n\n    viewer.getHotkeyManager().popHotkeys(this.escapeHotkeyId);\n};\n\nMeasureExtension.prototype.setUnits = function(units) {\n    this.measureTool.setUnits(units);\n};\n\nMeasureExtension.prototype.getUnits = function() {\n    return this.measureTool.getUnits();\n};\n\nMeasureExtension.prototype.setPrecision = function(precision) {\n    this.measureTool.setPrecision(precision);\n};\n\nMeasureExtension.prototype.getPrecision = function() {\n    return this.measureTool.getPrecision();\n};\n\nMeasureExtension.prototype.calibrate = function(requestedUnits, requestedSize) {\n    this.calibrationTool.calibrate(requestedUnits, requestedSize);\n};\n\nMeasureExtension.prototype.calibrateByScale = function(requestedUnits, requestedScale) {\n    this.calibrationTool.calibrateByScale(requestedUnits, requestedScale);\n};\n\nMeasureExtension.prototype.isCalibrationValid = function(requestedUnits, requestedSize) { \n    return this.calibrationTool.isCalibrationValid(requestedUnits, requestedSize); \n};\n\nMeasureExtension.prototype.getCalibrationFactor = function() {\n    return this.calibrationTool.getCalibrationFactor();\n};\n\nMeasureExtension.prototype.showAddCalibrationLabel = function() {\n    this.calibrationTool.showAddCalibrationLabel();\n};\n\n/**\n * Delete all measurements.\n * \n * @alias Autodesk.Viewing.Extensions.MeasureExtension#deleteAllMeasurements\n */\nMeasureExtension.prototype.deleteMeasurements = function() {\n    this.measureTool.deleteMeasurements();\n};\n\n/**\n * Deletes the selected measurement.\n * \n * @alias Autodesk.Viewing.Extensions.MeasureExtension#deleteCurrentMeasurement\n */\nMeasureExtension.prototype.deleteCurrentMeasurement = function() {\n    this.measureTool.deleteCurrentMeasurement();\n};\n\nMeasureExtension.prototype.selectMeasurementById = function(id) {\n    this.measureTool.selectMeasurementById(id);\n};\n\n/**\n * Enable measuring on non snapped locations.\n * @alias Autodesk.Viewing.Extensions.MeasureExtension#setFreeMeasureMode\n * @param {Boolean} allow - true to allow measuring on non snapped locations, otherwise false;\n * @param {Boolean} useLastViewport - override the free measurement's viewport with a previously created measurement's viewport.\n */\nMeasureExtension.prototype.setFreeMeasureMode = function(allow, useLastViewport) {\n    this.snapper.setSnapToPixel(allow);\n    this.measureTool.setUseLastViewport(!!useLastViewport);\n};\n\n/**\n * Checks whether measuring can be performed from non snapped locations.\n *\n * @alias Autodesk.Viewing.Extensions.MeasureExtension#isFreeMeasureMode\n *\n * @returns {Boolean} true is users can measure from any location.\n */\nMeasureExtension.prototype.isFreeMeasureMode = function() {\n    return this.snapper.getSnapToPixel();\n};\n\nav.theExtensionManager.registerExtension('Autodesk.Measure', MeasureExtension);\n\n\n","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n"],"sourceRoot":""}